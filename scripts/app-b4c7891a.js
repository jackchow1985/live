"use strict";angular.module("inspinia",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router","ui.bootstrap","highcharts-ng","ui.select","angular-venn","angularMoment","smart-table","ngBootstrap"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("login",{"abstract":!0,url:"/login",templateUrl:"components/login/login.html"}).state("index",{"abstract":!0,url:"/index",templateUrl:"components/common/content.html"}).state("index.main",{url:"/main",templateUrl:"app/main/main.html"}).state("index.school",{url:"/school",templateUrl:"components/school/school.html",data:{pageTitle:"School Analytics"}}).state("index.user",{url:"/userScore",templateUrl:"components/user/user_score.html",data:{pageTitle:"User Analytics"}}).state("index.profile",{url:"/profile/:userID/:region/:app",templateUrl:"components/user/user_profile.html",data:{pageTitle:"User Profile"}}).state("index.search",{url:"/profileSearch",templateUrl:"components/user/user_profile.html",data:{pageTitle:"User Profile"}}).state("index.incu",{url:"/incubatee",templateUrl:"components/incu/user_list.html",data:{pageTitle:"User List"}}).state("index.seed",{url:"/seed",templateUrl:"components/seed/user_list.html",data:{pageTitle:"Seed"}}).state("index.cmb",{url:"/cmb",templateUrl:"components/user/cmb_score.html",data:{pageTitle:"cmb"}}).state("index.core",{url:"/core",templateUrl:"components/user/core_user.html",data:{pageTitle:"core"}}).state("index.beta",{url:"/profile/:userID/:region/:app/:beta",templateUrl:"components/user/user_profile.html",data:{pageTitle:"User Profile Beta"}}).state("index.mt4",{url:"/mt4/:accountID",templateUrl:"components/user/mt4_profile.html",data:{pageTitle:"MT4 Profile Beta"}}).state("index.mt4users",{url:"/mt4users",templateUrl:"components/user/mt4_user.html",data:{pageTitle:"MT4 users"}}).state("index.quant",{url:"/quant",templateUrl:"components/school/quant.html",data:{pageTitle:"User Profile Beta"}}),t.otherwise("/index/main")}]).run(["$http","$rootScope",function(e,t){e.get("getSession").success(function(e){var i=e.role;t.roleRegion=e.region,t.roleSchool=e.school,t.userNick=e.nick,t.ftShow=e.ftShow,i&&!e.core?(i=i.toString().split(""),t.dashboardShow="1"==i[0]?!0:!1,!t.firstAvailablePage&&t.dashboardShow&&(t.firstAvailablePage="#/index/main"),t.schoolShow="1"==i[1]?!0:!1,!t.firstAvailablePage&&t.schoolShow&&(t.firstAvailablePage="#/index/school"),t.incuShow="1"==i[2]?!0:!1,!t.firstAvailablePage&&t.incuShow&&(t.firstAvailablePage="#/index/incubatee"),t.seedShow="1"==i[3]?!0:!1,!t.firstAvailablePage&&t.seedShow&&(t.firstAvailablePage="#/index/seed"),t.simShow="1"==i[4]?!0:!1,!t.firstAvailablePage&&t.simShow&&(t.firstAvailablePage="#/index/profileSearch"),t.exportShow="1"==i[5]?!0:!1,"#/index/main"==location.hash&&(location.href=t.firstAvailablePage?t.firstAvailablePage:e.ftShow?"#/index/userScore":"upload.html")):(t.simShow=!0,location.href="#/index/profile/"+e.username+"/"+e.region+"/"+e.app),Highcharts.setOptions({global:{useUTC:!1}})})}]),angular.module("inspinia").controller("UserScoreCtrl",["$scope","$rootScope","$http","$q",function(e,t,i,n){function a(e,t){i.get(e+"&ft="+t.name).success(function(e){for(var i=[],n=0;n<e.length;n++)0!=e[n]._id&&i.push([e[n]._id,e[n].count]);t.chartObj.series=[],t.chartObj.series=[{type:"column",name:"# users between this range",data:i}]})}function s(t){for(var i in e.fts)a(t,e.fts[i])}function o(t){e[t]={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},tooltip:{formatter:function(){return this.y+" # users feature "+this.x}},legend:{enabled:!1}},title:{text:""},xAxis:{title:{text:t+" Distrubtion"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}}}function r(){var e=n.defer();return i.get("getAllContestByApp?db=TW&app=FX").success(function(t){for(var i in t)t[i].name&&(p[t[i].contest_id]={name:t[i].name,icon_image:t[i].icon_image});e.resolve()}),e.promise}function l(){var e=n.defer();return i.get("getAllContestByApp?db=TW&app=FT").success(function(t){for(var i in t)t[i].name&&(p[t[i].contest_id]={name:t[i].name,icon_image:t[i].icon_image});e.resolve()}),e.promise}function c(){var e=n.defer();return i.get("getAllContestByApp?db=CN&app=FX").success(function(t){for(var i in t)t[i].name&&(p[t[i].contest_id]={name:t[i].name,icon_image:t[i].icon_image});e.resolve()}),e.promise}function d(){var e=n.defer();return i.get("getAllContestByApp?db=CN&app=FC").success(function(t){for(var i in t)t[i].name&&(p[t[i].contest_id]={name:t[i].name,icon_image:t[i].icon_image});e.resolve()}),e.promise}function h(){var e=n.defer();return i.get("getAllContestByApp?db=CN&app=SC").success(function(t){for(var i in t)t[i].name&&(p[t[i].contest_id]={name:t[i].name,icon_image:t[i].icon_image});e.resolve()}),e.promise}function g(){for(var t=0;t<e.userList.length;t++)i.get("getUserInfo?db="+e.contestSelected.region+"&userID="+e.userList[t].user_id).success(function(t){if(t&&t.length>0){var i=t[0];e.usersMap[i.USERID]=i}})}var p={};e.distShow=!1,e.fts=[];var u=["ft_avg_ngt_op","ft_std_op_qty","ft_df_qty","ft_active_ratio","ft_var","ft_trade_cnt","ft_tmdd","ft_roll_price","ft_bgw","ft_mdd","ft_bgl","ft_up","ft_avg_dr","ft_std_neg_pnlr","ft_avg_max_op","ft_streak","ft_active_ratio_sldwnd","ft_win_ratio","ft_trade_cnt_pday","ft_tdlf","ft_login_cnt","ft_cp_streak","ft_std_op_dr","ft_login_cnt_pday","ft_shp_rt","ft_tdd"];for(var m in u)o(u[m]),e.fts.push({chartObj:e[u[m]],name:u[m]});e.changeFt=function(t){t&&(e.contestSelected=t),e.contestSelected.contestID&&"fsw_sim_default"==e.weightSelected&&(e.weightSelected=e.weightFiles[1]),e.contestSelected.contestID||"fsw_simc_1"!=e.weightSelected&&"fsw_day_trade"!=e.weightSelected||(e.weightSelected=e.weightFiles[0]),"SEEDSC"==e.contestSelected.region&&(e.weightSelected="fsw_day_trade"),e.userList=[];var n="getFDTScoreList?wt_tg="+e.weightSelected+"&sort="+e.featureSelected+"&col="+e.contestSelected.id+"&ap_tag="+e.contestSelected.source+"&region="+e.contestSelected.region+"&limit="+e.limitList+"&desc="+e.sortTypeSelected+(e.incubatee?"&arena=incubatee":"");i.get(n).success(function(t){e.userList=t,g(),e.chartScoreDistConfig.series=[],e.chartProfDistConfig.series=[],e.chartRiskDistConfig.series=[],e.chartActDistConfig.series=[],e.chartConsiDistConfig.series=[],i.get(n+"&dist=fdt").success(function(t){for(var i=[],n=0;n<t.length;n++)0!=t[n]._id&&i.push([t[n]._id,t[n].count]);e.chartScoreDistConfig.series.push({type:"column",name:"# users between this range",data:i})}),i.get(n+"&dist=profitability").success(function(t){for(var i=[],n=0;n<t.length;n++)0!=t[n]._id&&i.push([t[n]._id,t[n].count]);e.chartProfDistConfig.series.push({type:"column",name:"# users between this range",data:i})}),i.get(n+"&dist=consistency").success(function(t){for(var i=[],n=0;n<t.length;n++)0!=t[n]._id&&i.push([t[n]._id,t[n].count]);e.chartConsiDistConfig.series.push({type:"column",name:"# users between this range",data:i})}),i.get(n+"&dist=riskCtrl").success(function(t){for(var i=[],n=0;n<t.length;n++)0!=t[n]._id&&i.push([t[n]._id,t[n].count]);e.chartRiskDistConfig.series.push({type:"column",name:"# users between this range",data:i})}),i.get(n+"&dist=activity").success(function(t){for(var i=[],n=0;n<t.length;n++)0!=t[n]._id&&i.push([t[n]._id,t[n].count]);e.chartActDistConfig.series.push({type:"column",name:"# users between this range",data:i})}),e.distShow&&s(n)})},e.changeProd=function(t){e.changeFt(t)},e.initProd=function(){e.contests=[],l().then(function(){r()}).then(function(){c()}).then(function(){h()}).then(function(){d()}).then(function(){i.get("queryContestByApp?prod="+e.productSelected).success(function(i){for(var n in i){var a={name:i[n].source+" - "+i[n].col,id:i[n].col,source:i[n].source,region:"CN"};i[n].col.indexOf("_test")>=0||(i[n].col.indexOf("_inc")>=0&&(a.region="INC"),i[n].col.indexOf("_seed")>=0&&(a.region="SEED"),i[n].col.indexOf("sc_china_seed")>=0&&(a.region="SEEDSC"),i[n].source&&i[n].source.indexOf("sim_all")>=0&&(a.name="中国"+(i[n].col.indexOf("fx")>=0?"外汇":i[n].col.indexOf("fc")>=0?"期货":"股票")+(i[n].col.indexOf("seed")>=0?"种子":i[n].col.indexOf("inc")>=0?"孵化器":"模拟")+"用户"),i[n].source&&i[n].source.indexOf("simc_")>=0?(a.contestID=i[n].source.split("simc_")[1],p[a.contestID]&&(a.name=p[a.contestID].name,a.icon_image=p[a.contestID].icon_image)):a.icon_image="https://lh3.googleusercontent.com/UYcLH0TfhavUG0BUl_7GtUhOpy8RQlPA1SepFY2v4XLNp3QlXkikOFfIrETmBRPcckQ=w300-rw",("INC"!=a.region||!t.incuShow||"CN"!=t.roleRegion&&"All"!=t.roleRegion)&&("SEED"!=a.region&&"SEEDSC"!=a.region||!t.seedShow||"CN"!=t.roleRegion&&"All"!=t.roleRegion)?"CN"!=a.region||"CN"!=t.roleRegion&&"All"!=t.roleRegion||!t.simShow||e.contests.push(a):e.contests.push(a))}e.contestSelected=e.contests[0],e.weightFiles=["fsw_sim_default","fsw_simc_1","fsw_all_tune","fsw_con_tune","fsw_day_trade","fsw_inc_1","fsw_inc_2","fsw_inc_aggrsv","fsw_inc_blnce","fsw_inc_cnsvtv","fsw_inc_shp","fsw_inc_w_op","fsw_inc_w_op_dr"],e.weightSelected=e.weightFiles[0],e.changeFt()}),i.get("queryContestByApp?prod="+e.productSelected+"&region=Global").success(function(i){for(var n in i){var a={name:i[n].source+" - "+i[n].col,id:i[n].col,source:i[n].source,region:"Global"};i[n].source&&i[n].source.indexOf("sim_all")>=0&&(a.name="全球"+(i[n].col.indexOf("fx")>=0?"外匯":"台灣期货")+(i[n].col.indexOf("seed")>=0?"种子":i[n].col.indexOf("inc")>=0?"孵化器":"模拟")+"用户"),i[n].col.indexOf("_test")>=0||(i[n].source&&i[n].source.indexOf("simc_")>=0?(a.contestID=i[n].source.split("simc_")[1],p[a.contestID]&&(a.name=p[a.contestID].name,a.icon_image=p[a.contestID].icon_image)):a.icon_image="https://avatars0.githubusercontent.com/u/18319956?v=3&s=200",t.ftShow&&i[n].col.indexOf("ft")>=0&&"CN"!=t.roleRegion?e.contests.push(a):t.ftShow||"CN"==t.roleRegion||e.contests.push(a))}})})},e.limitList=10,e.loginCount=0,e.tradeCount=0,e.features=["fdt","riskCtrl","riskPref","consistency","activity","profitability","ft_bgl","ft_mdd","ft_avg_max_op","ft_avg_nt_op","ft_std_neg_pnlr","ft_df_qty","ft_avg_dr","ft_avg_max_op","ft_up","ft_bgw","ft_std_op_qty","ft_std_op_dr","ft_login_cnt","ft_trade_cnt"],e.sortTypes=["Top","Tail","Random"],e.usersMap={},e.featureSelected=e.features[0],e.sortTypeSelected=e.sortTypes[0],e.chartScoreDistConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},tooltip:{formatter:function(){return this.y+" # users score "+this.x}},legend:{enabled:!1}},title:{text:""},xAxis:{title:{text:"FDT Score Distrubtion"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}},e.chartProfDistConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},tooltip:{formatter:function(){return this.y+" # users score "+this.x}},legend:{enabled:!1}},title:{text:""},xAxis:{title:{text:"Profitability Score Distrubtion"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}},e.chartRiskDistConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},tooltip:{formatter:function(){return this.y+" # users score "+this.x}},legend:{enabled:!1}},title:{text:""},xAxis:{title:{text:"Risk Control Score Distrubtion"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}},e.chartConsiDistConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},tooltip:{formatter:function(){return this.y+" # users score "+this.x}},legend:{enabled:!1}},title:{text:""},xAxis:{title:{text:"Consistency Score Distrubtion"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}},e.chartActDistConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},tooltip:{formatter:function(){return this.y+" # users score "+this.x}},legend:{enabled:!1}},title:{text:""},xAxis:{title:{text:"Activity Score Distrubtion"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}}}]),angular.module("inspinia").controller("UserProfileCtrl",["$scope","$rootScope","$http","$stateParams",function(e,t,i,n){function a(t){console.info(t),e.selectTradeDates=t,e.filteredList=[];for(var i=0;i<e.closedList.length;i++)moment(e.closedList[i].TRADE_DATE).format("YYYY-MM-DD")==t&&e.filteredList.push(e.closedList[i]);console.info(e.filteredList),e.$apply()}function s(t,n,a){for(var s=[],o=[],r=0,l=0;l<e.closedList.length;l++)50>r?(r++,s.push(e.closedList[l].ObjId)):(o.push(s),s=[e.closedList[l].ObjId],r=0);0==o.length&&s.length>0&&o.push(s);for(var c in o){var d=o[c];i.post("getTradeSide?userID="+a,{db:n,app:t,objIds:d}).success(function(t){if(t)for(var i in t)e.sideMap[t[i].OBJECT_ID]={side:"Buy"==t[i].SIDE?"Long":"Short",ts:moment(t[i].CREATED).toDate().getTime()/6e4}})}}function o(t,a,o,u,m){function f(){var n=e.dateRangeChanged?"trade_date="+moment(e.dateRange.endDate).format("YYYY-MM-DD")+"&":"";i.get("getScoreDisplay").success(function(s){var m=s;i.get("getUserFeatures?"+n+"col="+o.toLowerCase()+"&debug=true&userID="+t+"&region="+a+"&app_id="+o.toLowerCase()+"&contest_id="+u+(e.seedsc?"&wt_tg=fsw_day_trade":"")).success(function(t){if(0==t.length)console.info("no fdt score"),e.chartRadarFDTScoreConfig.series=[],e.chartSeedSCScoreConfig.series=[],e.chartSeedStyleScoreConfig.series=[],e.chartRadarRiskPreferenceConfig.series=[],e.chartRadarProfitConfig.series=[],e.chartRadarConfig.series=[],e.chartRadarFDTScoreConfig.title={text:"FDT Score is computing"},e.chartSeedStyleScoreConfig.title={text:"Trader Styles"};else{var i=[],n=[],a=m.risk_control.features;for(var s in a){var o=t[a[s].feature];i.push(o?{y:o.score,ori:o.raw}:0),h.push(a[s].name)}e.chartRadarConfig.series=[{type:"area",name:"Risk Control Score",data:i,pointPlacement:"on"}],a=m.profitability.features;for(var s in a){var o=t[a[s].feature];n.push(o?{y:o.score,ori:o.raw}:0),r.push(a[s].name)}e.chartRadarProfitConfig.series=[{type:"area",name:"Profitability Score",data:n,pointPlacement:"on"}],e.chartRadarRiskPreferenceConfig.series=[];var u=[];a=m.risk_preference.features;for(var s in a){var o=t[a[s].feature];if(o){var f=o.score;a[s].reversedFrom&&(f=a[s].reversedFrom-o.score),u.push({y:f,ori:o.raw})}else u.push(0);g.push(a[s].name)}e.chartRadarRiskPreferenceConfig.series=[{type:"area",name:"Risk Preference Score",data:u,pointPlacement:"on"}];var b=[];a=m.activity.features;for(var s in a){var o=t[a[s].feature];if(o){var f=o.score;b.push({y:f,ori:o.raw})}else b.push(0);p.push(a[s].name)}e.chartRadarActivityConfig.series=[{type:"area",name:"Activity Score",data:b,pointPlacement:"on"}],e.chartRadarFDTScoreConfig.series=[];var v=[];e.chartRadarFDTScoreConfig.title={text:"FDT Score: "+t.fdt.score.toFixed(2)},e.chartSeedSCScoreConfig.title={text:"FDT Score: "+t.fdt.score.toFixed(2)},a=m.fdt_score.features;for(var s in a){var o=t[a[s].feature];v.push(o?{y:o.score,ori:o.raw}:0),l.push(a[s].name)}var y=[],C=[];a=m.seedsc.fdt_score.features;for(var s in a){var o=t[a[s].feature];y.push(o?{y:o.score,ori:o.raw,weight:a[s].weight}:0),c.push(a[s].name)}a=m.seedsc.styles.features;for(var s in a){var o=t[a[s].feature];C.push(o?{y:o.score,ori:o.raw,weight:a[s].weight}:0),d.push(a[s].name)}e.chartRadarFDTScoreConfig.series=[{type:"area",name:"FDT Score",data:v,pointPlacement:"on"}],e.chartSeedSCScoreConfig.series=[{type:"area",name:"FDT Score",data:y,pointPlacement:"on"}],e.chartSeedStyleScoreConfig.series=[{type:"area",name:"Trader Styles",data:C,pointPlacement:"on"}]}})})}e.beta=n.beta,e.region=n.region,e.historyFilePath="getClosedTrades?format=csv&userID="+t+"&db="+a+"&app="+o+(m?"&refresh=true":""),e.historyFileName=t+".csv",i.get("getClosedTrades?userID="+t+"&db="+a+"&app="+o+(m?"&refresh=true":"")).success(function(i){var n=[];for(var r in i)moment(i[r].TRADE_DATE)>=e.dateRange.startDate&&moment(i[r].TRADE_DATE)<=e.dateRange.endDate&&(i[r].ObjId=i[r].POSITION_ID.split("_")[0],i[r].CREATED=moment(i[r].CREATED).toDate().getTime()/6e4,n.push(i[r]));n.sort(function(e,t){return Date.parse(e.TRADE_DATE)-Date.parse(t.TRADE_DATE)}),n=n.reverse(),e.closedList=n,e.rankListLoading=!1,e.loaded=!1,e.userClosedList=n,s(o,a,t)}),"SEED"!=a&&"INC"!=a&&i.get("getContestByApp?userID="+t+"&db="+a+"&app="+o).success(function(t){e.contestList=t}),i.get("getUserLastLogin?userID="+t+"&db="+a+"&app="+o+(m?"&refresh=true":"")).success(function(t){e.userLastLogin=t[0]}),i.get("getUserAccountSetting?userID="+t+"&db="+a+"&app="+o+(m?"&refresh=true":"")).success(function(t){e.userSetting=t[0]}),e.chartPNLConfig.series=[],e.seedsc&&(i.get("getSeedSCStat?type=eff&userID="+t+"&db="+a+"&app="+o+(m?"&refresh=true":"")).success(function(t){e.chartPNLConfig.series=[];for(var i=[],n=0;n<t.length;n++)i.push([Date.parse(t[n].trade_date),parseFloat(t[n].daily_eff)]);e.chartPNLConfig.series.push({type:"bar",name:"Daily P&L Efficiency",data:i})}),i.get("getSeedSCStat?type=commision&userID="+t+"&db="+a+"&app="+o+(m?"&refresh=true":"")).success(function(t){e.chartCommisionConfig.series=[];for(var i=[],n=0;n<t.length;n++)i.push([Date.parse(t[n].trade_date),parseFloat(t[n].daily_commission)]);e.chartCommisionConfig.series.push({type:"bar",name:"Daily Commision",color:"#f8ac59",data:i})}),i.get("getSeedSCStat?type=pos&userID="+t+"&db="+a+"&app="+o+(m?"&refresh=true":"")).success(function(t){e.stats_pos=t}),i.get("getSeedSCStat?type=pnl&userID="+t+"&db="+a+"&app="+o+(m?"&refresh=true":"")).success(function(t){e.stats_pnl=t})),i.get("getUserAccDaily?userID="+t+"&db="+a+"&app="+o+(m?"&refresh=true":"")).success(function(t){var i=[],n=[],a=[],s=[],o=[],r=[],l=[];e.chartConfig.series=[],e.chartValueConfig.series=[],e.chartRankingConfig.series=[],e.chartRollPriceConfig.series=[],e.chartTradeCountConfig.series=[];for(var c=0;c<t.length;c++)moment(t[c].TRADE_DATE)>=e.dateRange.startDate&&moment(t[c].TRADE_DATE)<=e.dateRange.endDate&&(i.push(e.seedsc?[Date.parse(t[c].TRADE_DATE),parseFloat(t[c].ALL_TIME_PNL)]:[Date.parse(t[c].TRADE_DATE),100*(parseFloat(t[c].UNIT_PRICE)-1)]),a.push([Date.parse(t[c].TRADE_DATE),parseFloat(t[c].CASH)]),n.push([Date.parse(t[c].TRADE_DATE),parseFloat(t[c].UNIT_PRICE)*parseFloat(t[c].CASH_DEPOSITED)]),s.push([Date.parse(t[c].TRADE_DATE),parseInt(t[c].Ranking)]),e.seedsc||o.push([Date.parse(t[c].TRADE_DATE),parseInt(t[c].PNL)]),r.push([Date.parse(t[c].TRADE_DATE),parseInt(t[c].UR_PNL)]),l.push([Date.parse(t[c].TRADE_DATE),parseFloat(t[c].ROLL_PRICE)]));if(t&&t.length>0){if(e.dateRange&&e.dateRange.endDate)for(var c in t)e.acc=moment(t[c].TRADE_DATE).format("YYYYMMDD")==moment(e.dateRange.endDate).format("YYYYMMDD")?t[c]:t[0];e.refresh=!1}e.accFirstDate=Date.parse(new Date(t[t.length-1].TRADE_DATE)),e.chartConfig.series.push({type:"area",name:e.seedsc?"All Time P&L":"ROI",data:i}),e.chartRankingConfig.series.push({type:"line",name:"Ranking",data:s}),e.chartValueConfig.series.push({type:"line",name:"Account Value",data:n},{type:"line",name:"Cash Value",data:a}),e.chartRollPriceConfig.series.push({type:"line",name:"Roll Price",data:l}),e.chartTradeCountConfig.series.push({type:"line",name:"UR_PNL",data:r}),e.seedsc||e.chartPNLConfig.series.push({type:"line",name:"Daily P&L",data:o})}),e.chartPieConfig.series=[],i.get("getUserOpenPositions?userID="+t+"&db="+a+"&app="+o+(m?"&refresh=true":"")).success(function(t){var i=[];for(var n in t)i.push({name:t[n].SYMBOL,y:Math.abs(t[n].qty),sign:t[n].qty>=0?"":"-"});e.chartPieConfig.series.push({type:"pie",name:"User Profolio",data:i,pointPlacement:"on"})}),i.get("getDailyLogin?userID="+t+"&db="+a+"&app="+o+(m?"&refresh=true":"")).success(function(t){var i=[];e.chartLoginConfig.series=[];for(var n=0;n<t.length;n++)moment(t[n].date)>=e.dateRange.startDate&&moment(t[n].date)<=e.dateRange.endDate&&i.push([Date.parse(t[n].date),t[n].count]);e.chartLoginConfig.series.push({type:"column",name:"App Open Times",data:i})}),i.get("getDailyTrades?userID="+t+"&db="+a+"&app="+o+(m?"&refresh=true":"")).success(function(t){var i=[],n=[];e.chartTradesConfig.series=[];for(var a=0;a<t.length;a++)moment(t[a].trade_date)>=e.dateRange.startDate&&moment(t[a].trade_date)<=e.dateRange.endDate&&(i.push([Date.parse(t[a].trade_date),parseInt(t[a].tradeCount)-parseInt(t[a].fillCount)]),n.push([Date.parse(t[a].trade_date),parseInt(t[a].fillCount)]));e.chartTradesConfig.series.push({name:"New/Cancel",data:i},{name:"Filled",data:n})}),e.chartRadarConfig.series=[],e.chartRadarProfitConfig.series=[],f(),setTimeout(function(){window.dispatchEvent(new Event("resize"))},100)}Highcharts.setOptions({global:{useUTC:!1}}),e.seedsc="SEEDSC"==n.region&&"SC"==n.app,e.contests=[{CONTEST_NAME:"--- Contest ---"}],i.get("getAllContestByApp?db=TW&app=FX").success(function(t){e.contests=e.contests.concat(t),e.contestSelected=e.contests[0]}),i.get("getAllContestByApp?db=CN&app=FX").success(function(t){e.contests=e.contests.concat(t)}),i.get("getAllContestByApp?db=CN&app=FC").success(function(t){e.contests=e.contests.concat(t)}),i.get("getAllContestByApp?db=CN&app=SC").success(function(t){e.contests=e.contests.concat(t)}),e.dateRange={startDate:moment(t.lastUpdate).subtract(2,"years"),endDate:new Date(t.lastUpdate)},e.products=[{name:"FX",id:"1"},{name:"FC",id:"2"},{name:"SC",id:"3"}],e.userClosedList=[],"All"==t.roleRegion?e.regions=[{name:"Global",id:"Global"},{name:"CN",id:"CN"}]:"CN"==t.roleRegion?e.regions=[{name:"CN",id:"CN"}]:"CN"!=t.roleRegion&&(e.regions=[{name:t.roleRegion,id:t.roleRegion}]),e.productSelected=e.products[0],e.regionSelected=e.regions[0],e.closedList=[],e.scoreProductSelected=e.products[0],e.loadMore=function(){e.userClosedList=e.closedList},e.sideMap={},e.filteredList=[],e.tradeDateCancelClick=function(){e.selectTradeDates=null,e.userClosedList=e.closedList},e.$watch("filteredList",function(){console.info("update close position list"),e.userClosedList=e.filteredList}),e.loadData=function(t){e.refresh=t;var a=n.userID||e.inputUserId,s="";n.userID&&n.userID.indexOf("_1_*1_*1_")>=0&&(s=n.userID.split("_1_*1_*1_")[0],a=n.userID.split("_1_*1_*1_")[1]),e.contestSelected&&e.contestSelected.CONTEST_ID&&(s=e.contestSelected.CONTEST_ID);var r=n.region||e.regionSelected.name,l=n.app||e.productSelected.name;i.get("getUserInfo?userID="+a+"&db="+r).success(function(n){n&&n.length>0?(e.user=n[0],e.joinDate=Date.parse(new Date(n[0].CREATED)),o(a,r,l,s,t)):i.get("getUserInfoByName?userName="+a+"&db="+r).success(function(i){e.user=i[0],o(i[0].USERID,r,l,s,t)})})},e.chartConfig={options:{colors:["#1ab394"],plotOptions:{series:{cursor:"pointer",point:{events:{click:function(){console.info(this.category);var e=moment(this.category).format("YYYY-MM-DD");a(e)}}}}},chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},legend:{enabled:!1}},title:{text:e.seedsc?"All Time P&L Trend":"ROI Trend"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:e.chartSeries},e.chartValueConfig={options:{colors:["#1ab394","#f8ac59"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},legend:{enabled:!0}},title:{text:"Account & Cash Value Trend"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:e.chartSeries},e.chartLoginConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},legend:{enabled:!1}},title:{text:"Login Activities"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}},e.chartTradeCountConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},legend:{enabled:!1}},title:{text:"UR_P&L Trend"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}},e.chartRollPriceConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},legend:{enabled:!1}},title:{text:"Roll Price"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}},e.chartPNLConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},legend:{enabled:!1}},title:{text:e.seedsc?"Daily P&L Efficiency":"Daily PNL Trend"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}},e.chartCommisionConfig={options:{chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},legend:{enabled:!1}},title:{text:"Daily Commision"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}},e.chartTradesConfig={options:{colors:["#1ab394","#127E68"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x",type:"column"},plotOptions:{column:{stacking:"normal",depth:10}},tooltip:{headerFormat:"<b>{point.key}</b><br>",pointFormat:'<span style="color:{series.color}">●</span> {series.name}: {point.y} / {point.stackTotal}'}},title:{text:"Daily Trades"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{title:{text:"Trades"}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},credits:{enabled:!1}},e.chartRankingConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x",type:"line"}},title:{text:"Daily Ranking"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{reversed:!0,title:{text:"Trades"}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},credits:{enabled:!1}},e.chartPieConfig={options:{colors:["#1ab394","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",style:{fontFamily:"'Unica One', sans-serif"},legend:{enabled:!0},plotBorderColor:"#606063",type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},tooltip:{pointFormat:"Qty: <b>{point.sign}{point.y}</b> <br> {point.percentage:.1f} %"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"{point.name}"}}},rangeSelector:{buttonTheme:{fill:"white",stroke:"#C0C0C8","stroke-width":1,states:{select:{fill:"#D0D0D8"}}}},scrollbar:{trackBorderColor:"#C0C0C8"}},title:{text:"Portfolio"}};var r=[],l=[],c=[],d=[],h=[],g=[],p=[];e.chartRadarConfig={options:{colors:["#FDCC99"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.0f}</b><br/><span style="color:{series.color}">Origin: <b>{point.ori:,.4f}</b>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:h,tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>${point.y:,.4f}</b><br/>'},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},e.chartRadarRiskPreferenceConfig={options:{colors:["#A5E6C0"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.4f}</b><br/><span style="color:{series.color}">Origin: <b>{point.ori:,.4f}</b>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:g,tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},e.chartRadarActivityConfig={options:{colors:["#D8A8DE"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.4f}</b><br/><span style="color:{series.color}">Origin: <b>{point.ori:,.4f}</b>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:p,tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},e.chartRadarProfitConfig={options:{colors:["#BDDAF7"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.4f}</b><br/><span style="color:{series.color}">Origin: <b>{point.ori:,.4f}</b>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:r,tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},e.chartSeedSCScoreConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.4f}</b><br/><span style="color:{series.color}">Origin: <b>{point.ori:,.4f}</b><br/><span style="color:{series.color}">Weitht: <b>{point.weight:,.4f}</b>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:c,tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},e.chartSeedStyleScoreConfig={options:{colors:["#D8A8DE"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.4f}</b><br/><span style="color:{series.color}">Origin: <b>{point.ori:,.4f}</b><br/><span style="color:{series.color}">Weitht: <b>{point.weight:,.4f}</b>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:d,tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},e.chartRadarFDTScoreConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.4f}</b><br/>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:l,tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},n.userID&&(e.loadData(),e.hasUserId=!0)
}]),angular.module("inspinia").controller("MT4UserCtrl",["$scope","$rootScope","$http",function(e,t,i){i.get("getMT4Users").success(function(t){e.userList=t})}]),angular.module("inspinia").controller("MT4ProfileCtrl",["$scope","$rootScope","$http","$stateParams",function(e,t,i,n){Highcharts.setOptions({global:{useUTC:!1}}),e.user={},e.userClosedList=[],e.beta=n.beta,e.closedList=[],i.get("getMT4Account?account="+n.accountID).success(function(t){e.acc=t[0];var i=t[0].trades,n=[];for(var a in i)i[a].closeTimeTs=Date.parse(i[a].closeTime)/6e4,i[a].openTimeTs=Date.parse(i[a].openTime)/6e4,"balance"!=i[a].type&&"credit"!=i[a].type&&n.push(i[a]);n.sort(function(e,t){return new Date(t.closeTime)-new Date(e.closeTime)}),e.userClosedList=n,e.chartPieConfig.series=[];var s=t[0].openTrades,o=[];for(var a in s)o.push({name:s[a].item,y:Math.abs(s[a].size),sign:s[a].size>=0?"":"-"});e.chartPieConfig.series.push({type:"pie",name:"User Profolio",data:o,pointPlacement:"on"})}),i.get("getMT4AccountDaily?userId="+n.accountID).success(function(t){var i=[];e.chartConfig.series=[];for(var n=0;n<t.length;n++)i.push([Date.parse(t[n].TRADE_DATE),100*(parseFloat(t[n].UNIT_PRICE)-1)]);t&&t.length>0&&(e.performance={BiggestWin:t[0].BiggestWin,BiggestLoss:t[0].BiggestLoss,WinRatio:t[0].WinRatio,TradesCount:t[0].TradesCount,UNIT_PRICE:t[0].UNIT_PRICE,ALL_TIME_PNL:t[0].ALL_TIME_PNL,CASH_DEPOSITED:t[0].CASH_DEPOSITED}),e.chartConfig.series.push({type:"area",name:"ROI",data:i})}),i.get("getMT4Score?userId="+n.accountID).success(function(t){var i=[],n=[];i.push(t.ft_shp_rt?{y:t.ft_shp_rt.score,ori:t.ft_shp_rt.raw}:0),i.push(t.ft_tmdd?{y:t.ft_tmdd.score,ori:t.ft_tmdd.raw}:0),i.push(t.ft_mdd?{y:t.ft_mdd.score,ori:t.ft_mdd.raw}:0),i.push(t.ft_std_neg_pnlr?{y:t.ft_std_neg_pnlr.score,ori:t.ft_std_neg_pnlr.raw}:0),i.push(t.ft_bgl?{y:t.ft_bgl.score,ori:t.ft_bgl.raw}:0),e.chartRadarFDTScoreConfig.title={text:"FDT Score: "+t.fdt.score.toFixed(2)},e.chartRadarConfig.series=[{type:"area",name:"Risk Control Score",data:i,pointPlacement:"on"}],n.push(t.ft_bgw?{y:t.ft_bgw.score,ori:t.ft_bgw.raw}:0),n.push(t.ft_roll_price?{y:t.ft_roll_price.score,ori:t.ft_roll_price.raw}:0),n.push(t.ft_streak?{y:t.ft_streak.score,ori:t.ft_streak.raw}:0),e.chartRadarProfitConfig.series=[{type:"area",name:"Profitability Score",data:n,pointPlacement:"on"}],e.chartRadarRiskPreferenceConfig.series=[];var i=[];i.push(t.ft_avg_dr?{y:100-t.ft_avg_dr.score,ori:t.ft_avg_dr.raw}:0),i.push(t.ft_df_qty?{y:t.ft_df_qty.score,ori:t.ft_df_qty.raw}:0),i.push(t.ft_avg_max_op?{y:100-t.ft_avg_max_op.score,ori:t.ft_avg_max_op.raw}:0),i.push(t.ft_avg_ngt_op?{y:100-t.ft_avg_ngt_op.score,ori:t.ft_avg_ngt_op.raw}:0),e.chartRadarRiskPreferenceConfig.series=[{type:"area",name:"Risk Preference Score",data:i,pointPlacement:"on"}],e.chartRadarFDTScoreConfig.title={text:"FDT Score: "+t.fdt.score.toFixed(2)},e.chartRadarFDTScoreConfig.series=[];var i=[];i.push(t.riskCtrl.score),i.push(t.profitability.score),i.push(t.consistency.score),i.push(t.activity.score),e.chartRadarFDTScoreConfig.series=[{type:"area",name:"FDT Score",data:i,pointPlacement:"on"}]}),e.chartRadarFDTScoreConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.2f}</b><br/>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:["Risk Control(风险控制能力)","Profitability(盈利能力)","Steadiness(稳定性)","Activeness(活跃度)"],tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},e.chartConfig={options:{colors:["#1ab394"],plotOptions:{series:{cursor:"pointer",point:{events:{click:function(){console.info(this.category);var e=moment(this.category).format("YYYY-MM-DD");_filterTradeDate(e)}}}}},chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},legend:{enabled:!1}},title:{text:"ROI Trend"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:e.chartSeries},e.chartRadarConfig={options:{colors:["#A5E6C0"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.0f}</b><br/><span style="color:{series.color}">Origin: <b>{point.ori:,.2f}</b>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:["Annual Sharpe Ratio (年化夏普比例)","Timed Maximum Drawdown (最大回撤日均值)","Draw-down (收益回撤控制)","Loss variance (损失波动控制)","Order loss (单笔损失控制)"],tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>${point.y:,.0f}</b><br/>'},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},e.chartRadarRiskPreferenceConfig={options:{colors:["#A5E6C0"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.0f}</b><br/><span style="color:{series.color}">Origin: <b>{point.ori:,.2f}</b>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:["Open Position Duration(持仓时间)","Default Qty Ratio(默认交易量比例)","Max Open Position(最大仓位)","Overnight Open Position(隔夜仓位)"],tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},e.chartRadarProfitConfig={options:{colors:["#A5E6C0"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.0f}</b><br/><span style="color:{series.color}">Origin: <b>{point.ori:,.2f}</b>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:["Biggest Win(最大獲利)","Roll Price(交易時段回報率)","Streak(連續盈利天數)"],tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},e.chartPieConfig={options:{colors:["#1ab394","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",style:{fontFamily:"'Unica One', sans-serif"},legend:{enabled:!0},plotBorderColor:"#606063",type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},tooltip:{pointFormat:"Qty: <b>{point.sign}{point.y}</b> <br> {point.percentage:.1f} %"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"{point.name}"}}},rangeSelector:{buttonTheme:{fill:"white",stroke:"#C0C0C8","stroke-width":1,states:{select:{fill:"#D0D0D8"}}}},scrollbar:{trackBorderColor:"#C0C0C8"}},title:{text:"Portfolio"}}}]),angular.module("inspinia").controller("CoreUserCtrl",["$scope","$rootScope","$http",function(e,t,i){function n(){for(var t=0;t<e.userList.length;t++)i.get("getUserInfo?app="+e.appSelected+"&db="+e.regionSelected+"&userID="+e.userList[t].user_id).success(function(t){if(t&&t.length>0){var i=t[0];e.usersMap[i.USERID]=i}})}var a=[{name:"台灣大學",key:501,region:"TW"},{name:"政治大學",key:502,region:"TW"},{name:"清華大學",key:505,region:"TW"},{name:"中山大學",key:508,region:"TW"},{name:"台灣師範大學",key:506,region:"TW"},{name:"中央大學",key:507,region:"TW"},{name:"交通大學",key:503,region:"TW"},{name:"中興大學",key:520,region:"TW"},{name:"輔仁大學",key:511,region:"TW"},{name:"東吳大學",key:518,region:"TW"},{name:"淡江大學",key:509,region:"TW"},{name:"東海大學",key:514,region:"TW"},{name:"逢甲大學",key:529,region:"TW"},{name:"實踐大學",key:566,region:"TW"},{name:"台北商業大學",key:538,region:"TW"},{name:"中正",key:513,region:"TW"},{name:"暨南大學",key:516,region:"TW"},{name:"銘傳大學",key:517,region:"TW"}],s=[{name:"北京大学",key:82,region:"CN"},{name:"清华大学",key:129,region:"CN"},{name:"人民大学",key:73,region:"CN"},{name:"北京师范大学",key:104,region:"CN"},{name:"北京航空航天大学",key:78,region:"CN"},{name:"对外贸易大学",key:77,region:"CN"},{name:"中央财经大学",key:50,region:"CN"},{name:"南开大学",key:"IN0102",region:"CN"},{name:"上海交通大学",key:"IN0061",region:"CN"},{name:"复旦大学",key:202,region:"CN"},{name:"上海财经大学",key:208,region:"CN"},{name:"南京大学",key:201,region:"CN"},{name:"浙江大学",key:231,region:"CN"},{name:"中山大学",key:205,region:"CN"},{name:"西南财经大学",key:228,region:"CN"},{name:"武汉大学",key:601,region:"CN"}];e.appTypes=["FX","FC","SC"],e.regions=["TW","IN","CN","US","AU","HK","GB","KE","ID","SG","PK","NZ","TR","CO","GR","FR","SE","PT","CZ","JP","CA","RU","MO","NO","IE","MY","BR","ZA","VE","AE","IQ","KZ","NP","UA","HR","GH","NG","AT","VN","EG","MC","IT","BE","KR","AZ","DE","AF","LT","KH","PH","SA","ES","ME","IL","KW","NL","PL","RO","AM","BT","KG","YE","JA","TH","AR","BD","MX","NI","SY","SR","ZW","null","SD","BN","IO","LR"],e.appSelected=e.appTypes[0],e.regionSelected=e.regions[0],e.limitList=20,e.usersMap={},e.active=30,e.setActive=function(t){e.active=t},e.isActive=function(t){return t===e.active},e.changeRegion=function(){"TW"==e.regionSelected?e.schools=a:"CN"==e.regionSelected&&(e.schools=s),e.schools.unshift({name:"All",key:"all",region:"All"}),e.schoolSelected=e.schools[0],e.changeSelect()},e.changeSelect=function(t){t&&(e.active=t),e.userList=[],e.totalUser=0,i.get("getCoreUserBySchool?app="+e.appSelected+"&db="+e.regionSelected+"&school_key="+(e.schoolSelected?e.schoolSelected.key:"all")).success(function(t){var i=[];for(var a in t)t[a].life>=e.active&&i.push(t[a]);e.totalUser=i.length,e.userList=i.slice(0,e.limitList),n()})}}]),angular.module("inspinia").controller("CMBCtrl",["$scope","$rootScope","$http",function(e,t,i){function n(){for(var t=0;t<e.userList.length;t++)i.get("getUserInfo?app=FC&db=CN&userID="+e.userList[t].userId).success(function(t){if(t&&t.length>0){var i=t[0];e.usersMap[i.USERID]=i}})}e.changeFt=function(){var t="Top"==e.sortTypeSelected?!0:!1,a="Random"==e.sortTypeSelected?!0:!1;i.get("getFinlinkList?type="+e.featureSelected.key+"&desc="+t+(a?"&random=true":"")+"&limit="+e.limitList+"&logincnt="+e.loginCount+"&tradecnt="+e.tradeCount+"&unitPrice="+e.unitPrice+"&mdd="+e.mdd).success(function(t){e.userList=t,n()})},e.limitList=10,e.loginCount=0,e.tradeCount=0,e.unitPrice=.95,e.mdd=-.15,e.features=[{key:"banker_trader_steady",name:"稳健交易型"},{key:"banker_trader_active",name:"积极交易型"},{key:"banker_trader_balanced",name:"平衡交易型"},{key:"banker_investor_steady",name:"稳健投资型"},{key:"banker_investor_active",name:"积极投资型"},{key:"banker_investor_balanced",name:"平衡投资型"},{key:"banker_risk_control",name:"风险控制型"},{key:"banker_marketing",name:"市场营销型"}],e.sortTypes=["Top","Tail","Random"],e.usersMap={},e.featureSelected=e.features[0],e.sortTypeSelected=e.sortTypes[0]}]),angular.module("inspinia").controller("TabsDemoCtrl",["$scope","$rootScope","$window",function(e){e.tabs=[{title:"Global",content:"Dynamic content 1"},{title:"China",content:"Dynamic content 2",disabled:!0}],e.click=function(){setTimeout(function(){window.dispatchEvent(new Event("resize"))},100)}}]),angular.module("inspinia").controller("SeedUserListCrol",["$scope","$rootScope","$http","$filter",function(e,t,i,n){e.rowCollection=[],e.historyFilePath="getSeedList?format=csv",e.historyFileName=n("date")(new Date,"yyyy-MM-dd")+"_seed.csv",e.loadSeedData=function(){i.get("getSeedList").success(function(t){e.userList=t}),i.get("getSeedSummary").success(function(t){e.summaryList=t;var i=[];for(var n in t)i.push({name:t[n].SYMBOL,y:t[n].QTY,pnl:t[n].PNL});e.chartPieConfig.series=[{type:"pie",name:"",data:i,pointPlacement:"on"}]}),i.get("getSeedCount").success(function(t){e.summaryObj=t})},e.loadSeedData(),e.chartPieConfig={options:{colors:["#1ab394","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",style:{fontFamily:"'Unica One', sans-serif"},legend:{enabled:!0},plotBorderColor:"#606063",type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},tooltip:{pointFormat:"Qty: <b>{point.y}</b> <br> PNL: <b>{point.pnl}</b> <br> {point.percentage:.1f} %"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"{point.name}"}}},rangeSelector:{buttonTheme:{fill:"white",stroke:"#C0C0C8","stroke-width":1,states:{select:{fill:"#D0D0D8"}}}},scrollbar:{trackBorderColor:"#C0C0C8"}},title:{text:"Symbols"}}}]),angular.module("inspinia").controller("UserRankingCrol",["$scope","$rootScope","$http",function(e,t,i){var n=[{name:"FX",id:"1"},{name:"FC",id:"2"},{name:"SC",id:"3"}],a=[];e.$watch(function(){return t.selectedSchool},function(){t.selectedSchool&&(e.products="CN"==t.regionSelected?n:[n[0]],e.selected=e.products[0],e.loadSchoolData(t.selectedSchool))},!0),e.loadSchoolData=function(n){e.loaded=!1,e.userRankList=[],e.rankListLoading=!0,i.get("getUserRanking?school_key="+n+"&app="+e.selected.name+"&db="+t.regionSelected).success(function(t){a=t,e.rankListLoading=!1,e.userRankList=t.slice(0,10)})},e.loadMore=function(){e.userRankList=a},e.changeProduct=function(){e.loadSchoolData(t.selectedSchool)}}]),angular.module("inspinia").controller("SchoolCtrl",["$scope","$rootScope","$http",function(e,t,i){function n(n){i.get("getSchools?db="+n).success(function(i){for(var a in i)if(i[a].school_name&&(i[a].school_region&&e.regions.indexOf(i[a].school_region)<0&&(t.roleRegion==i[a].school_region||"All"==t.roleRegion||"Overseas"==t.roleRegion&&"CN"!=i[a].school_region)&&e.regions.push(i[a].school_region),s.indexOf(i[a].school_key)<0&&"INOTHER"!=i[a].school_key&&"825"!=i[a].school_key&&"672"!=i[a].school_key)){if("CN"==n&&"CN"!=i[a].school_region)continue;(i[a].school_key==t.roleSchool||"All"==t.roleSchool)&&(e.schoolsList.push(i[a]),s.push(i[a].school_key))}console.info(e.regions)})}function a(){e.totalUser=0,e.monthUserFX=0,e.weekUserFX=0,e.monthUserFC=0,e.weekUserFC=0,e.monthUserSC=0,e.weekUserSC=0,e.school.selected=void 0,e.core30=0,e.core60=0,e.core90=0,e.coreFC30=0,e.coreFX30=0,e.coreSC30=0,e.coreFC60=0,e.coreFX60=0,e.coreSC60=0,e.coreFC90=0,e.coreFX90=0,e.coreSC90=0}e.regions=[],e.schoolsList=[];var s=[];e.schools=[],e.school={},e.compareList=[],n(),n("CN"),e.addSchool=function(){e.school.selected="Please select a school to compare ...",e.isCompard=!0},e.loadSchoolData=function(t){i.get("getSchoolUserGrowth?school_key="+t.school_key+"&db="+t.school_region).success(function(i){e.isCompard||(e.chartConfig.series=[]);for(var n=[],a=0;a<i.length;a++)n.push([Date.parse(i[a].date),i[a].total_user_num]);e.chartConfig.series.push({type:"spline",name:t.school_name,data:n})})},e.onSearch=function(){},e.loadCountData=function(t){a(),i.get("getSchoolUserCountByApp?app=FX&school_key="+t.school_key+"&db="+t.school_region).success(function(t){var i=t;e.totalUser=i.totalUser,e.monthUserFX=i.monthlyActiveUser,e.weekUserFX=i.weeklyActiveUser}),"CN"==t.school_region?(e.isChina=!0,i.get("getSchoolUserCountByApp?app=SC&school_key="+t.school_key+"&db="+t.school_region).success(function(t){var i=t;e.monthUserSC=i.monthlyActiveUser,e.weekUserSC=i.weeklyActiveUser}),i.get("getSchoolUserCountByApp?app=FC&school_key="+t.school_key+"&db="+t.school_region).success(function(t){var i=t;e.totalUser=i.totalUser,e.monthUserFC=i.monthlyActiveUser,e.weekUserFC=i.weeklyActiveUser}),i.get("getCoreUserBySchool?app=FC&school_key="+t.school_key+"&db="+t.school_region).success(function(t){var i=0,n=0,a=0;for(var s in t)t[s].life>30&&i++,t[s].life>60&&n++,t[s].life>90&&a++;e.coreFC30=i,e.coreFC60=n,e.coreFC90=a}),i.get("getCoreUserBySchool?app=FX&school_key="+t.school_key+"&db="+t.school_region).success(function(t){var i=0,n=0,a=0;for(var s in t)t[s].life>30&&i++,t[s].life>60&&n++,t[s].life>90&&a++;e.coreFX30=i,e.coreFX60=n,e.coreFX90=a}),i.get("getCoreUserBySchool?app=SC&school_key="+t.school_key+"&db="+t.school_region).success(function(t){var i=0,n=0,a=0;for(var s in t)t[s].life>30&&i++,t[s].life>60&&n++,t[s].life>90&&a++;e.coreSC30=i,e.coreSC60=n,e.coreSC90=a})):(e.isChina=!1,i.get("getCoreUserBySchool?app=FX&school_key="+t.school_key+"&db="+t.school_region).success(function(t){var i=0,n=0,a=0;for(var s in t)t[s].life>30&&i++,t[s].life>60&&n++,t[s].life>90&&a++;e.core30=i,e.core60=n,e.core90=a}))},e.onSchoolSelect=function(i){e.count_show=!0,e.loadSchoolData(i),e.loadCountData(i),t.selectedSchool=i.school_key},e.onRegionSelect=function(i){if(a(),e.schools=[],t.regionSelected=i,e.school_show=!0,e.schoolsList.length>0){"All"==t.roleSchool&&e.schools.push({school_key:"all",school_name:"All schools"});for(var n in e.schoolsList)e.schoolsList[n].school_region&&e.schoolsList[n].school_region==i&&(e.schools.push(e.schoolsList[n]),e.schools[0].school_region=e.schoolsList[n].school_region)}},e.chartConfig={chart:{backgroundColor:null,zoomType:"x"},title:{text:"User Growth"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{title:{text:"Users"},min:0},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:e.chartSeries}}]),angular.module("inspinia").controller("QuantCrol",["$scope","$rootScope","$http",function(e,t,i){e.chartConfig={options:{chart:{backgroundColor:null,zoomType:"x"},title:{text:"User Growth"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{title:{text:"Users"},min:0},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"}},legend:{enabled:!0},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}},e.chartConfig.series=[],console.info("quant..."),i.get("getSymbol?symbol=EURJPY").success(function(t){for(var i=[],n=[],a=[],s=19;s<t.length;s++)i.push([Date.parse(t[s].KEYTIME),t[s].CLOSE_PRICE-130]),n.push([Date.parse(t[s].KEYTIME),t[s].max20-130]),a.push([Date.parse(t[s].KEYTIME),t[s].min10-130]);e.chartConfig.series.push({type:"spline",name:"Close Price",data:i},{type:"spline",name:"Max 20",data:n},{type:"spline",name:"Min10",data:a})})}]),angular.module("inspinia").controller("ContestCrol",["$scope","$rootScope","$http",function(e,t,i){var n=[{name:"FX",id:"1"},{name:"FC",id:"2"},{name:"SC",id:"3"}];e.$watch(function(){return t.selectedSchool},function(){t.selectedSchool&&(e.products="CN"==t.regionSelected?n:[n[0]],e.selected=e.products[0],e.loadContentData(t.selectedSchool))},!0),e.loadContentData=function(n){e.contestList=[],i.get("getContestByApp?school_key="+n+"&app="+e.selected.name+"&db="+t.regionSelected).success(function(t){e.contestList=t})},e.changeProduct=function(){e.loadContentData(t.selectedSchool)}}]);var app=angular.module("inspinia");app.controller("MapCtrl",["$scope","$location","$http",function(e,t,i){e.data=function(){i.get("getRegionDist?file=Global_Country_TU").success(function(t){t=t.data.Global_Country_TU;var i={};e.markers=[];for(var n=0;n<t.length;n++)t[n].Country&&(i[t[n].Country]=parseInt(t[n]["Total Users"])),"HK"==t[n].Country&&e.markers.push({latLng:[22.15,114.1],name:"Hong Kong",values:parseInt(t[n]["Total Users"])});e.datamap=i})}}]),app.directive("map",function(){return{restrict:"EAC",link:function(e,t){var i=null;e.$watch("datamap",function(){console.log(i),e.datamap&&($(t).width("auto"),$(t).height(400),i=$(t).vectorMap({onRegionClick:function(e,t){console.info(t)},map:"world_mill_en",backgroundColor:"transparent",regionStyle:{initial:{fill:"#e4e4e4","fill-opacity":1,stroke:"none","stroke-width":0,"stroke-opacity":0}},series:{regions:[{values:e.datamap,scale:["#1ab394","#ED5565"],normalizeFunction:"polynomial"}]},onMarkerTipShow:function(t,i,n){i.html(i.html()+": "+(e.markers[n]?e.markers[n].values:""))},onRegionTipShow:function(t,i,n){i.html(i.html()+": "+(e.datamap[n]?e.datamap[n]:""))},markers:e.markers,markerStyle:{initial:{fill:"#F8E23B",stroke:"#383f47"}}}))})}}}),angular.module("inspinia").controller("IncUserListCrol",["$scope","$rootScope","$http","$filter",function(e,t,i,n){e.rowCollection=[],e.historyFilePath="getIncuList?format=csv",e.historyFileName=n("date")(new Date,"yyyy-MM-dd")+"_incubatee.csv",e.loadIncuData=function(){i.get("getIncuList").success(function(t){e.userList=t}),i.get("getIncuSummary").success(function(t){e.summaryList=t;var i=[];for(var n in t)i.push({name:t[n].SYMBOL,y:t[n].QTY,pnl:t[n].PNL});e.chartPieConfig.series=[{type:"pie",name:"",data:i,pointPlacement:"on"}]}),i.get("getIncuCount").success(function(t){e.summaryObj=t})},e.loadIncuData(),e.chartPieConfig={options:{colors:["#1ab394","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",style:{fontFamily:"'Unica One', sans-serif"},legend:{enabled:!0},plotBorderColor:"#606063",type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},tooltip:{pointFormat:"Qty: <b>{point.y}</b> <br> PNL: <b>{point.pnl}</b> <br> {point.percentage:.1f} %"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"{point.name}"}}},rangeSelector:{buttonTheme:{fill:"white",stroke:"#C0C0C8","stroke-width":1,states:{select:{fill:"#D0D0D8"}}}},scrollbar:{trackBorderColor:"#C0C0C8"}},title:{text:"Symbols"}}}]),angular.module("inspinia").controller("VennCtrl",["$scope","$http","$rootScope",function(e,t,i){e.loadData=function(n){t.get("getDataFromFile?file="+n).success(function(t){t=t.data;var n=[{sets:["Mainland_FX"],size:t.China_FX_FC_SC_TU[0].China_FX},{sets:["Mainland_FC"],size:t.China_FX_FC_SC_TU[0].China_FC},{sets:["Mainland_SC"],size:t.China_FX_FC_SC_TU[0].China_SC},{sets:["Mainland_FX","Mainland_FC"],size:t.China_FX_FC_SC_TU[0].China_FX_FC},{sets:["Mainland_FX","Mainland_SC"],size:t.China_FX_FC_SC_TU[0].China_FX_SC},{sets:["Mainland_FC","Mainland_SC"],size:t.China_FX_FC_SC_TU[0].China_FC_SC},{sets:["Mainland_FX","Mainland_FC","Mainland_SC"],size:t.China_FX_FC_SC_TU[0].China_FX_FC_SC}];i.overlapUsers=t.China_FX_FC_SC_TU[0].China_FX_FC_SC,e.vennData=n,setTimeout(function(){var e=d3.select("#venn"),t=d3.select("body").append("div").attr("class","venntooltip");e.selectAll("g").on("mouseover",function(i){venn.sortAreas(e,i),t.transition().duration(400).style("opacity",.9),t.text(i.size+" users");var n=d3.select(this).transition("tooltip").duration(400);n.select("path").style("stroke-width",3).style("fill-opacity",1==i.sets.length?.4:.1).style("stroke-opacity",1)}).on("mousemove",function(){t.style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(e){t.transition().duration(400).style("opacity",0);var i=d3.select(this).transition("tooltip").duration(400);i.select("path").style("stroke-width",0).style("fill-opacity",1==e.sets.length?.25:0).style("stroke-opacity",0)})},300)})}}]),angular.module("inspinia").controller("ChartPieCtrl",["$scope","$http","$rootScope",function(e,t){e.loadData=function(){t.get("getChannelDist?db=CN").success(function(t){var i=[];for(var n in t)i.push({name:t[n].channel,y:Math.abs(t[n].count)});e.chartPieConfig.series=[],e.chartPieConfig.series.push({type:"pie",name:"China Download Channel Distubution",data:i,pointPlacement:"on"})})},e.chartPieConfig={options:{colors:["#1ab394","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",style:{fontFamily:"'Unica One', sans-serif"},legend:{enabled:!0},plotBorderColor:"#606063",type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},tooltip:{pointFormat:"Registration:  {point.percentage:.1f} %"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"{point.name}"}}},rangeSelector:{buttonTheme:{fill:"white",stroke:"#C0C0C8","stroke-width":1,states:{select:{fill:"#D0D0D8"}}}},scrollbar:{trackBorderColor:"#C0C0C8"}}}}]),angular.module("inspinia").controller("ChartCtrl",["$scope","$http","$rootScope",function(e,t,i){e.$on("changeSelector",function(e,t){console.info(t)}),i.TotalGlobalTrendObj={},i.TotalChinaTrendObj={},e.loadData=function(n){t.get("getDataFromFile?file="+n).success(function(t){t=t.data;var a=n.split("|");e.chartConfig.series=[];for(var s=0;s<a.length;s++){for(var o=[],r=0;r<t[a[s]].length;r++)o.push([Date.parse(t[a[s]][r].date),parseInt(t[a[s]][r][e.valueName])]);"All"==i.roleRegion?e.chartConfig.series.push({type:"area",name:e[a[s]],data:o}):"CN"==i.roleRegion&&(a[s].indexOf("China")>=0||a[s].indexOf("Overlap")>=0)?e.chartConfig.series.push({type:"area",name:e[a[s]],data:o}):"CN"!=i.roleRegion&&a[s].indexOf("Global")>=0&&e.chartConfig.series.push({type:"area",name:e[a[s]],data:o})}if("Date_TU_Global|Date_TU_China"==n){var l=t.Date_TU_Global,c=t.Date_TU_China;i.totalUsersChina=parseInt(c[c.length-1][e.valueName]),i.totalUsersGlobal=parseInt(l[l.length-1][e.valueName])}})},e.chartConfig={options:{},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{title:{text:"Users"},min:0},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:e.chartSeries}}]),angular.module("inspinia").controller("ChartComLineCtrl",["$scope","$http",function(e,t){e.loadData=function(i){t.get("getDataFromFile?file="+i).success(function(t){t=t.data;var i=[],n=[],a={};a={Others:0};for(var s={},o=0;o<t.Global_Country_TU.length&&5>o;o++)i.push(t.Global_Country_TU[o]),n.push(t.Global_Country_TU[o].Country),a[t.Global_Country_TU[o].Country]=0;for(var o=0;o<t.Date_Global_Country_TU.length;o++)if(n.indexOf(t.Date_Global_Country_TU[o].country)>=0){"TW"==t.Date_Global_Country_TU[o].country&&console.info(t.Date_Global_Country_TU[o]);var r=a[t.Date_Global_Country_TU[o].country]+parseInt(t.Date_Global_Country_TU[o]["Total Users"]);a[t.Date_Global_Country_TU[o].country]=r;var l=[Date.parse(t.Date_Global_Country_TU[o].date),r];s[t.Date_Global_Country_TU[o].country]&&s[t.Date_Global_Country_TU[o].country].length>0?s[t.Date_Global_Country_TU[o].country].push(l):(s[t.Date_Global_Country_TU[o].country]=[],s[t.Date_Global_Country_TU[o].country].push(l))}else{var r=a.Others+parseInt(t.Date_Global_Country_TU[o]["Total Users"]);a.Others=r;var l=[Date.parse(t.Date_Global_Country_TU[o].date),r];s.Others&&s.Others.length>0?s.Others.push(l):(s.Others=[],s.Others.push(l))}var c=[];n.push("Others");for(var d in n)c.push({name:n[d],data:s[n[d]]});e.chartConfig.series=c})},e.chartConfig={chart:{backgroundColor:null,zoomType:"x"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{title:{text:"Users"},min:0},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:e.chartSeries}}]),angular.module("inspinia").controller("ChartAreaCtrl",["$scope","$http","$rootScope",function(e,t,i){i.activeGlobalTrendObj={},i.activeChinaTrendObj={},e.loadData=function(i){t.get("getDataFromFile?file="+i).success(function(t){t=t.data;var n=i.split("|");e.chartConfig.series=[];for(var a=0;a<n.length;a++){for(var s=[],o=0;o<t[n[a]].length;o++)s.push([Date.parse(t[n[a]][o].date),parseInt(t[n[a]][o][e.valueName])]);e.chartConfig.series.push({type:"area",name:e[n[a]],data:s})}})},e.chartConfig={chart:{backgroundColor:null,zoomType:"x"},options:{plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}}},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{title:{text:"Users"},min:0},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:e.chartSeries}}]),angular.module("inspinia").controller("ChartActiveCtrl",["$scope","$http","$rootScope",function(e,t,i){e.loadData=function(){t.get("getActiveUserPer").success(function(t){for(var n=[],a=[],s=0;s<t.global.length;s++)n.push([Date.parse(t.global[s].date),t.global[s].Percentage]);for(var s=0;s<t.china.length;s++)a.push([Date.parse(t.china[s].date),t.china[s].Percentage]);"All"==i.roleRegion?e.chartConfig.series=[{type:"area",name:"Mainland %",data:a},{type:"area",name:"Overseas %",data:n}]:"CN"==i.roleRegion?e.chartConfig.series=[{type:"area",name:"Mainland %",data:a}]:"CN"!=i.roleRegion&&(e.chartConfig.series=[{type:"area",name:"Overseas %",data:n}])})},e.chartConfig={options:{colors:["#1ab394","#127E68"],chart:{backgroundColor:null,zoomType:"x"},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} %"}},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"},floor:Date.UTC(2015,4,17)},yAxis:{title:{text:"Active Users%"},min:0},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},credits:{enabled:!1},series:e.chartSeries}}]),angular.module("inspinia").controller("BoxCtrl",["$scope","$http","$rootScope","$filter","$cookieStore",function(e,t,i,n,a){i.lastUpdate=moment().subtract(1,"days").format("YYYY-MM-DD");var s=moment().subtract(2,"days").format("YYYY-MM-DD");e.loadContestCount=function(){t.get("getContestCount").success(function(t){e.contentCount=t[0].count}),t.get("getStatFromFile?date="+i.lastUpdate+"&oldDate="+s).success(function(t){e.stats=t}),t.get("getCoreUserTotal?app=FX&db=TW").success(function(t){e.cuGlobal=t.length}),t.get("getCoreUserTotal?app=FX&db=CN").success(function(t){e.cuChinaFX=t.length}),t.get("getCoreUserTotal?app=FC&db=CN").success(function(t){e.cuChinaFC=t.length}),t.get("getCoreUserTotal?app=SC&db=CN").success(function(t){e.cuChinaSC=t.length})},i.logout=function(){a.remove("connect.sid"),location.href="logout"}}]),$(document).ready(function(){function e(){var e=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",e+"px");var t=$("nav.navbar-default").height(),i=$("#page-wrapper").height();t>i&&$("#page-wrapper").css("min-height",t+"px"),i>t&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&$("#page-wrapper").css("min-height",$(window).height()-60+"px")}$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||e()}),setTimeout(function(){e()})}),$(function(){$(window).bind("load resize",function(){$(this).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")})}),angular.module("inspinia").directive("sideNavigation",["$timeout",function(e){return{restrict:"A",link:function(t,i){t.$watch("authentication.user",function(){e(function(){i.metisMenu()})})}}}]).directive("minimalizaSidebar",["$timeout",function(e){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-init="minimalize()" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',controller:["$scope","$element",function(t){t.minimalize=function(){$(window).width()>=600?angular.element("body").toggleClass("mini-navbar"):angular.element("body").hasClass("body-small")&&angular.element("body").toggleClass("mini-navbar"),!angular.element("body").hasClass("mini-navbar")||angular.element("body").hasClass("body-small")?(angular.element("#side-menu").hide(),e(function(){angular.element("#side-menu").fadeIn(500)
},100)):angular.element("#side-menu").removeAttr("style")}}]}}]),angular.module("inspinia").run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="wrapper wrapper-content animated fadeInRight" ng-hide="$root.dashboardShow"><h3>Redirecting ...</h3></div><div class="wrapper wrapper-content animated fadeInRight" ng-if="$root.dashboardShow"><div ng-include="\'components/box/sumbox.html\'" ng-if="$root.roleRegion ==\'All\'"></div><div class="row chartPanel"><div ng-include="\'components/chart/chart_tu.html\'"></div></div><div class="row chartPanel" ng-if="$root.roleRegion ==\'All\'"><div ng-include="\'components/map/map.html\'"></div><div ng-include="\'components/chart/chart_global_dist.html\'"></div></div><div class="row chartPanel" ng-if="$root.roleRegion ==\'CN\' || $root.roleRegion ==\'All\'"><div ng-include="\'components/chart/chart_fx_fc_sc.html\'"></div><div ng-include="\'components/chart/china_channel_dist.html\'"></div></div><div class="row chartPanel" ng-if="$root.roleRegion ==\'CN\' || $root.roleRegion ==\'All\'"><div ng-include="\'components/chart/overlap.html\'"></div><div ng-include="\'components/chart/venn.html\'"></div></div><div ng-controller="TabsDemoCtrl" class="tab-bar"><tabset><tab heading="Mainland" ng-click="click()" ng-if="$root.roleRegion ==\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_cn_nu.html\'"></div></div></tab><tab heading="Taiwan" ng-click="click()" ng-if="$root.roleRegion !=\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_tw_nu.html\'"></div></div></tab><tab heading="Others Region" ng-click="click()" ng-if="$root.roleRegion !=\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_gb_nu.html\'"></div></div></tab></tabset></div><div ng-controller="TabsDemoCtrl" class="tab-bar"><tabset><tab heading="Mainland FX" ng-click="click()" ng-if="$root.roleRegion ==\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_cn_au_fx.html\'"></div></div></tab><tab heading="Mainland FC" ng-click="click()" ng-if="$root.roleRegion ==\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_cn_au_fc.html\'"></div></div></tab><tab heading="Mainland SC" ng-click="click()" ng-if="$root.roleRegion ==\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_cn_au_sc.html\'"></div></div></tab><tab heading="Taiwan" ng-click="click()" ng-if="$root.roleRegion !=\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_tw_au.html\'"></div></div></tab><tab heading="Others Region" ng-click="click()" ng-if="$root.roleRegion !=\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_gb_au.html\'"></div></div></tab></tabset></div></div>'),e.put("app/public/show.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class="row chartPanel" ng-if="$root.roleRegion ==\'All\'"><div ng-include="\'components/map/map.html\'"></div></div></div>'),e.put("components/box/sumbox.html",'<div class="row" ng-controller="BoxCtrl"><div class="col-lg-2"><div class="ibox float-e-margins"><div class="ibox-title"><span class="label label-success pull-right">All Apps</span><h5>Total Users</h5></div><div class="ibox-content"><h1 class="no-margins" ng-bind="(stats.totalUser|number)">0</h1><small>Users</small></div></div></div><div class="col-lg-2"><a href="#/index/core"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Mainland</h5></div><div class="ibox-content"><h1 class="no-margins" ng-bind="((cuChinaFX + cuChinaFC + cuChinaSC)|number)"><i class="fa fa-spinner fa-spin"></i></h1><small>Core Users</small> <span class="stat-percent font-bold text-success ng-binding" ng-bind="((cuChinaFX + $cuChinaFC + cuChinaSC)/ ($root.totalUsersChina) * 100|number:2) + \'%\'"></span></div></div></a></div><div class="col-lg-2"><a href="#/index/core"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Overseas</h5></div><div class="ibox-content"><h1 class="no-margins" ng-bind="(cuGlobal|number)"><i class="fa fa-spinner fa-spin"></i></h1><small>Core Users</small> <span class="stat-percent font-bold text-success ng-binding" ng-bind="(cuGlobal/ ($root.totalUsersGlobal) * 100|number:2) + \'%\'"></span></div></div></a></div><div class="col-lg-2"><div class="ibox float-e-margins"><div class="ibox-title"><span class="label label-info pull-right">Daily</span><h5>Active User</h5></div><div class="ibox-content"><h1 class="no-margins" ng-bind="(stats.activeUser |number) || \'Calculating...\'">0</h1><span class="stat-percent font-bold text-success" ng-bind="(stats.activePer|number:2) + \'%\'"></span> <span class="font-bold" ng-class="stats.activeTrend > 0?\'text-danger\':\'text-navy\'">{{stats.activeTrend|number:2}}% <i class="fa" ng-class="stats.activeTrend > 0?\'fa-level-up\':\'fa-level-down\'"></i></span></div></div></div><div class="col-lg-2"><div class="ibox float-e-margins"><div class="ibox-title"><span class="label label-primary pull-right">Daily</span><h5>New Users</h5></div><div class="ibox-content"><h1 class="no-margins" ng-bind="(stats.newUser|number) || \'Calculating...\'">0</h1><span class="stat-percent font-bold text-navy" ng-bind="(stats.newPer |number:2) + \'%\'"><i class="fa fa-bolt"></i></span> <span class="font-bold" ng-class="stats.newTrend >0?\'text-danger\':\'text-navy\'">{{stats.newTrend |number:2}}% <i class="fa" ng-class="stats.newTrend >0?\'fa-level-up\':\'fa-level-down\'"></i></span></div></div></div><div class="col-lg-2"><div class="ibox float-e-margins"><div class="ibox-title"><span class="label label-danger pull-right">Overseas</span><h5>Contest</h5></div><div class="ibox-content"><h1 class="no-margins" ng-init="loadContestCount()" ng-bind="(contentCount |number)">0</h1><small>Contests Held</small></div></div></div></div>'),e.put("components/chart/chart_cn_au_fc.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_AU_China_FC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Date_AU_China_FC=\'Mainland Daily Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_AU_China_FC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Week_AU_China_FC=\'Mainland Weekly Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_AU_China_FC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Month_AU_China_FC=\'Mainland Monthly Active Users\'"></div>'),e.put("components/chart/chart_cn_au_fx.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_AU_China_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Date_AU_China_FX=\'Mainland Daily Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_AU_China_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Week_AU_China_FX=\'Mainland Weekly Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_AU_China_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Month_AU_China_FX=\'Mainland Monthly Active Users\'"></div>'),e.put("components/chart/chart_cn_au_sc.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_AU_China_SC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Date_AU_China_SC=\'Mainland Daily Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_AU_China_SC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Week_AU_China_SC=\'Mainland Weekly Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_AU_China_SC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Month_AU_China_SC=\'Mainland Monthly Active Users\'"></div>'),e.put("components/chart/chart_cn_nu.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_NU_China\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily New Users\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Date_NU_China=\'Mainland Daily New Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_NU_China\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly New Users\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Week_NU_China=\'Mainland Weekly New Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_NU_China\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly New Users\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Month_NU_China=\'Mainland Monthly New Users\'"></div>'),e.put("components/chart/chart_fx_fc_sc.html",'<div class="col-md-6" ng-controller="ChartCtrl"><highchart ng-init="loadData(\'Date_TU_China_FX|Date_TU_China_FC|Date_TU_China_SC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Mainland FX FC SC\'"> <input type="hidden" ng-init="valueName=\'Total Users\'"> <input type="hidden" ng-init="Date_TU_China_FX=\'Mainland FX\'"> <input type="hidden" ng-init="Date_TU_China_FC=\'Mainland FC\'"> <input type="hidden" ng-init="Date_TU_China_SC=\'Mainland SC\'"></div>'),e.put("components/chart/chart_gb_au.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_AU_Global_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overseas\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Date_AU_Global_FX=\'Overseas Daily Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_AU_Global_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overseas\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Week_AU_Global_FX=\'Overseas Weekly Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_AU_Global_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overseas\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Month_AU_Global_FX=\'Overseas Monthly Active Users\'"></div>'),e.put("components/chart/chart_gb_nu.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_NU_Global\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily New Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overseas\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Date_NU_Global=\'Overseas Daily New Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_NU_Global\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly New Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overseas\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Week_NU_Global=\'Overseas Weekly New Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_NU_Global\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly New Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overseas\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Month_NU_Global=\'Overseas Monthly New Users\'"></div>'),e.put("components/chart/chart_global_dist.html",'<div ng-controller="ChartComLineCtrl"><div class="col-md-6"><highchart ng-init="loadData(\'Date_Global_Country_TU|Global_Country_TU\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Global Distribution\'"></div></div>'),e.put("components/chart/chart_tu.html",'<div class="row"><div class="col-lg-6" ng-controller="ChartCtrl"><highchart ng-init="loadData(\'Date_TU_Global|Date_TU_China\')" config="chartConfig" class="span9"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Total User Growth\'"> <input type="hidden" ng-init="valueName=\'Total Users\'"> <input type="hidden" ng-init="Date_TU_Global=\'Overseas\'"> <input type="hidden" ng-init="Date_TU_China=\'Mainland\'"> <input type="hidden" ng-init="chartType=\'area\'"> <input type="hidden" ng-init="chartConfig.colors=[\'#0000ff\',\'ff0066\',\'2b908f\']"></div><div class="col-lg-6" ng-controller="ChartActiveCtrl"><highchart ng-init="loadData()" config="chartConfig" class="span9"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Active User Percentage\'"></div></div>'),e.put("components/chart/chart_tw_au.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_AU_TW_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Taiwan\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Date_AU_TW_FX=\'Taiwan Daily Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_AU_TW_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Taiwan\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Week_AU_TW_FX=\'Taiwan Weekly Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_AU_TW_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Taiwan\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Month_AU_TW_FX=\'Taiwan Monthly Active Users\'"></div>'),e.put("components/chart/chart_tw_nu.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_NU_TW\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily New Users\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Date_NU_TW=\'TW Daily New Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_NU_TW\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly New Users\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Week_NU_TW=\'TW Weekly New Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_NU_TW\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly New Users\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Month_NU_TW=\'TW Monthly New Users\'"></div>'),e.put("components/chart/china_channel_dist.html",'<div class="col-md-6" ng-controller="ChartPieCtrl"><highchart ng-init="loadData()" config="chartPieConfig"></highchart><input type="hidden" ng-init="chartPieConfig.title.text=\'China Download Channel Distubution\'"></div>'),e.put("components/chart/overlap.html",'<div class="col-md-6" ng-controller="ChartCtrl"><highchart ng-init="loadData(\'FX_FC_Overlap|FX_SC_Overlap|FC_SC_Overlap|FX_FC_SC_Overlap\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'FX FC SC Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overlaping Users\'"> <input type="hidden" ng-init="valueName=\'Common Users\'"> <input type="hidden" ng-init="FX_FC_Overlap=\'FX&FC\'"> <input type="hidden" ng-init="FX_SC_Overlap=\'FX&SC\'"> <input type="hidden" ng-init="FC_SC_Overlap=\'FC&SC\'"> <input type="hidden" ng-init="FX_FC_SC_Overlap=\'FX&FC&SC\'"></div>'),e.put("components/chart/venn.html",'<div class="col-md-6 venn-panel" ng-controller="VennCtrl"><div id="venn" venn="vennData" ng-init="loadData(\'China_FX_FC_SC_TU\')"></div></div>'),e.put("components/common/content.html",'<div id="wrapper"><div ng-include="\'components/common/navigation.html\'"></div><div id="page-wrapper" class="gray-bg {{$state.current.name}}"><div ng-include="\'components/common/topnavbar.html\'"></div><div ui-view=""></div><div ng-include="\'components/common/footer.html\'"></div></div></div>'),e.put("components/common/footer.html",'<div class="footer"><div class="pull-right">FDT Dashboard v1.0</div><div><strong>Copyright</strong> FDT &copy; 2016</div></div>'),e.put("components/common/ibox_tools.html",'<div class="ibox-tools dropdown" dropdown=""><a ng-click="showhide()"><i class="fa fa-chevron-up"></i></a> <a class="dropdown-toggle" href="" dropdown-toggle=""><i class="fa fa-wrench"></i></a><ul class="dropdown-menu dropdown-user"><li><a href="">Config option 1</a></li><li><a href="">Config option 2</a></li></ul><a ng-click="closebox()"><i class="fa fa-times"></i></a></div>'),e.put("components/common/navigation.html",'<nav class="navbar-default navbar-static-side" role="navigation"><div class="sidebar-collapse"><ul side-navigation="" class="nav metismenu" id="side-menu"><li class="nav-header"><div class="dropdown profile-element open"><span><img alt="image" style="width:80px" src="assets/images/fdt_bull.png"></span> <a data-toggle="dropdown" class="dropdown-toggle" href="#" aria-expanded="false"><span class="clear"><span class="block m-t-xs"><strong class="font-bold">{{$root.userNick}}</strong></span> <span class="text-muted text-xs block"><b class="caret"></b></span></span></a></div><div class="logo-element"><img alt="image" class="" src="assets/images/fdt_bull.png" style="width: 40px;"></div></li><li ui-sref-active="active" ng-if="$root.dashboardShow"><a ui-sref="index.main"><i class="fa fa-dashboard"></i> <span class="nav-label">Dashboard</span></a></li><li ui-sref-active="active" ng-if="$root.schoolShow"><a ui-sref="index.school"><i class="fa fa-graduation-cap"></i> <span class="nav-label">School</span></a></li><li ui-sref-active="active" ng-if="$root.simShow || $root.incuShow || $root.seedShow"><a ui-sref="index.search"><i class="fa fa-user"></i> <span class="nav-label">Users</span></a><ul class="nav nav-second-level collapse"><li><a ui-sref="index.search" ng-if="$root.simShow">Sim Users</a></li><li><a ui-sref="index.incu" ng-if="$root.incuShow">Incubatee</a></li><li><a ui-sref="index.seed" ng-if="$root.seedShow">Seed</a></li></ul></li><li ui-sref-active="active"><a ui-sref="index.user"><i class="fa fa-cube"></i> <span class="nav-label">FDT Score Ranking</span></a><ul class="nav nav-second-level collapse"><li><a ui-sref="index.user">FDT Score Ranking</a></li><li><a ui-sref="index.mt4users" ng-if="$root.seedShow">MT4 List</a></li></ul></li></ul></div></nav>'),e.put("components/common/topnavbar.html",'<div class="row border-bottom" ng-controller="BoxCtrl"><nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0"><div class="navbar-header"><span minimaliza-sidebar=""></span><form role="search" class="navbar-form-custom" method="post" action=""><div class="form-group"><input type="text" placeholder="" class="form-control" name="top-search" id="top-search"></div></form></div><ul class="nav navbar-top-links navbar-right"><li><span class="m-r-sm text-muted welcome-message" ng-bind="\'Last Updated Time : \' + $root.lastUpdate"></span></li><li><i class="fa fa-user"></i> <span class="m-r-sm text-muted welcome-message" ng-bind="$root.userNick"></span></li><li><a href="#" ng-click="logout()"><i class="fa fa-sign-out"></i> Log out</a></li></ul></nav></div>'),e.put("components/incu/user_list.html",'<div class="wrapper wrapper-content animated fadeInRight" ng-hide="$root.incuShow"><h3>No access for this account</h3></div><div class="wrapper wrapper-content animated fadeInRight" ng-controller="IncUserListCrol" ng-if="$root.incuShow"><div class="row"><div class="col-lg-6"><div class="col-xs-8 text-left"><span>Daily Total P&L (including fee&commisions)</span><h1 class="font-bold">${{summaryObj.pnl | number:2}}</h1></div><div class="col-xs-4 text-left"><span>Daily Total QTY</span><h1 class="font-bold">{{summaryObj.qty | number}}</h1></div><div class="col-lg-12"><highchart config="chartPieConfig"></highchart></div></div><div class="col-lg-6"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Daily Summary</h5><div class="ibox-tools"></div></div><div class="ibox-content"><div class="table-responsive"><table st-safe-src="summaryList" st-table="displayedSummary" class="table table-striped"><thead><tr><th>Trade Date</th><th>Symbol</th><th st-sort="ACCOUNT_VALUE" st-sort-default="reverse">QTY</th><th st-sort="PNL">P&L</th></tr></thead><tbody><tr ng-repeat="sum in displayedSummary"><td>{{sum["@TRADE_DATE"]}}</td><td>{{sum.SYMBOL}}</td><td>{{sum.QTY|number}}</td><td>{{sum.PNL|number:2}}</td></tr></tbody></table></div></div></div></div><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Incubatee Daily Performance</h5><div class="ibox-tools" ng-if="$root.exportShow"><a type="button" class="btn btn-sm btn-primary" href="{{historyFilePath}}" download="{{historyFileName}}">Export</a></div></div><div class="ibox-content"><div class="table-responsive"><table st-safe-src="userList" st-table="displayed" class="table table-striped"><thead><tr><th colspan="5"><div class="input-group"><input st-search="USER_ID" class="form-control" placeholder="Search User ID ..." type="text"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-primary">Go!</button></span></div></th></tr><tr><th>Trade Date</th><th>User Id</th><th st-sort="ACCOUNT_VALUE" st-sort-default="reverse">Account Value</th><th st-sort="PNL">P&L</th><th st-sort="UR_PNL">UR_P&L</th><th st-sort="ALL_TIME_PNL">All Time P&L</th><th st-sort="SUMQTY">Total Qty</th><th st-sort="CNTQTY"># Filled</th><th st-sort="CASH">Cash</th><th st-sort="Ranking">Ranking</th><th st-sort="WinRatio">Win Ratio</th><th st-sort="BiggestWin">Biggest Win</th><th st-sort="BiggestLoss">Biggest Loss</th><th st-sort="AllTimeSharpRatio">All Time Sharp Ratio</th></tr></thead><tbody><tr ng-repeat="userInfo in displayed"><td>{{userInfo["@TRADE_DATE"]}}</td><td><a href="#/index/profile/{{userInfo.USER_ID}}/INC/FX">{{userInfo.USER_ID}}</a></td><td>{{userInfo.ACCOUNT_VALUE|number:2}}</td><td>{{userInfo.PNL|number:2}}</td><td>{{userInfo.UR_PNL|number:2}}</td><td>{{userInfo.ALL_TIME_PNL|number:2}}</td><td>{{userInfo.SUMQTY}}</td><td>{{userInfo.CNTQTY}}</td><td>{{userInfo.CASH|number:2}}</td><td>{{userInfo.Ranking}}</td><td>{{userInfo.WinRatio}}%</td><td>{{userInfo.BiggestWin|number:2}}</td><td>{{userInfo.BiggestLoss|number:2}}</td><td>{{userInfo.AllTimeSharpRatio|number:2}}</td></tr></tbody><tfoot><tr><td colspan="5" class="text-center"><div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7"></div></td></tr></tfoot></table></div></div></div></div></div></div>'),e.put("components/map/map.html",'<div class="col-md-6 chartPanel" ng-controller="MapCtrl"><h3>Global Distribution on Map</h3><div id="map" map="" ng-init="data()"></div></div>'),e.put("components/school/contest.html",'<div class="col-lg-4" ng-controller="ContestCrol"><div class="ibox float-e-margins"><div class="ibox-title"><h5>School User In Contests</h5><div class="ibox-tools"><button type="button" class="btn btn-sm btn-primary">Export</button></div></div><div class="ibox-content"><div class="row"><div class="col-sm-3 m-b-xs"><select class="input-sm form-control input-s-sm inline product-option" ng-options="product.name for product in products" ng-model="selected" ng-change="changeProduct()"></select></div><div class="col-sm-3"></div></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th class="hidden-xs">Contest Name</th><th class="hidden-xs"># Users</th></tr></thead><tbody><tr ng-repeat="contest in contestList"><td>{{contest.name}}</td><td>{{contest.count|number}}</td></tr></tbody></table></div></div></div></div>'),e.put("components/school/count.html",'<div class="col-lg-6 school-count-box"><div class="col-lg-3 text-center"><div class="widget style1"><div class="row"><i class="fa fa-user fa-3x"></i></div><div class="row"><span>Total Users</span><h2 class="font-bold" ng-bind="totalUser"></h2><span></span></div></div></div><div class="col-lg-9"><div class="row m-t-xs"><div class="col-xs-4"><h5 class="m-b-xs">Core Users 30 Days</h5><h1 class="no-margins" ng-bind-html="isChina?coreFX30 + coreSC30 + coreFC30:core30"></h1></div><div class="col-xs-4"><h5 class="m-b-xs">Weekly Active Users</h5><h1 class="no-margins">{{(weekUserFX + weekUserFC + weekUserSC)|number}}</h1></div><div class="col-xs-4"><h5 class="m-b-xs">Monthly Active Users</h5><h1 class="no-margins">{{(monthUserFX + monthUserFC + monthUserSC)|number}}</h1></div></div><table class="table small m-t-sm"><tbody><tr><td><i class="fa fa-key"></i> 60 Days <strong ng-bind-html="isChina?coreFX60 + coreSC60 + coreFC60:core60"></strong></td><td><i class="fa fa-money"></i> FX <strong ng-bind="weekUserFX"></strong></td><td><i class="fa fa-money"></i> FX <strong ng-bind="monthUserFX"></strong></td></tr><tr><td><i class="fa fa-key"></i> > 90 Days <strong ng-bind-html="isChina?coreFX90 + coreSC90 + coreFC90:core90"></strong></td><td ng-show="$root.regionSelected == \'CN\'"><i class="fa fa-line-chart"></i> FC <strong ng-bind="weekUserFC"></strong></td><td ng-show="$root.regionSelected == \'CN\'"><i class="fa fa-line-chart"></i> FC <strong ng-bind="monthUserFC"></strong></td></tr><tr ng-show="$root.regionSelected == \'CN\'"><td></td><td><i class="fa fa-bank"></i> SC <strong ng-bind="weekUserSC"></strong></td><td><i class="fa fa-bank"></i> SC <strong ng-bind="monthUserSC"></strong></td></tr></tbody></table></div></div>'),e.put("components/school/quant.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class="row chartPanel" ng-controller="QuantCrol"><div class="col-lg-12"><highchart config="chartConfig"></highchart></div></div></div>'),e.put("components/school/school.html",'<div class="wrapper wrapper-content animated fadeInRight" ng-hide="$root.schoolShow"><h3>No access for this account</h3></div><div class="wrapper wrapper-content animated fadeInRight" ng-if="$root.schoolShow"><div class="row chartPanel" ng-controller="SchoolCtrl"><div class="row"><div class="col-md-2 selector pull-left"><ui-select ng-model="region.selected" on-select="onRegionSelect($item, $model)" theme="select2" class="form-control" title="Choose a Region"><ui-select-match placeholder="Select or search Region ...">{{$select.selected}}</ui-select-match><ui-select-choices repeat="item in regions | filter: $select.search"><div ng-bind-html="item | highlight: $select.search"></div><img width="19" src="http://lipis.github.io/flag-icon-css/flags/4x3/{{item| lowercase}}.svg"></ui-select-choices></ui-select></div><div class="col-md-3 selector pull-left" ng-show="school_show"><ui-select ng-model="school.selected" on-select="onSchoolSelect($item, $model)" theme="select2" class="form-control" title="Choose a School"><ui-select-match placeholder="Select or search a school name ...">{{$select.selected.school_name}}</ui-select-match><ui-select-choices repeat="school in schools | filter: $select.search"><div ng-bind-html="school.school_name | highlight: $select.search"></div><small ng-bind-html="school.school_key | highlight: $select.search"></small></ui-select-choices></ui-select></div><div class="col-md-2 compare-switch" ng-show="school_show"><span style="float:right">Compare mode</span><div class="switch"><div class="onoffswitch"><input type="checkbox" ng-model="isCompard" class="onoffswitch-checkbox" id="compared"> <label class="onoffswitch-label" for="compared"><span class="onoffswitch-inner"></span></label></div></div></div></div><div class="row"><div ng-include="\'components/school/count.html\'"></div><div ng-include="\'components/school/user_growth.html\'"></div></div></div><div class="row chartPanel"><div ng-include="\'components/school/user_rank.html\'"></div><div ng-include="\'components/school/contest.html\'"></div></div></div>'),e.put("components/school/user_growth.html",'<div class="col-lg-6"><highchart config="chartConfig" class="user-growth-chart"></highchart></div>'),e.put("components/school/user_rank.html",'<div class="col-lg-8" ng-controller="UserRankingCrol"><div class="ibox float-e-margins"><div class="ibox-title"><h5>School User Ranking(By ROI)</h5><div class="ibox-tools"><button type="button" class="btn btn-sm btn-primary">Export</button></div></div><div class="ibox-content"><div class="row"><div class="col-sm-3 m-b-xs"><select class="input-sm form-control input-s-sm inline product-option" ng-options="product.name for product in products" ng-model="selected" ng-change="changeProduct()"></select></div><div class="col-sm-3"></div></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th></th><th>User Name</th><th class="hidden-xs">User Id</th><th class="hidden-xs">Register</th><th class="hidden-xs">Trade Count</th><th class="hidden-xs">Biggest Loss</th><th class="hidden-xs">Ranking</th><th>ROI %</th></tr></thead><tbody><tr ng-repeat="userInfo in userRankList"><td><img class="img-circle" src="{{userInfo.serving_url || \'http://www.hkfdt.cn/favicon.ico\'}}"></td><td><a href="#/index/profile/{{userInfo.user_id}}/{{$root.regionSelected}}/{{selected.name}}">{{userInfo.username | limitTo: 10}}</a></td><td class="hidden-xs">{{userInfo.user_id}}</td><td class="hidden-xs">{{userInfo.created|date}}</td><td class="hidden-xs">{{userInfo.tradescount|number}}</td><td class="neg-number">- {{userInfo.biggestloss|currency:"$"}}</td><td class="hidden-xs">{{userInfo.ranking}}</td><td>{{(userInfo.unit_price - 1 ) * 100|number:2}} %</td></tr></tbody></table><div class="text-center"><div ng-show="rankListLoading"><i class="fa fa-spinner fa-spin"></i></div><button type="button" class="btn btn-sm btn-info" ng-class="userRankList.length>0?\'\':\'disabled\'" ng-click="loaded=true;loadMore()" ng-hide="loaded">Load More</button></div></div></div></div></div>'),e.put("components/seed/user_list.html",'<div class="wrapper wrapper-content animated fadeInRight" ng-hide="$root.seedShow"><h3>No access for this account</h3></div><div class="wrapper wrapper-content animated fadeInRight" ng-if="$root.seedShow"><div class="row" ng-controller="SeedUserListCrol"><div class="col-lg-6"><div class="col-xs-8 text-left"><span>Daily Total P&L (including fee&commisions)</span><h1 class="font-bold">${{summaryObj.pnl | number:2}}</h1></div><div class="col-xs-4 text-left"><span>Daily Total QTY</span><h1 class="font-bold">{{summaryObj.qty | number}}</h1></div><div class="col-lg-12"><highchart config="chartPieConfig"></highchart></div></div><div class="col-lg-6"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Daily Summary</h5><div class="ibox-tools"></div></div><div class="ibox-content"><div class="table-responsive"><table st-safe-src="summaryList" st-table="displayedSummary" class="table table-striped"><thead><tr><th>Trade Date</th><th>Symbol</th><th st-sort="ACCOUNT_VALUE" st-sort-default="reverse">QTY</th><th st-sort="PNL">P&L</th></tr></thead><tbody><tr ng-repeat="sum in displayedSummary"><td>{{sum["@TRADE_DATE"]}}</td><td>{{sum.SYMBOL}}</td><td>{{sum.QTY|number}}</td><td>{{sum.PNL|number:2}}</td></tr></tbody></table></div></div></div></div><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Seed Daily Performance</h5><div class="ibox-tools" ng-if="$root.exportShow"><a type="button" class="btn btn-sm btn-primary" href="{{historyFilePath}}" download="{{historyFileName}}">Export</a></div></div><div class="ibox-content"><div class="table-responsive"><table st-safe-src="userList" st-table="displayed" class="table table-striped"><thead><tr><th colspan="5"><div class="input-group"><input st-search="USER_ID" class="form-control" placeholder="Search User ID ..." type="text"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-primary">Go!</button></span></div></th></tr><tr><th>Trade Date</th><th>User Id</th><th st-sort="ACCOUNT_VALUE" st-sort-default="reverse">Account Value</th><th st-sort="PNL">P&L</th><th st-sort="UR_PNL">UR_P&L</th><th st-sort="ALL_TIME_PNL">All Time P&L</th><th st-sort="SUMQTY">Total Qty</th><th st-sort="CNTQTY"># Filled</th><th st-sort="CASH">Cash</th><th st-sort="Ranking">Ranking</th><th st-sort="WinRatio">Win Ratio</th><th st-sort="BiggestWin">Biggest Win</th><th st-sort="BiggestLoss">Biggest Loss</th><th st-sort="AllTimeSharpRatio">All Time Sharp Ratio</th></tr></thead><tbody><tr ng-repeat="userInfo in displayed"><td>{{userInfo["@TRADE_DATE"]}}</td><td><a href="#/index/profile/{{userInfo.USER_ID}}/SEED/FX">{{userInfo.USER_ID}}</a></td><td>{{userInfo.ACCOUNT_VALUE|number:2}}</td><td>{{userInfo.PNL|number:2}}</td><td>{{userInfo.UR_PNL|number:2}}</td><td>{{userInfo.ALL_TIME_PNL|number:2}}</td><td>{{userInfo.SUMQTY}}</td><td>{{userInfo.CNTQTY}}</td><td>{{userInfo.CASH|number:2}}</td><td>{{userInfo.Ranking}}</td><td>{{userInfo.WinRatio}}%</td><td>{{userInfo.BiggestWin|number:2}}</td><td>{{userInfo.BiggestLoss|number:2}}</td><td>{{userInfo.AllTimeSharpRatio|number:2}}</td></tr></tbody><tfoot><tr><td colspan="5" class="text-center"><div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7"></div></td></tr></tfoot></table></div></div></div></div></div></div>'),e.put("components/user/cmb_list.html",'<div class="col-lg-2" ng-repeat="user in userList"><div class="contact-box center-version"><a href="#/index/profile/{{user.userId}}/CN/FC/beta"><img alt="image" class="img-circle" src="{{usersMap[user.userId].serving_url ||\'http://www.hkfdt.cn/favicon.ico\'}}"><h3 class="m-b-xs"><strong>{{usersMap[user.userId].USERNAME}}</strong></h3><address class="m-t-md"><strong>{{usersMap[user.userId].school_name}}</strong><br><abbr title="Phone">Score:</abbr> {{user["scoresMap"]["feature"][featureSelected.key]["scores"].fdt}}</address></a></div></div>'),e.put("components/user/cmb_score.html",'<div class="row" ng-controller="CMBCtrl"><div class="wrapper wrapper-content animated fadeInRight"><img src="assets/images/cmb.png" style="width:180px;margin-bottom: 15px; margin-left: 15px;"><div class="row filterBar" ng-init="changeFt()"><div class="col-md-2"><select class="input-sm form-control input-s-sm inline product-option" ng-options="feature.name for feature in features" ng-model="featureSelected" ng-change="changeFt()"></select></div><div class="col-md-1"><input ng-model="limitList" value="10" ng-model-options="{debounce: 1000}" class="userScorelimit" ng-change="changeFt()"> Limit</div><div class="col-md-2"><input ng-model="tradeCount" value="0" class="countFilter" ng-model-options="{debounce: 1000}" ng-change="changeFt()"> Trade Count</div><div class="col-md-2"><input ng-model="loginCount" value="0" class="countFilter" ng-model-options="{debounce: 1000}" ng-change="changeFt()"> Login Count</div><div class="col-md-2"><input ng-model="unitPrice" value="0.95" class="countFilter" ng-model-options="{debounce: 1000}" ng-change="changeFt()"> Unit Price</div><div class="col-md-2"><input ng-model="mdd" value="-0.15" class="countFilter" ng-model-options="{debounce: 1000}" ng-change="changeFt()"> MDD</div></div><div ng-include="\'components/user/cmb_list.html\'"></div></div></div>'),e.put("components/user/core_user.html",'<div class="row" ng-controller="CoreUserCtrl"><div class="wrapper wrapper-content animated fadeInRight"><div class="row filterBar" ng-init="changeRegion()"><div class="col-md-2"><select class="input-sm form-control input-s-sm inline product-option" ng-options="app for app in appTypes" ng-model="appSelected" ng-change="changeSelect()"></select></div><div class="col-md-1"><select class="input-sm form-control input-s-sm inline product-option" ng-options="region for region in regions" ng-model="regionSelected" ng-change="changeRegion()"></select></div><div class="col-md-1"><select class="input-sm form-control input-s-sm inline product-option" ng-options="school.name for school in schools" ng-model="schoolSelected" ng-change="changeSelect()"></select></div><div class="col-md-1"><input ng-model="limitList" value="20" ng-model-options="{debounce: 1000}" class="userScorelimit" ng-change="changeSelect()"> Limit</div><div class="col-md-1"><a class="btn btn-white btn-bitbucket"><i class="fa fa-user-md"></i> {{totalUser}}</a></div><div class="col-md-2 btn-group pull-right"><button class="btn" ng-class="{\'btn-primary\': isActive(30), \'btn-white\': !isActive(30)}" type="button" ng-click="changeSelect(30)">30 Day</button> <button class="btn" ng-class="{\'btn-primary\': isActive(60), \'btn-white\': !isActive(60)}" type="button" ng-click="changeSelect(60)">60 Day</button> <button class="btn" ng-class="{\'btn-primary\': isActive(90), \'btn-white\': !isActive(90)}" type="button" ng-click="changeSelect(90)">90 Day</button></div></div><div ng-include="\'components/user/core_user_list.html\'"></div></div></div>'),e.put("components/user/core_user_list.html",'<div class="col-lg-2" ng-repeat="user in userList"><div class="contact-box center-version"><a href="#/index/profile/{{user.user_id}}/{{regionSelected}}/{{appSelected}}"><img alt="image" class="img-circle" src="{{usersMap[user.user_id].serving_url ||\'http://www.hkfdt.cn/favicon.ico\'}}"><h3 class="m-b-xs"><strong>{{usersMap[user.user_id].USERNAME}}</strong></h3><address class="m-t-md"><strong>{{usersMap[user.user_id].school_name|limitTo:10}}</strong><br><abbr title="Phone">Trade Life :</abbr> {{user.life}}</address></a></div></div>'),e.put("components/user/mt4_closed_list.html",'<div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Trade History</h5></div><div class="ibox-content"><div class="table-responsive"><table class="table table-striped" st-table="userClosedListDisplayed" st-safe-src="userClosedList"><thead><tr><th st-sort-default="reverse">Trade Date</th><th>Symbol</th><th>SIDE</th><th>Duration</th><th class="hidden-xs">QTY</th><th class="hidden-xs">Buy Price</th><th class="hidden-xs">Sell Price</th><th>P&L</th></tr></thead><tbody><tr ng-repeat="trade in userClosedListDisplayed"><td>{{trade.closeTime|date:\'yyyy-MM-dd\'}}</td><td>{{trade.item}}</td><td>{{trade.type}}</td><td><span>{{trade.closeTimeTs - trade.openTimeTs | amDurationFormat : \'minutes\'}}</span></td><td class="hidden-xs">{{trade.size}}</td><td class="hidden-xs">{{trade.openPrice}}</td><td class="neg-number">{{trade.closePrice}}</td><td>{{trade.profit|number:2}}</td></tr></tbody><tfoot><tr><td colspan="5" class="text-center"><div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7"></div></td></tr></tfoot></table></div></div></div></div>'),e.put("components/user/mt4_profile.html",'<div class="wrapper wrapper-content animated fadeInRight" ng-controller="MT4ProfileCtrl"><a target="_blank" href="http://oxfordnie.org/"><img alt="image" style="width:120px; float:right" src="assets/images/oxford_nie.png"></a><div class="row m-b-lg m-t-lg"><div class="col-md-4"><div class="profile-image"><img src="{{user.serving_url || \'http://cdn4.aptoide.com/imgs/3/7/0/37056af9e7e51c1b28de1d2f920568a4.png\'}}" class="img-circle circle-border m-b-md" alt="profile"></div><div class="profile-info"><div class=""><div><h2 class="no-margins">{{acc.name}}</h2><h4>{{user.school_name}}</h4><small><span ng-if="$root.exportShow">Contact: {{user.EMAIL }} {{user.PHONE}}</span><br>Join at: {{user.CREATED | date:\'yyyy-MM-dd\'}}<br>Last Active: {{userLastLogin.LOGINAT | date:\'yyyy-MM-dd @ h:mma\'}}<br>Country: <img width="15" ng-show="user.COUNTRY" src="http://lipis.github.io/flag-icon-css/flags/4x3/{{user.COUNTRY| lowercase}}.svg"><br></small></div></div></div><div class="row" style="margin-top: 20px;" ng-show="dateRangeChanged"><div class="pull-left" style="font-size: 10px;color: #aaa;margin-left: 25px;">Account on : {{dateRange.endDate | date:\'yyyy-MM-dd\'}}</div></div><table class="table small m-b-xs accounts-table"><tbody><tr><td><strong>{{acc.account}}</strong><div>Account No</div></td><td><strong>{{(performance.UNIT_PRICE - 1 ) * 100|number:2}}%</strong><div>ROI</div></td></tr><tr><td><strong>{{performance.ALL_TIME_PNL|number:2}}</strong><div>All Time P&L</div></td><td><strong>{{performance.CASH_DEPOSITED|number:2}}</strong><div>Cash Deposite</div></td></tr><tr><td><strong>{{acc.currency}}</strong><div>Currency</div></td><td><strong>{{acc.leverage}}</strong><div>Leverage</div></td></tr><tr><td><strong>{{acc.time}}</strong><div>Update Time</div></td><td><strong>{{acc.title}}</strong><div>Title</div></td></tr><tr><td><strong>{{performance.BiggestWin}}</strong><div>Biggest Win</div></td><td><strong>{{performance.BiggestLoss}}</strong><div>Biggest Loss</div></td></tr><tr><td><strong>{{performance.WinRatio}}%</strong><div>Win Ratio</div></td><td><strong>{{performance.TradesCount}}</strong><div>Trade Counts</div></td></tr></tbody></table><div class="col-md-12"><highchart config="chartPieConfig"></highchart></div></div><div class="col-md-8"><div class="row"><div class="col-md-6"><highchart config="chartRadarFDTScoreConfig"></highchart></div><div class="col-md-6"><highchart config="chartRadarRiskPreferenceConfig"></highchart></div><div class="col-md-6"><highchart config="chartRadarProfitConfig"></highchart></div><div class="col-md-6"><div class="col-md-6 col-md-offset-3"><h4>Risk Control Score</h4></div><div class="col-md-3"></div><br><highchart config="chartRadarConfig"></highchart></div></div><div class="row"><highchart config="chartConfig" class="user-trade-chart"></highchart></div><div class="row"><div ng-include="\'components/user/mt4_closed_list.html\'"></div></div></div></div></div>'),e.put("components/user/mt4_user.html",'<div class="row" ng-controller="MT4UserCtrl"><div class="wrapper wrapper-content animated fadeInRight ecommerce"><div class="row"><div class="col-lg-12"><div class="ibox"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped" st-table="userDisplayed" st-safe-src="userList"><thead><tr><th>Title</th><th>Account Name</th><th>Account No</th><th>ROI</th><th>Currency</th><th>Leverage</th><th>File Export Time</th><th>Upload Date</th><th>Upload User</th><th>MT4 File</th></tr></thead><tbody><tr ng-repeat="user in userDisplayed"><td>{{user.title}}</td><td><a href="#/index/mt4/{{user.account}}">{{user.name}}</a></td><td>{{user.account}}</td><td>{{(user.UNIT_PRICE ? (user.UNIT_PRICE - 1 ) * 100 : 0)|number:2}}%</td><td>{{user.currency}}</td><td>{{user.leverage}}</td><td>{{user.time}}</td><td>{{user.cTime|date:\'yyyy-MM-dd\'}}</td><td>{{user.uploadUser}}</td><td><a ng-if="user.filename" href="downloadMT4File?filename={{user.filename}}" class="btn btn-primary" style="padding: 2px 6px;"><i class="fa fa-download"></i></a></td></tr></tbody><tfoot><tr><td colspan="5" class="text-center"><div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7"></div></td></tr></tfoot></table></div></div></div></div></div></div></div>'),e.put("components/user/user_closed_list.html",'<div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Trade History</h5><div class="ibox-tools" ng-if="$root.exportShow"><button type="button" class="btn btn-outline btn-primary" ng-if="selectTradeDates" ng-click="tradeDateCancelClick()">{{selectTradeDates}} <i class="fa fa-times"></i></button> <a type="button" class="btn btn-sm btn-primary" href="{{historyFilePath}}" download="{{historyFileName}}">Export</a></div></div><div class="ibox-content"><div class="table-responsive"><table class="table table-striped" st-table="userClosedListDisplayed" st-safe-src="userClosedList"><thead><tr><th>Trade Date</th><th>Symbol</th><th>SIDE</th><th>Duration</th><th class="hidden-xs">QTY</th><th class="hidden-xs">Buy Price</th><th class="hidden-xs">Sell Price</th><th>P&L</th></tr></thead><tbody><tr ng-repeat="trade in userClosedListDisplayed"><td>{{trade.TRADE_DATE|date:\'yyyy-MM-dd\'}}</td><td>{{trade.SYMBOL}}</td><td>{{sideMap[trade.ObjId]["side"]}}</td><td><span ng-if="sideMap[trade.ObjId]">{{(trade.CREATED - sideMap[trade.ObjId]["ts"]) | amDurationFormat : \'minutes\'}}</span></td><td class="hidden-xs">{{trade.QTY|number}}</td><td class="hidden-xs">{{trade.BUY_PRICE}}</td><td class="neg-number">{{trade.SELL_PRICE}}</td><td>{{trade.AC_PNL|number:2}}</td></tr></tbody><tfoot><tr><td colspan="5" class="text-center"><div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7"></div></td></tr></tfoot></table></div></div></div></div>'),e.put("components/user/user_profile.html",'<div class="wrapper wrapper-content animated fadeInRight" ng-hide="$root.simShow || $root.ftShow"><h3>No access for this account</h3></div><div class="wrapper wrapper-content animated fadeInRight" ng-controller="UserProfileCtrl" ng-if="$root.simShow || $root.ftShow"><div class="row"><div class="col-md-3" ng-hide="hasUserId"><div class="input-group"><input type="text" class="form-control" ng-model="inputUserId" placeholder="Please enter fdt user id or user name"> <span class="input-group-btn"><button type="button" class="btn btn-primary" ng-click="loadData()">Go!</button></span></div></div><div class="col-md-1" ng-hide="hasUserId"><select class="input-sm form-control input-s-sm inline product-option" ng-options="product.name for product in products" ng-model="productSelected"></select></div><div class="col-md-1" ng-hide="hasUserId"><select class="input-sm form-control input-s-sm inline product-option" ng-options="region.name for region in regions" ng-model="regionSelected"></select></div><div class="col-md-1" ng-hide="hasUserId"><select class="input-sm form-control input-s-sm inline product-option" ng-options="contest.CONTEST_NAME for contest in contests" ng-model="contestSelected"></select></div><div class="col-md-2 form-group pull-right" id="data_1"><div class="input-group date"><span class="input-group-addon"><i class="fa fa-calendar"></i></span> <input singledatepicker="true" type="daterange" class="form-control date-selector" ng-change="loadData(); dateRangeChanged=true" ng-model="dateRange"></div></div></div><a target="_blank" href="http://oxfordnie.org/"><img alt="image" style="width:120px; float:right" src="assets/images/oxford_nie.png"></a><div class="row m-b-lg m-t-lg"><div class="col-md-4"><div class="profile-image" style="text-align: center"><img src="{{user.serving_url || \'http://www.hkfdt.cn/favicon.ico\'}}" class="img-circle circle-border m-b-md" alt="profile"> <a ng-click="loadData(true)" type="button" class="btn btn-primary dim" style="margin-top: -25px;width: 60px;height: 25px;padding: 5px;font-size: 10px;"><i ng-class="refresh?\'fa-spin\':\'\'" class="fa fa-refresh"></i></a></div><div class="profile-info"><div class=""><div><h2 class="no-margins">{{user.USERNAME}} <a style="margin-left: 20px;padding: 2px;font-size: 10px;" ng-hide="accFirstDate-joinDate < 1000*60*60*24*2" class="btn btn-default" href="#">Reset @{{accFirstDate| date:\'yyyy-MM-dd\'}}</a></h2><h4>{{user.school_name}}</h4><small><span ng-if="$root.exportShow">Contact: {{user.EMAIL }} {{user.PHONE}}</span><br>Join at: {{user.CREATED | date:\'yyyy-MM-dd\'}}<br>Last Active: {{userLastLogin.LOGINAT | date:\'yyyy-MM-dd @ h:mma\'}}<br>Country: <img width="15" ng-show="user.COUNTRY" src="http://lipis.github.io/flag-icon-css/flags/4x3/{{user.COUNTRY| lowercase}}.svg"><br></small></div></div></div><div class="row" style="margin-top: 20px;" ng-show="dateRangeChanged"><div class="pull-left" style="font-size: 10px;color: #aaa;margin-left: 25px;">Account on : {{dateRange.endDate | date:\'yyyy-MM-dd\'}}</div></div><table class="table small m-b-xs accounts-table" ng-hide="seedsc"><tbody><tr><td><strong>{{acc.CASH + acc.UR_PNL | currency:"$"}}</strong><div>Account Value</div></td><td><strong>{{acc.CASH | currency:"$"}}</strong><div>Cash Value</div></td></tr><tr><td><strong ng-show="acc.UNIT_PRICE">{{(acc.UNIT_PRICE - 1 ) * 100|number:2}}%</strong><div>ROI</div></td><td><strong>{{acc.TradesCount}}</strong><div>Total Trades</div></td></tr><tr><td><strong>{{acc.Ranking}}</strong><div>Ranking</div></td><td><strong>{{acc.RankingPer}}%</strong><div>Ranking Percentage</div></td></tr><tr><td><strong>{{acc.BiggestWin}}</strong><div>Biggest Win</div></td><td><strong>{{acc.BiggestLoss}}</strong><div>Biggest Loss</div></td></tr><tr><td><strong>{{acc.WinRatio}}%</strong><div>Win Ratio</div></td><td><strong>{{acc.CASH_AVAILABLE | currency:"$"}}</strong><div>Available Cash</div></td></tr><tr ng-show="userSetting"><td><strong>{{userSetting.DEFAULT_QTY}}</strong><div>Quick Trade QTY</div></td><td><strong>{{userSetting.STOP_LOSS_VALUE | currency:"$"}}</strong><div>Position Stop Loss</div></td></tr><tr ng-show="userSetting"><td><strong>{{userSetting.DAILY_STOPLOSS | currency:"$"}}</strong><div>Daily Stop Loss</div></td><td><strong>{{userSetting.TRAILING_STOP }}</strong><div>Trailing Stop</div></td></tr></tbody></table><highchart config="chartLoginConfig" class="user-roi-chart" ng-hide="seedsc"></highchart><highchart config="chartPNLConfig" class="user-roi-chart"></highchart><highchart style="margin-top: 40px;" config="chartCommisionConfig" class="user-roi-chart" ng-show="seedsc"></highchart><highchart config="chartRollPriceConfig" class="user-roi-chart" ng-hide="seedsc"></highchart><highchart config="chartTradeCountConfig" class="user-roi-chart" ng-hide="seedsc"></highchart><highchart config="chartValueConfig" class="user-roi-chart" ng-hide="seedsc"></highchart><highchart config="chartRankingConfig" class="user-roi-chart" ng-hide="seedsc"></highchart><div class="table-responsive" ng-show="seedsc" style="margin-top: 50px;"><h3 style="text-align:center; margin-bottom: 20px;">Top Traded Symbols (by Acounmt)</h3><table class="table table-striped"><thead><tr><th class="hidden-xs">Symbol</th><th class="hidden-xs">Total Amount</th></tr></thead><tbody><tr ng-repeat="sy in stats_pos"><td>{{sy.symbol}}</td><td>{{sy.total_volumn |number: 2}}</td></tr></tbody></table></div><div class="table-responsive" ng-show="seedsc"><h3 style="text-align:center; margin-bottom: 20px;">Top Traded Symbols (by pnl/position)</h3><table class="table table-striped"><thead><tr><th class="hidden-xs">Symbol</th><th class="hidden-xs">Efficiency</th></tr></thead><tbody><tr ng-repeat="sy in stats_pnl"><td ng-class="sy.total_eff<0?\'table-danger\' : \'\'">{{sy.symbol}}</td><td ng-class="sy.total_eff<0?\'table-danger\' : \'\'">{{sy.total_eff | number : 6}}</td></tr></tbody></table></div></div><div class="col-md-8"><div class="row"><div ng-class="beta?\'col-md-6\' :\'col-md-12\'"><highchart config="chartRadarFDTScoreConfig" ng-hide="seedsc"></highchart><highchart config="chartSeedSCScoreConfig" ng-show="seedsc"></highchart></div><div class="col-md-6" ng-if="beta"><highchart config="chartRadarActivityConfig" ng-hide="seedsc"></highchart><highchart config="chartSeedStyleScoreConfig" ng-show="seedsc"></highchart></div><div class="col-md-6" ng-show="beta&&!seedsc"><highchart config="chartRadarProfitConfig"></highchart></div><div class="col-md-6" ng-show="beta&&!seedsc"><br><highchart config="chartRadarConfig"></highchart></div></div><div class="row"><highchart config="chartConfig" class="user-trade-chart"></highchart></div><div class="row"><highchart config="chartTradesConfig" class="user-trade-chart"></highchart></div><div class="row"><div ng-include="\'components/user/user_closed_list.html\'"></div></div><div class="col-md-6"><highchart config="chartPieConfig"></highchart></div><div class="col-md-6" ng-hide="region==\'SEED\' || region==\'INC\' || region==\'SEEDSC\'"><div class="table-responsive"><table class="table table-striped"><thead><tr><th class="hidden-xs">Joined Contests</th><th class="hidden-xs">Ranking</th></tr></thead><tbody><tr ng-repeat="contest in contestList"><td>{{contest.name}}</td><td>{{contest.RANKING}}</td></tr></tbody></table></div></div></div></div></div>'),e.put("components/user/user_score.html",'<div class="row" ng-controller="UserScoreCtrl"><div class="wrapper wrapper-content animated fadeInRight"><div class="row filterBar" ng-init="initProd()"><div class="col-md-3"><ui-select style="width:100%" ng-model="contestSelected" on-select="changeFt($item)" theme="select2" title="Choose a Region"><ui-select-match placeholder="Select or search Region ...">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="contest in contests | filter: $select.search"><div><img width="50" ng-if="contest.icon_image" src="{{contest.icon_image}}"> <span ng-bind-html="contest.name | highlight: $select.search"></span></div></ui-select-choices></ui-select></div><div class="col-md-1"><select class="input-sm form-control input-s-sm inline product-option" ng-options="feature for feature in features" ng-model="featureSelected" ng-change="changeFt()"></select></div><div class="col-md-2"><select class="input-sm form-control input-s-sm inline product-option" ng-options="wt for wt in weightFiles" ng-model="weightSelected" ng-change="changeFt()"></select></div><div class="col-md-1"><select class="input-sm form-control input-s-sm inline product-option" ng-options="sortType for sortType in sortTypes" ng-model="sortTypeSelected" ng-change="changeFt()"></select></div><div class="col-md-1"><input ng-model="limitList" value="10" ng-model-options="{debounce: 1000}" class="userScorelimit" ng-change="changeFt()"> Limit</div><div class="col-md-2"><input style="margin-top:15px" type="checkbox" ng-model="incubatee" ng-change="changeFt()"> Incubatee Candidate</div><div class="col-md-2" style="margin-top: 10px;"><a ng-click="distShow=!distShow;changeFt()" type="button" class="btn btn-primary dim ng-click-active" style="width: 40px;height: 25px;padding: 1px 0 5px 0;font-size: 15px; margin-right: 5px;"><i ng-class="distShow?\'fa-th-list\':\'fa-bar-chart\'" class="fa"></i></a> <span style="font-size: 10px;color: #aaa;">Score update @ {{userList[0].ts| date:"yyyy-MM-dd h:mma" : \'UTC\' }}</span></div></div><div class="row"><div class="col-lg-9" ng-include="\'components/user/user_score_list.html\'" style="margin-top: -15px;" ng-hide="distShow"></div><div class="col-lg-9" style="margin-top: -15px;" ng-show="distShow"><div class="col-lg-6" ng-repeat="chart in fts"><highchart config="chart.chartObj" class="user-roi-chart"></highchart></div></div><div class="col-lg-3" ng-hide="distShow"><highchart config="chartScoreDistConfig" class="user-roi-chart"></highchart><highchart config="chartProfDistConfig" class="user-roi-chart"></highchart><highchart config="chartRiskDistConfig" class="user-roi-chart"></highchart><highchart config="chartConsiDistConfig" class="user-roi-chart"></highchart><highchart config="chartActDistConfig" class="user-roi-chart"></highchart></div></div></div></div>'),e.put("components/user/user_score_list.html",'<div class="col-lg-3" ng-repeat="user in userList" style="height: 280px; margin-top: 40px;"><div class="contact-box center-version"><a target="_blank" href="#/index/profile/{{contestSelected.contestID? contestSelected.contestID + \'_1_*1_*1_\' + user.user_id : user.user_id}}/{{contestSelected.region}}/{{user.prod| uppercase}}/beta"><img alt="image" class="img-circle" src="{{usersMap[user.user_id].serving_url ||\'http://www.hkfdt.cn/favicon.ico\'}}"><h3 class="m-b-xs"><strong>{{usersMap[user.user_id].USERNAME}}</strong></h3><div class="row"><strong>{{usersMap[user.user_id].school_name}}</strong><br><img ng-show="usersMap[user.user_id].COUNTRY" src="http://lipis.github.io/flag-icon-css/flags/4x3/{{usersMap[user.user_id].COUNTRY| lowercase}}.svg" style="width: 25px;height: 20px;padding: 0px;margin: 5px 0 0 0;"><h2>{{user[featureSelected].score |number:2 }}</h2><div class="col-lg-4" style="border-right: 1px solid #eee;">{{ (user.ft_up.raw - 1) * 100 |number :2}} %<br><span class="visible-lg-block" style="font-size: 8px; color: #aaa;">ROI</span></div><div class="col-lg-4" style="border-right: 1px solid #eee;">{{user.ft_shp_rt.raw |number :2}}<br><span class="visible-lg-block" style="font-size: 8px; color: #aaa;">Sharp Ratio</span></div><div class="col-lg-4" title="Max Drop Down">{{ (user.ft_mdd.raw) * (-100) |number :2 }} %<br><span class="visible-lg-block" style="font-size: 8px; color: #aaa;">MDD</span></div></div><span ng-show="user.arena_tg==\'former_incubatee\'" class="former-incu">Former</span> <span class="ranking-number">{{$index+1}}</span></a></div></div>')
}]);