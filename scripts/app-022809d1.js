"use strict";angular.module("inspinia",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router","ui.bootstrap","highcharts-ng","ui.select","angular-venn","angularMoment","smart-table","ngBootstrap"]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("login",{"abstract":!0,url:"/login",templateUrl:"components/login/login.html"}).state("index",{"abstract":!0,url:"/index",templateUrl:"components/common/content.html"}).state("index.main",{url:"/main",templateUrl:"app/main/main.html"}).state("index.school",{url:"/school",templateUrl:"components/school/school.html",data:{pageTitle:"School Analytics"}}).state("index.user",{url:"/userScore",templateUrl:"components/user/user_score.html",data:{pageTitle:"User Analytics"}}).state("index.profile",{url:"/profile/:userID/:region/:app",templateUrl:"components/user/user_profile.html",data:{pageTitle:"User Profile"}}).state("index.search",{url:"/profileSearch",templateUrl:"components/user/user_profile.html",data:{pageTitle:"User Profile"}}).state("index.incu",{url:"/incubatee",templateUrl:"components/incu/user_list.html",data:{pageTitle:"User List"}}).state("index.seed",{url:"/seed",templateUrl:"components/seed/user_list.html",data:{pageTitle:"Seed"}}).state("index.cmb",{url:"/cmb",templateUrl:"components/user/cmb_score.html",data:{pageTitle:"cmb"}}).state("index.core",{url:"/core",templateUrl:"components/user/core_user.html",data:{pageTitle:"core"}}).state("index.beta",{url:"/profile/:userID/:region/:app/:beta",templateUrl:"components/user/user_profile.html",data:{pageTitle:"User Profile Beta"}}).state("index.mt4",{url:"/mt4/:accountID",templateUrl:"components/user/mt4_profile.html",data:{pageTitle:"MT4 Profile Beta"}}).state("index.quant",{url:"/quant",templateUrl:"components/school/quant.html",data:{pageTitle:"User Profile Beta"}}),e.otherwise("/index/main")}]).run(["$http","$rootScope",function(t,e){t.get("getSession").success(function(t){var i=t.role;e.roleRegion=t.region,e.roleSchool=t.school,e.userNick=t.nick,i&&!t.core?(i=i.toString().split(""),e.dashboardShow="1"==i[0]?!0:!1,!e.firstAvailablePage&&e.dashboardShow&&(e.firstAvailablePage="#/index/main"),e.schoolShow="1"==i[1]?!0:!1,!e.firstAvailablePage&&e.schoolShow&&(e.firstAvailablePage="#/index/school"),e.incuShow="1"==i[2]?!0:!1,!e.firstAvailablePage&&e.incuShow&&(e.firstAvailablePage="#/index/incubatee"),e.seedShow="1"==i[3]?!0:!1,!e.firstAvailablePage&&e.seedShow&&(e.firstAvailablePage="#/index/seed"),e.simShow="1"==i[4]?!0:!1,!e.firstAvailablePage&&e.simShow&&(e.firstAvailablePage="#/index/profileSearch"),e.exportShow="1"==i[5]?!0:!1,"#/index/main"==location.hash&&(location.href=e.firstAvailablePage)):(e.simShow=!0,location.href="#/index/profile/"+t.username+"/"+t.region+"/"+t.app),Highcharts.setOptions({global:{useUTC:!1}})})}]),angular.module("inspinia").controller("UserScoreCtrl",["$scope","$rootScope","$http",function(t,e,i){function n(){for(var e=0;e<t.userList.length;e++)i.get("getUserInfo?db="+t.contestSelected.region+"&userID="+t.userList[e].user_id).success(function(e){if(e&&e.length>0){var i=e[0];t.usersMap[i.USERID]=i}})}var a={};i.get("getAllContestByApp?db=TW&app=FX").success(function(t){for(var e in t)a[t[e].CONTEST_ID]=t[e].CONTEST_NAME}),i.get("getAllContestByApp?db=CN&app=FX").success(function(t){for(var e in t)a[t[e].CONTEST_ID]=t[e].CONTEST_NAME}),i.get("getAllContestByApp?db=CN&app=FC").success(function(t){for(var e in t)a[t[e].CONTEST_ID]=t[e].CONTEST_NAME}),i.get("getAllContestByApp?db=CN&app=SC").success(function(t){for(var e in t)a[t[e].CONTEST_ID]=t[e].CONTEST_NAME}),t.changeFt=function(){t.contestSelected.contestID&&"fsw_sim_default"==t.weightSelected&&(t.weightSelected=t.weightFiles[1]),t.contestSelected.contestID||"fsw_simc_1"!=t.weightSelected||(t.weightSelected=t.weightFiles[0]),t.userList=[],i.get("getFDTScoreList?wt_tg="+t.weightSelected+"&sort="+t.featureSelected+"&col="+t.contestSelected.id+"&ap_tag="+t.contestSelected.source+"&region="+t.contestSelected.region+"&limit="+t.limitList+"&desc="+t.sortTypeSelected+(t.incubatee?"&arena=incubatee":"")).success(function(e){t.userList=e,n()})},t.changeProd=function(){t.changeFt()},t.initProd=function(){t.contests=[],i.get("queryContestByApp?prod="+t.productSelected).success(function(e){for(var i in e){var n={name:e[i].source+" - "+e[i].col,id:e[i].col,source:e[i].source,region:"CN"};e[i].source&&e[i].source.indexOf("simc_")>=0&&(n.contestID=e[i].source.split("simc_")[1],a[n.contestID]&&(n.name=a[n.contestID])),t.contests.push(n)}t.contestSelected=t.contests[0],t.weightFiles=["fsw_sim_default","fsw_simc_1","fsw_inc_1","fsw_inc_2","fsw_inc_aggrsv","fsw_inc_blnce","fsw_inc_cnsvtv","fsw_inc_shp","fsw_inc_w_op","fsw_inc_w_op_dr"],t.weightSelected=t.weightFiles[0],t.changeFt()}),i.get("queryContestByApp?prod="+t.productSelected+"&region=Global").success(function(e){for(var i in e){var n={name:e[i].source+" - "+e[i].col,id:e[i].col,source:e[i].source,region:"Global"};e[i].source&&e[i].source.indexOf("simc_")>=0&&(n.contestID=e[i].source.split("simc_")[1],a[n.contestID]&&(n.name=a[n.contestID])),t.contests.push(n)}})},t.limitList=10,t.loginCount=0,t.tradeCount=0,t.features=["fdt","riskCtrl","riskPref","consistency","activity","profitability","ft_bgl","ft_mdd","ft_avg_max_op","ft_avg_nt_op","ft_std_neg_pnlr","ft_df_qty","ft_avg_dr","ft_avg_max_op","ft_up","ft_bgw","ft_std_op_qty","ft_std_op_dr","ft_login_cnt","ft_trade_cnt"],t.sortTypes=["Top","Tail","Random"],t.usersMap={},t.featureSelected=t.features[0],t.sortTypeSelected=t.sortTypes[0]}]),angular.module("inspinia").controller("UserProfileCtrl",["$scope","$rootScope","$http","$stateParams",function(t,e,i,n){function a(e){console.info(e),t.selectTradeDates=e,t.filteredList=[];for(var i=0;i<t.closedList.length;i++)moment(t.closedList[i].TRADE_DATE).format("YYYY-MM-DD")==e&&t.filteredList.push(t.closedList[i]);console.info(t.filteredList),t.$apply()}function s(e,n,a){for(var s=[],o=[],r=0,l=0;l<t.closedList.length;l++)50>r?(r++,s.push(t.closedList[l].ObjId)):(o.push(s),s=[t.closedList[l].ObjId],r=0);for(var c in o){var d=o[c];i.post("getTradeSide?userID="+a,{db:n,app:e,objIds:d}).success(function(e){if(e)for(var i in e)t.sideMap[e[i].OBJECT_ID]={side:"Buy"==e[i].SIDE?"Long":"Short",ts:moment(e[i].CREATED).toDate().getTime()/6e4}})}}function o(e,a,o,r){function l(){var n=t.dateRangeChanged?"trade_date="+moment(t.dateRange.endDate).format("YYYY-MM-DD")+"&":"";i.get("getUserFeatures?"+n+"col="+o.toLowerCase()+"&debug=true&userID="+e+"&region="+a+"&app_id="+o.toLowerCase()+"&contest_id="+r).success(function(e){if(0==e.length)console.info("no fdt score"),t.chartRadarFDTScoreConfig.series=[],t.chartRadarRiskPreferenceConfig.series=[],t.chartRadarProfitConfig.series=[],t.chartRadarConfig.series=[],t.chartRadarFDTScoreConfig.title={text:"FDT Score is computing"};else{var i=[],n=[];i.push(e.ft_shp_rt?{y:e.ft_shp_rt.score,ori:e.ft_shp_rt.raw}:0),i.push(e.ft_tmdd?{y:e.ft_tmdd.score,ori:e.ft_tmdd.raw}:0),i.push(e.ft_mdd?{y:e.ft_mdd.score,ori:e.ft_mdd.raw}:0),i.push(e.ft_std_neg_pnlr?{y:e.ft_std_neg_pnlr.score,ori:e.ft_std_neg_pnlr.raw}:0),i.push(e.ft_bgl?{y:e.ft_bgl.score,ori:e.ft_bgl.raw}:0),t.chartRadarFDTScoreConfig.title={text:"FDT Score: "+e.fdt.score.toFixed(2)},t.chartRadarConfig.series=[{type:"area",name:"Risk Control Score",data:i,pointPlacement:"on"}],n.push(e.ft_bgw?{y:e.ft_bgw.score,ori:e.ft_bgw.raw}:0),n.push(e.ft_roll_price?{y:e.ft_roll_price.score,ori:e.ft_roll_price.raw}:0),n.push(e.ft_streak?{y:e.ft_streak.score,ori:e.ft_streak.raw}:0),t.chartRadarProfitConfig.series=[{type:"area",name:"Profitability Score",data:n,pointPlacement:"on"}],t.chartRadarRiskPreferenceConfig.series=[];var i=[];i.push(e.ft_avg_dr?{y:Math.abs(e.ft_avg_dr.score),ori:e.ft_avg_dr.raw}:0),i.push(e.ft_df_qty?{y:e.ft_df_qty.score,ori:e.ft_df_qty.raw}:0),i.push(e.ft_avg_max_op?{y:Math.abs(e.ft_avg_max_op.score),ori:e.ft_avg_max_op.raw}:0),i.push(e.ft_avg_ngt_op?{y:Math.abs(e.ft_avg_ngt_op.score),ori:e.ft_avg_ngt_op.raw}:0),t.chartRadarRiskPreferenceConfig.series=[{type:"area",name:"Risk Preference Score",data:i,pointPlacement:"on"}],t.chartRadarFDTScoreConfig.series=[];var i=[];i.push(e.riskCtrl.score),i.push(e.profitability.score),i.push(e.consistency.score),i.push(e.activity.score),t.chartRadarFDTScoreConfig.series=[{type:"area",name:"FDT Score",data:i,pointPlacement:"on"}]}})}t.beta=n.beta,t.region=n.region,t.historyFilePath="getClosedTrades?format=csv&userID="+e+"&db="+a+"&app="+o,t.historyFileName=e+".csv",i.get("getClosedTrades?userID="+e+"&db="+a+"&app="+o).success(function(i){var n=[];for(var r in i)moment(i[r].CREATED)>=t.dateRange.startDate&&moment(i[r].CREATED)<=t.dateRange.endDate&&(i[r].ObjId=i[r].POSITION_ID.split("_")[0],i[r].CREATED=moment(i[r].CREATED).toDate().getTime()/6e4,n.push(i[r]));n.sort(function(t,e){return Date.parse(t.TRADE_DATE)-Date.parse(e.TRADE_DATE)}),n=n.reverse(),t.closedList=n,t.rankListLoading=!1,t.loaded=!1,t.userClosedList=n,s(o,a,e)}),"SEED"!=a&&"INC"!=a&&i.get("getContestByApp?userID="+e+"&db="+a+"&app="+o).success(function(e){t.contestList=e}),i.get("getUserLastLogin?userID="+e+"&db="+a+"&app="+o).success(function(e){t.userLastLogin=e[0]}),i.get("getUserAccountSetting?userID="+e+"&db="+a+"&app="+o).success(function(e){t.userSetting=e[0]}),i.get("getUserAccDaily?userID="+e+"&db="+a+"&app="+o).success(function(e){var i=[],n=[],a=[],s=[];t.chartConfig.series=[],t.chartValueConfig.series=[],t.chartRankingConfig.series=[];for(var o=0;o<e.length;o++)moment(e[o].TRADE_DATE)>=t.dateRange.startDate&&moment(e[o].TRADE_DATE)<=t.dateRange.endDate&&(i.push([Date.parse(e[o].TRADE_DATE),100*(parseFloat(e[o].UNIT_PRICE)-1)]),a.push([Date.parse(e[o].TRADE_DATE),parseFloat(e[o].CASH)]),n.push([Date.parse(e[o].TRADE_DATE),parseFloat(e[o].UNIT_PRICE)*parseFloat(e[o].CASH_DEPOSITED)]),s.push([Date.parse(e[o].TRADE_DATE),parseInt(e[o].Ranking)]));if(e&&e.length>0&&t.dateRange&&t.dateRange.endDate)for(var o in e)t.acc=moment(e[o].TRADE_DATE).format("YYYYMMDD")==moment(t.dateRange.endDate).format("YYYYMMDD")?e[o]:e[0];t.chartConfig.series.push({type:"area",name:"ROI",data:i}),t.chartRankingConfig.series.push({type:"line",name:"Ranking",data:s}),t.chartValueConfig.series.push({type:"line",name:"Account Value",data:n},{type:"line",name:"Cach Value",data:a})}),t.chartPieConfig.series=[],i.get("getUserOpenPositions?userID="+e+"&db="+a+"&app="+o).success(function(e){var i=[];for(var n in e)i.push({name:e[n].SYMBOL,y:Math.abs(e[n].qty),sign:e[n].qty>=0?"":"-"});t.chartPieConfig.series.push({type:"pie",name:"User Profolio",data:i,pointPlacement:"on"})}),i.get("getDailyLogin?userID="+e+"&db="+a+"&app="+o).success(function(e){var i=[];t.chartLoginConfig.series=[];for(var n=0;n<e.length;n++)moment(e[n].date)>=t.dateRange.startDate&&moment(e[n].date)<=t.dateRange.endDate&&i.push([Date.parse(e[n].date),e[n].count]);t.chartLoginConfig.series.push({type:"column",name:"App Open Times",data:i})}),i.get("getDailyTrades?userID="+e+"&db="+a+"&app="+o).success(function(e){var i=[],n=[];t.chartTradesConfig.series=[];for(var a=0;a<e.length;a++)moment(e[a].trade_date)>=t.dateRange.startDate&&moment(e[a].trade_date)<=t.dateRange.endDate&&(i.push([Date.parse(e[a].trade_date),parseInt(e[a].tradeCount)-parseInt(e[a].fillCount)]),n.push([Date.parse(e[a].trade_date),parseInt(e[a].fillCount)]));t.chartTradesConfig.series.push({name:"New/Cancel",data:i},{name:"Filled",data:n})}),t.chartRadarConfig.series=[],t.chartRadarProfitConfig.series=[],l(),setTimeout(function(){window.dispatchEvent(new Event("resize"))},100)}Highcharts.setOptions({global:{useUTC:!1}}),t.contests=[{CONTEST_NAME:"--- Contest ---"}],i.get("getAllContestByApp?db=TW&app=FX").success(function(e){t.contests=t.contests.concat(e),t.contestSelected=t.contests[0]}),i.get("getAllContestByApp?db=CN&app=FX").success(function(e){t.contests=t.contests.concat(e)}),i.get("getAllContestByApp?db=CN&app=FC").success(function(e){t.contests=t.contests.concat(e)}),i.get("getAllContestByApp?db=CN&app=SC").success(function(e){t.contests=t.contests.concat(e)}),t.dateRange={startDate:moment(e.lastUpdate).subtract(2,"years"),endDate:new Date(e.lastUpdate)},t.products=[{name:"FX",id:"1"},{name:"FC",id:"2"},{name:"SC",id:"3"}],t.userClosedList=[],"All"==e.roleRegion?t.regions=[{name:"Global",id:"Global"},{name:"CN",id:"CN"}]:"CN"==e.roleRegion?t.regions=[{name:"CN",id:"CN"}]:"CN"!=e.roleRegion&&(t.regions=[{name:e.roleRegion,id:e.roleRegion}]),t.productSelected=t.products[0],t.regionSelected=t.regions[0],t.closedList=[],t.scoreProductSelected=t.products[0],t.loadMore=function(){t.userClosedList=t.closedList},t.sideMap={},t.filteredList=[],t.tradeDateCancelClick=function(){t.selectTradeDates=null,t.userClosedList=t.closedList},t.$watch("filteredList",function(){console.info("update close position list"),t.userClosedList=t.filteredList}),t.loadData=function(){var e=n.userID||t.inputUserId,a="";n.userID&&n.userID.indexOf("_1_*1_*1_")>=0&&(a=n.userID.split("_1_*1_*1_")[0],e=n.userID.split("_1_*1_*1_")[1]),t.contestSelected&&t.contestSelected.CONTEST_ID&&(a=t.contestSelected.CONTEST_ID);var s=n.region||t.regionSelected.name,r=n.app||t.productSelected.name;i.get("getUserInfo?userID="+e+"&db="+s).success(function(n){n&&n.length>0?(t.user=n[0],o(e,s,r,a)):i.get("getUserInfoByName?userName="+e+"&db="+s).success(function(e){t.user=e[0],o(e[0].USERID,s,r)})})},t.chartConfig={options:{colors:["#1ab394"],plotOptions:{series:{cursor:"pointer",point:{events:{click:function(){console.info(this.category);var t=moment(this.category).format("YYYY-MM-DD");a(t)}}}}},chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},legend:{enabled:!1}},title:{text:"ROI Trend"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:t.chartSeries},t.chartValueConfig={options:{colors:["#1ab394","#f8ac59"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},legend:{enabled:!0}},title:{text:"Account & Cash Value Trend"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:t.chartSeries},t.chartLoginConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},legend:{enabled:!1}},title:{text:"Login Activities"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}},t.chartTradesConfig={options:{colors:["#1ab394","#127E68"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x",type:"column"},plotOptions:{column:{stacking:"normal",depth:10}},tooltip:{headerFormat:"<b>{point.key}</b><br>",pointFormat:'<span style="color:{series.color}">●</span> {series.name}: {point.y} / {point.stackTotal}'}},title:{text:"Daily Trades"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{title:{text:"Trades"}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},credits:{enabled:!1}},t.chartRankingConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x",type:"line"}},title:{text:"Daily Ranking"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{reversed:!0,title:{text:"Trades"}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},credits:{enabled:!1}},t.chartPieConfig={options:{colors:["#1ab394","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",style:{fontFamily:"'Unica One', sans-serif"},legend:{enabled:!0},plotBorderColor:"#606063",type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},tooltip:{pointFormat:"Qty: <b>{point.sign}{point.y}</b> <br> {point.percentage:.1f} %"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"{point.name}"}}},rangeSelector:{buttonTheme:{fill:"white",stroke:"#C0C0C8","stroke-width":1,states:{select:{fill:"#D0D0D8"}}}},scrollbar:{trackBorderColor:"#C0C0C8"}},title:{text:"Portfolio"}},t.chartRadarConfig={options:{colors:["#A5E6C0"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.0f}</b><br/><span style="color:{series.color}">Origin: <b>{point.ori:,.2f}</b>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:["Annual Sharpe Ratio (年化夏普比例)","Timed Maximum Drawdown (最大回撤日均值)","Draw-down (收益回撤控制)","Loss variance (损失波动控制)","Order loss (单笔损失控制)"],tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>${point.y:,.0f}</b><br/>'},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},t.chartRadarRiskPreferenceConfig={options:{colors:["#A5E6C0"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.0f}</b><br/><span style="color:{series.color}">Origin: <b>{point.ori:,.2f}</b>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:["Open Position Duration(持仓时间)","Default Qty Ratio(默认交易量比例)","Max Open Position(最大仓位)","Overnight Open Position(隔夜仓位)"],tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},t.chartRadarProfitConfig={options:{colors:["#A5E6C0"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.0f}</b><br/><span style="color:{series.color}">Origin: <b>{point.ori:,.2f}</b>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:["Biggest Win(最大獲利)","Roll Price(交易時段回報率)","Streak(連續盈利天數)"],tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},t.chartRadarFDTScoreConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.2f}</b><br/>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:["Risk Control(风险控制能力)","Profitability(盈利能力)","Steadiness(稳定性)","Activeness(活跃度)"],tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},n.userID&&(t.loadData(),t.hasUserId=!0)}]),angular.module("inspinia").controller("MT4ProfileCtrl",["$scope","$rootScope","$http","$stateParams",function(t,e,i,n){Highcharts.setOptions({global:{useUTC:!1}}),t.user={},t.userClosedList=[],t.closedList=[],i.get("getMT4Account?account="+n.accountID).success(function(e){t.acc=e[0];var i=e[0].trades,n=[];for(var a in i)"balance"!=i[a].type&&n.push(i[a]);t.userClosedList=n}),i.get("getMT4AccountDaily?userId="+n.accountID).success(function(e){var i=[];t.chartConfig.series=[];for(var n=0;n<e.length;n++)i.push([Date.parse(e[n].TRADE_DATE),100*(parseFloat(e[n].UNIT_PRICE)-1)]);e&&e.length>0&&t.dateRange&&t.dateRange.endDate&&(t.performance={BiggestWin:e[0].BiggestWin,BiggestLoss:e[0].BiggestLoss,WinRatio:e[0].WinRatio,TradesCount:e[0].TradesCount}),t.chartConfig.series.push({type:"area",name:"ROI",data:i})}),i.get("getMT4Score?userId="+n.accountID).success(function(e){t.chartRadarFDTScoreConfig.title={text:"FDT Score: "+e.fdt.score.toFixed(2)},t.chartRadarFDTScoreConfig.series=[];var i=[];i.push(e.riskCtrl.score),i.push(e.profitability.score),i.push(e.consistency.score),i.push(e.activity.score),t.chartRadarFDTScoreConfig.series=[{type:"area",name:"FDT Score",data:i,pointPlacement:"on"}]}),t.chartRadarFDTScoreConfig={options:{colors:["#1ab394"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",polar:!0,type:"line"},pane:{size:"80%"},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.2f}</b><br/>'}},title:{text:""},pane:{size:"80%"},xAxis:{categories:["Risk Control(风险控制能力)","Profitability(盈利能力)","Steadiness(稳定性)","Activeness(活跃度)"],tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},legend:{align:"right",verticalAlign:"top",y:70,layout:"vertical"}},t.chartConfig={options:{colors:["#1ab394"],plotOptions:{series:{cursor:"pointer",point:{events:{click:function(){console.info(this.category);var t=moment(this.category).format("YYYY-MM-DD");_filterTradeDate(t)}}}}},chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",zoomType:"x"},legend:{enabled:!1}},title:{text:"ROI Trend"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{labels:{enabled:!0},title:{text:null}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:t.chartSeries}}]),angular.module("inspinia").controller("CoreUserCtrl",["$scope","$rootScope","$http",function(t,e,i){function n(){for(var e=0;e<t.userList.length;e++)i.get("getUserInfo?app="+t.appSelected+"&db="+t.regionSelected+"&userID="+t.userList[e].user_id).success(function(e){if(e&&e.length>0){var i=e[0];t.usersMap[i.USERID]=i}})}var a=[{name:"台灣大學",key:501,region:"TW"},{name:"政治大學",key:502,region:"TW"},{name:"清華大學",key:505,region:"TW"},{name:"中山大學",key:508,region:"TW"},{name:"台灣師範大學",key:506,region:"TW"},{name:"中央大學",key:507,region:"TW"},{name:"交通大學",key:503,region:"TW"},{name:"中興大學",key:520,region:"TW"},{name:"輔仁大學",key:511,region:"TW"},{name:"東吳大學",key:518,region:"TW"},{name:"淡江大學",key:509,region:"TW"},{name:"東海大學",key:514,region:"TW"},{name:"逢甲大學",key:529,region:"TW"},{name:"實踐大學",key:566,region:"TW"},{name:"台北商業大學",key:538,region:"TW"},{name:"中正",key:513,region:"TW"},{name:"暨南大學",key:516,region:"TW"},{name:"銘傳大學",key:517,region:"TW"}],s=[{name:"北京大学",key:82,region:"CN"},{name:"清华大学",key:129,region:"CN"},{name:"人民大学",key:73,region:"CN"},{name:"北京师范大学",key:104,region:"CN"},{name:"北京航空航天大学",key:78,region:"CN"},{name:"对外贸易大学",key:77,region:"CN"},{name:"中央财经大学",key:50,region:"CN"},{name:"南开大学",key:"IN0102",region:"CN"},{name:"上海交通大学",key:"IN0061",region:"CN"},{name:"复旦大学",key:202,region:"CN"},{name:"上海财经大学",key:208,region:"CN"},{name:"南京大学",key:201,region:"CN"},{name:"浙江大学",key:231,region:"CN"},{name:"中山大学",key:205,region:"CN"},{name:"西南财经大学",key:228,region:"CN"},{name:"武汉大学",key:601,region:"CN"}];t.appTypes=["FX","FC","SC"],t.regions=["TW","IN","CN","US","AU","HK","GB","KE","ID","SG","PK","NZ","TR","CO","GR","FR","SE","PT","CZ","JP","CA","RU","MO","NO","IE","MY","BR","ZA","VE","AE","IQ","KZ","NP","UA","HR","GH","NG","AT","VN","EG","MC","IT","BE","KR","AZ","DE","AF","LT","KH","PH","SA","ES","ME","IL","KW","NL","PL","RO","AM","BT","KG","YE","JA","TH","AR","BD","MX","NI","SY","SR","ZW","null","SD","BN","IO","LR"],t.appSelected=t.appTypes[0],t.regionSelected=t.regions[0],t.limitList=20,t.usersMap={},t.active=30,t.setActive=function(e){t.active=e},t.isActive=function(e){return e===t.active},t.changeRegion=function(){"TW"==t.regionSelected?t.schools=a:"CN"==t.regionSelected&&(t.schools=s),t.schools.unshift({name:"All",key:"all",region:"All"}),t.schoolSelected=t.schools[0],t.changeSelect()},t.changeSelect=function(e){e&&(t.active=e),t.userList=[],t.totalUser=0,i.get("getCoreUserBySchool?app="+t.appSelected+"&db="+t.regionSelected+"&school_key="+(t.schoolSelected?t.schoolSelected.key:"all")).success(function(e){var i=[];for(var a in e)e[a].life>=t.active&&i.push(e[a]);t.totalUser=i.length,t.userList=i.slice(0,t.limitList),n()})}}]),angular.module("inspinia").controller("CMBCtrl",["$scope","$rootScope","$http",function(t,e,i){function n(){for(var e=0;e<t.userList.length;e++)i.get("getUserInfo?app=FC&db=CN&userID="+t.userList[e].userId).success(function(e){if(e&&e.length>0){var i=e[0];t.usersMap[i.USERID]=i}})}t.changeFt=function(){var e="Top"==t.sortTypeSelected?!0:!1,a="Random"==t.sortTypeSelected?!0:!1;i.get("getFinlinkList?type="+t.featureSelected.key+"&desc="+e+(a?"&random=true":"")+"&limit="+t.limitList+"&logincnt="+t.loginCount+"&tradecnt="+t.tradeCount+"&unitPrice="+t.unitPrice+"&mdd="+t.mdd).success(function(e){t.userList=e,n()})},t.limitList=10,t.loginCount=0,t.tradeCount=0,t.unitPrice=.95,t.mdd=-.15,t.features=[{key:"banker_trader_steady",name:"稳健交易型"},{key:"banker_trader_active",name:"积极交易型"},{key:"banker_trader_balanced",name:"平衡交易型"},{key:"banker_investor_steady",name:"稳健投资型"},{key:"banker_investor_active",name:"积极投资型"},{key:"banker_investor_balanced",name:"平衡投资型"},{key:"banker_risk_control",name:"风险控制型"},{key:"banker_marketing",name:"市场营销型"}],t.sortTypes=["Top","Tail","Random"],t.usersMap={},t.featureSelected=t.features[0],t.sortTypeSelected=t.sortTypes[0]}]),angular.module("inspinia").controller("TabsDemoCtrl",["$scope","$rootScope","$window",function(t){t.tabs=[{title:"Global",content:"Dynamic content 1"},{title:"China",content:"Dynamic content 2",disabled:!0}],t.click=function(){setTimeout(function(){window.dispatchEvent(new Event("resize"))},100)}}]),angular.module("inspinia").controller("SeedUserListCrol",["$scope","$rootScope","$http","$filter",function(t,e,i,n){t.rowCollection=[],t.historyFilePath="getSeedList?format=csv",t.historyFileName=n("date")(new Date,"yyyy-MM-dd")+"_seed.csv",t.loadSeedData=function(){i.get("getSeedList").success(function(e){t.userList=e}),i.get("getSeedSummary").success(function(e){t.summaryList=e;var i=[];for(var n in e)i.push({name:e[n].SYMBOL,y:e[n].QTY,pnl:e[n].PNL});t.chartPieConfig.series=[{type:"pie",name:"",data:i,pointPlacement:"on"}]}),i.get("getSeedCount").success(function(e){t.summaryObj=e})},t.loadSeedData(),t.chartPieConfig={options:{colors:["#1ab394","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",style:{fontFamily:"'Unica One', sans-serif"},legend:{enabled:!0},plotBorderColor:"#606063",type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},tooltip:{pointFormat:"Qty: <b>{point.y}</b> <br> PNL: <b>{point.pnl}</b> <br> {point.percentage:.1f} %"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"{point.name}"}}},rangeSelector:{buttonTheme:{fill:"white",stroke:"#C0C0C8","stroke-width":1,states:{select:{fill:"#D0D0D8"}}}},scrollbar:{trackBorderColor:"#C0C0C8"}},title:{text:"Symbols"}}}]),angular.module("inspinia").controller("UserRankingCrol",["$scope","$rootScope","$http",function(t,e,i){var n=[{name:"FX",id:"1"},{name:"FC",id:"2"},{name:"SC",id:"3"}],a=[];t.$watch(function(){return e.selectedSchool},function(){e.selectedSchool&&(t.products="CN"==e.regionSelected?n:[n[0]],t.selected=t.products[0],t.loadSchoolData(e.selectedSchool))},!0),t.loadSchoolData=function(n){t.loaded=!1,t.userRankList=[],t.rankListLoading=!0,i.get("getUserRanking?school_key="+n+"&app="+t.selected.name+"&db="+e.regionSelected).success(function(e){a=e,t.rankListLoading=!1,t.userRankList=e.slice(0,10)})},t.loadMore=function(){t.userRankList=a},t.changeProduct=function(){t.loadSchoolData(e.selectedSchool)}}]),angular.module("inspinia").controller("SchoolCtrl",["$scope","$rootScope","$http",function(t,e,i){function n(n){i.get("getSchools?db="+n).success(function(i){for(var a in i)if(i[a].school_name&&(i[a].school_region&&t.regions.indexOf(i[a].school_region)<0&&(e.roleRegion==i[a].school_region||"All"==e.roleRegion||"Overseas"==e.roleRegion&&"CN"!=i[a].school_region)&&t.regions.push(i[a].school_region),s.indexOf(i[a].school_key)<0&&"INOTHER"!=i[a].school_key&&"825"!=i[a].school_key&&"672"!=i[a].school_key)){if("CN"==n&&"CN"!=i[a].school_region)continue;(i[a].school_key==e.roleSchool||"All"==e.roleSchool)&&(t.schoolsList.push(i[a]),s.push(i[a].school_key))}console.info(t.regions)})}function a(){t.totalUser=0,t.monthUserFX=0,t.weekUserFX=0,t.monthUserFC=0,t.weekUserFC=0,t.monthUserSC=0,t.weekUserSC=0,t.school.selected=void 0,t.core30=0,t.core60=0,t.core90=0,t.coreFC30=0,t.coreFX30=0,t.coreSC30=0,t.coreFC60=0,t.coreFX60=0,t.coreSC60=0,t.coreFC90=0,t.coreFX90=0,t.coreSC90=0}t.regions=[],t.schoolsList=[];var s=[];t.schools=[],t.school={},t.compareList=[],n(),n("CN"),t.addSchool=function(){t.school.selected="Please select a school to compare ...",t.isCompard=!0},t.loadSchoolData=function(e){i.get("getSchoolUserGrowth?school_key="+e.school_key+"&db="+e.school_region).success(function(i){t.isCompard||(t.chartConfig.series=[]);for(var n=[],a=0;a<i.length;a++)n.push([Date.parse(i[a].date),i[a].total_user_num]);t.chartConfig.series.push({type:"spline",name:e.school_name,data:n})})},t.onSearch=function(){},t.loadCountData=function(e){a(),i.get("getSchoolUserCountByApp?app=FX&school_key="+e.school_key+"&db="+e.school_region).success(function(e){var i=e;t.totalUser=i.totalUser,t.monthUserFX=i.monthlyActiveUser,t.weekUserFX=i.weeklyActiveUser}),"CN"==e.school_region?(t.isChina=!0,i.get("getSchoolUserCountByApp?app=SC&school_key="+e.school_key+"&db="+e.school_region).success(function(e){var i=e;t.monthUserSC=i.monthlyActiveUser,t.weekUserSC=i.weeklyActiveUser}),i.get("getSchoolUserCountByApp?app=FC&school_key="+e.school_key+"&db="+e.school_region).success(function(e){var i=e;t.totalUser=i.totalUser,t.monthUserFC=i.monthlyActiveUser,t.weekUserFC=i.weeklyActiveUser}),i.get("getCoreUserBySchool?app=FC&school_key="+e.school_key+"&db="+e.school_region).success(function(e){var i=0,n=0,a=0;for(var s in e)e[s].life>30&&i++,e[s].life>60&&n++,e[s].life>90&&a++;t.coreFC30=i,t.coreFC60=n,t.coreFC90=a}),i.get("getCoreUserBySchool?app=FX&school_key="+e.school_key+"&db="+e.school_region).success(function(e){var i=0,n=0,a=0;for(var s in e)e[s].life>30&&i++,e[s].life>60&&n++,e[s].life>90&&a++;t.coreFX30=i,t.coreFX60=n,t.coreFX90=a}),i.get("getCoreUserBySchool?app=SC&school_key="+e.school_key+"&db="+e.school_region).success(function(e){var i=0,n=0,a=0;for(var s in e)e[s].life>30&&i++,e[s].life>60&&n++,e[s].life>90&&a++;t.coreSC30=i,t.coreSC60=n,t.coreSC90=a})):(t.isChina=!1,i.get("getCoreUserBySchool?app=FX&school_key="+e.school_key+"&db="+e.school_region).success(function(e){var i=0,n=0,a=0;for(var s in e)e[s].life>30&&i++,e[s].life>60&&n++,e[s].life>90&&a++;t.core30=i,t.core60=n,t.core90=a}))},t.onSchoolSelect=function(i){t.count_show=!0,t.loadSchoolData(i),t.loadCountData(i),e.selectedSchool=i.school_key},t.onRegionSelect=function(i){if(a(),t.schools=[],e.regionSelected=i,t.school_show=!0,t.schoolsList.length>0){"All"==e.roleSchool&&t.schools.push({school_key:"all",school_name:"All schools"});for(var n in t.schoolsList)t.schoolsList[n].school_region&&t.schoolsList[n].school_region==i&&(t.schools.push(t.schoolsList[n]),t.schools[0].school_region=t.schoolsList[n].school_region)}},t.chartConfig={chart:{backgroundColor:null,zoomType:"x"},title:{text:"User Growth"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{title:{text:"Users"},min:0},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:t.chartSeries}
}]),angular.module("inspinia").controller("QuantCrol",["$scope","$rootScope","$http",function(t,e,i){t.chartConfig={options:{chart:{backgroundColor:null,zoomType:"x"},title:{text:"User Growth"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{title:{text:"Users"},min:0},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"}},legend:{enabled:!0},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1}},t.chartConfig.series=[],console.info("quant..."),i.get("getSymbol?symbol=EURJPY").success(function(e){for(var i=[],n=[],a=[],s=19;s<e.length;s++)i.push([Date.parse(e[s].KEYTIME),e[s].CLOSE_PRICE-130]),n.push([Date.parse(e[s].KEYTIME),e[s].max20-130]),a.push([Date.parse(e[s].KEYTIME),e[s].min10-130]);t.chartConfig.series.push({type:"spline",name:"Close Price",data:i},{type:"spline",name:"Max 20",data:n},{type:"spline",name:"Min10",data:a})})}]),angular.module("inspinia").controller("ContestCrol",["$scope","$rootScope","$http",function(t,e,i){var n=[{name:"FX",id:"1"},{name:"FC",id:"2"},{name:"SC",id:"3"}];t.$watch(function(){return e.selectedSchool},function(){e.selectedSchool&&(t.products="CN"==e.regionSelected?n:[n[0]],t.selected=t.products[0],t.loadContentData(e.selectedSchool))},!0),t.loadContentData=function(n){t.contestList=[],i.get("getContestByApp?school_key="+n+"&app="+t.selected.name+"&db="+e.regionSelected).success(function(e){t.contestList=e})},t.changeProduct=function(){t.loadContentData(e.selectedSchool)}}]);var app=angular.module("inspinia");app.controller("MapCtrl",["$scope","$location","$http",function(t,e,i){t.data=function(){i.get("getRegionDist?file=Global_Country_TU").success(function(e){e=e.data.Global_Country_TU;var i={};t.markers=[];for(var n=0;n<e.length;n++)e[n].Country&&(i[e[n].Country]=parseInt(e[n]["Total Users"])),"HK"==e[n].Country&&t.markers.push({latLng:[22.15,114.1],name:"Hong Kong",values:parseInt(e[n]["Total Users"])});t.datamap=i})}}]),app.directive("map",function(){return{restrict:"EAC",link:function(t,e){var i=null;t.$watch("datamap",function(){console.log(i),t.datamap&&($(e).width("auto"),$(e).height(400),i=$(e).vectorMap({onRegionClick:function(t,e){console.info(e)},map:"world_mill_en",backgroundColor:"transparent",regionStyle:{initial:{fill:"#e4e4e4","fill-opacity":1,stroke:"none","stroke-width":0,"stroke-opacity":0}},series:{regions:[{values:t.datamap,scale:["#1ab394","#ED5565"],normalizeFunction:"polynomial"}]},onMarkerTipShow:function(e,i,n){i.html(i.html()+": "+(t.markers[n]?t.markers[n].values:""))},onRegionTipShow:function(e,i,n){i.html(i.html()+": "+(t.datamap[n]?t.datamap[n]:""))},markers:t.markers,markerStyle:{initial:{fill:"#F8E23B",stroke:"#383f47"}}}))})}}}),angular.module("inspinia").controller("IncUserListCrol",["$scope","$rootScope","$http","$filter",function(t,e,i,n){t.rowCollection=[],t.historyFilePath="getIncuList?format=csv",t.historyFileName=n("date")(new Date,"yyyy-MM-dd")+"_incubatee.csv",t.loadIncuData=function(){i.get("getIncuList").success(function(e){t.userList=e}),i.get("getIncuSummary").success(function(e){t.summaryList=e;var i=[];for(var n in e)i.push({name:e[n].SYMBOL,y:e[n].QTY,pnl:e[n].PNL});t.chartPieConfig.series=[{type:"pie",name:"",data:i,pointPlacement:"on"}]}),i.get("getIncuCount").success(function(e){t.summaryObj=e})},t.loadIncuData(),t.chartPieConfig={options:{colors:["#1ab394","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:"rgba(255, 255, 255, 0.1)",style:{fontFamily:"'Unica One', sans-serif"},legend:{enabled:!0},plotBorderColor:"#606063",type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},tooltip:{pointFormat:"Qty: <b>{point.y}</b> <br> PNL: <b>{point.pnl}</b> <br> {point.percentage:.1f} %"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"{point.name}"}}},rangeSelector:{buttonTheme:{fill:"white",stroke:"#C0C0C8","stroke-width":1,states:{select:{fill:"#D0D0D8"}}}},scrollbar:{trackBorderColor:"#C0C0C8"}},title:{text:"Symbols"}}}]),angular.module("inspinia").controller("VennCtrl",["$scope","$http","$rootScope",function(t,e,i){t.loadData=function(n){e.get("getDataFromFile?file="+n).success(function(e){e=e.data;var n=[{sets:["Mainland_FX"],size:e.China_FX_FC_SC_TU[0].China_FX},{sets:["Mainland_FC"],size:e.China_FX_FC_SC_TU[0].China_FC},{sets:["Mainland_SC"],size:e.China_FX_FC_SC_TU[0].China_SC},{sets:["Mainland_FX","Mainland_FC"],size:e.China_FX_FC_SC_TU[0].China_FX_FC},{sets:["Mainland_FX","Mainland_SC"],size:e.China_FX_FC_SC_TU[0].China_FX_SC},{sets:["Mainland_FC","Mainland_SC"],size:e.China_FX_FC_SC_TU[0].China_FC_SC},{sets:["Mainland_FX","Mainland_FC","Mainland_SC"],size:e.China_FX_FC_SC_TU[0].China_FX_FC_SC}];i.overlapUsers=e.China_FX_FC_SC_TU[0].China_FX_FC_SC,t.vennData=n,setTimeout(function(){var t=d3.select("#venn"),e=d3.select("body").append("div").attr("class","venntooltip");t.selectAll("g").on("mouseover",function(i){venn.sortAreas(t,i),e.transition().duration(400).style("opacity",.9),e.text(i.size+" users");var n=d3.select(this).transition("tooltip").duration(400);n.select("path").style("stroke-width",3).style("fill-opacity",1==i.sets.length?.4:.1).style("stroke-opacity",1)}).on("mousemove",function(){e.style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){e.transition().duration(400).style("opacity",0);var i=d3.select(this).transition("tooltip").duration(400);i.select("path").style("stroke-width",0).style("fill-opacity",1==t.sets.length?.25:0).style("stroke-opacity",0)})},300)})}}]),angular.module("inspinia").controller("ChartCtrl",["$scope","$http","$rootScope",function(t,e,i){t.$on("changeSelector",function(t,e){console.info(e)}),i.TotalGlobalTrendObj={},i.TotalChinaTrendObj={},t.loadData=function(n){e.get("getDataFromFile?file="+n).success(function(e){e=e.data;var a=n.split("|");t.chartConfig.series=[];for(var s=0;s<a.length;s++){for(var o=[],r=0;r<e[a[s]].length;r++)o.push([Date.parse(e[a[s]][r].date),parseInt(e[a[s]][r][t.valueName])]);"All"==i.roleRegion?t.chartConfig.series.push({type:"area",name:t[a[s]],data:o}):"CN"==i.roleRegion&&(a[s].indexOf("China")>=0||a[s].indexOf("Overlap")>=0)?t.chartConfig.series.push({type:"area",name:t[a[s]],data:o}):"CN"!=i.roleRegion&&a[s].indexOf("Global")>=0&&t.chartConfig.series.push({type:"area",name:t[a[s]],data:o})}if("Date_TU_Global|Date_TU_China"==n){var l=e.Date_TU_Global,c=e.Date_TU_China;i.totalUsersChina=parseInt(c[c.length-1][t.valueName]),i.totalUsersGlobal=parseInt(l[l.length-1][t.valueName])}})},t.chartConfig={options:{},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{title:{text:"Users"},min:0},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:t.chartSeries}}]),angular.module("inspinia").controller("ChartComLineCtrl",["$scope","$http",function(t,e){t.loadData=function(i){e.get("getDataFromFile?file="+i).success(function(e){e=e.data;var i=[],n=[],a={};a={Others:0};for(var s={},o=0;o<e.Global_Country_TU.length&&5>o;o++)i.push(e.Global_Country_TU[o]),n.push(e.Global_Country_TU[o].Country),a[e.Global_Country_TU[o].Country]=0;for(var o=0;o<e.Date_Global_Country_TU.length;o++)if(n.indexOf(e.Date_Global_Country_TU[o].country)>=0){"TW"==e.Date_Global_Country_TU[o].country&&console.info(e.Date_Global_Country_TU[o]);var r=a[e.Date_Global_Country_TU[o].country]+parseInt(e.Date_Global_Country_TU[o]["Total Users"]);a[e.Date_Global_Country_TU[o].country]=r;var l=[Date.parse(e.Date_Global_Country_TU[o].date),r];s[e.Date_Global_Country_TU[o].country]&&s[e.Date_Global_Country_TU[o].country].length>0?s[e.Date_Global_Country_TU[o].country].push(l):(s[e.Date_Global_Country_TU[o].country]=[],s[e.Date_Global_Country_TU[o].country].push(l))}else{var r=a.Others+parseInt(e.Date_Global_Country_TU[o]["Total Users"]);a.Others=r;var l=[Date.parse(e.Date_Global_Country_TU[o].date),r];s.Others&&s.Others.length>0?s.Others.push(l):(s.Others=[],s.Others.push(l))}var c=[];n.push("Others");for(var d in n)c.push({name:n[d],data:s[n[d]]});t.chartConfig.series=c})},t.chartConfig={chart:{backgroundColor:null,zoomType:"x"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{title:{text:"Users"},min:0},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:t.chartSeries}}]),angular.module("inspinia").controller("ChartAreaCtrl",["$scope","$http","$rootScope",function(t,e,i){i.activeGlobalTrendObj={},i.activeChinaTrendObj={},t.loadData=function(i){e.get("getDataFromFile?file="+i).success(function(e){e=e.data;var n=i.split("|");t.chartConfig.series=[];for(var a=0;a<n.length;a++){for(var s=[],o=0;o<e[n[a]].length;o++)s.push([Date.parse(e[n[a]][o].date),parseInt(e[n[a]][o][t.valueName])]);t.chartConfig.series.push({type:"area",name:t[n[a]],data:s})}})},t.chartConfig={chart:{backgroundColor:null,zoomType:"x"},options:{plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}}},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"}},yAxis:{title:{text:"Users"},min:0},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},plotOptions:{area:{color:"#0038ff",marker:{enabled:null},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},series:t.chartSeries}}]),angular.module("inspinia").controller("ChartActiveCtrl",["$scope","$http","$rootScope",function(t,e,i){t.loadData=function(){e.get("getActiveUserPer").success(function(e){for(var n=[],a=[],s=0;s<e.global.length;s++)n.push([Date.parse(e.global[s].date),e.global[s].Percentage]);for(var s=0;s<e.china.length;s++)a.push([Date.parse(e.china[s].date),e.china[s].Percentage]);"All"==i.roleRegion?t.chartConfig.series=[{type:"area",name:"Mainland %",data:a},{type:"area",name:"Overseas %",data:n}]:"CN"==i.roleRegion?t.chartConfig.series=[{type:"area",name:"Mainland %",data:a}]:"CN"!=i.roleRegion&&(t.chartConfig.series=[{type:"area",name:"Overseas %",data:n}])})},t.chartConfig={options:{colors:["#1ab394","#127E68"],chart:{backgroundColor:null,zoomType:"x"},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} %"}},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b. %e",year:"%b"},title:{text:"Date"},floor:Date.UTC(2015,4,17)},yAxis:{title:{text:"Active Users%"},min:0},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.f} users"},legend:{enabled:!0},credits:{enabled:!1},series:t.chartSeries}}]),angular.module("inspinia").controller("BoxCtrl",["$scope","$http","$rootScope","$filter","$cookieStore",function(t,e,i,n,a){i.lastUpdate=moment().subtract(1,"days").format("YYYY-MM-DD");var s=moment().subtract(2,"days").format("YYYY-MM-DD");t.loadContestCount=function(){e.get("getContestCount").success(function(e){t.contentCount=e[0].count}),e.get("getStatFromFile?date="+i.lastUpdate+"&oldDate="+s).success(function(e){t.stats=e}),e.get("getCoreUserTotal?app=FX&db=TW").success(function(e){t.cuGlobal=e.length}),e.get("getCoreUserTotal?app=FX&db=CN").success(function(e){t.cuChinaFX=e.length}),e.get("getCoreUserTotal?app=FC&db=CN").success(function(e){t.cuChinaFC=e.length}),e.get("getCoreUserTotal?app=SC&db=CN").success(function(e){t.cuChinaSC=e.length})},i.logout=function(){a.remove("connect.sid"),location.href="logout"}}]),$(document).ready(function(){function t(){var t=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",t+"px");var e=$("nav.navbar-default").height(),i=$("#page-wrapper").height();e>i&&$("#page-wrapper").css("min-height",e+"px"),i>e&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&$("#page-wrapper").css("min-height",$(window).height()-60+"px")}$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||t()}),setTimeout(function(){t()})}),$(function(){$(window).bind("load resize",function(){$(this).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")})}),angular.module("inspinia").directive("sideNavigation",["$timeout",function(t){return{restrict:"A",link:function(e,i){e.$watch("authentication.user",function(){t(function(){i.metisMenu()})})}}}]).directive("minimalizaSidebar",["$timeout",function(t){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-init="minimalize()" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',controller:["$scope","$element",function(e){e.minimalize=function(){$(window).width()>=600?angular.element("body").toggleClass("mini-navbar"):angular.element("body").hasClass("body-small")&&angular.element("body").toggleClass("mini-navbar"),!angular.element("body").hasClass("mini-navbar")||angular.element("body").hasClass("body-small")?(angular.element("#side-menu").hide(),t(function(){angular.element("#side-menu").fadeIn(500)},100)):angular.element("#side-menu").removeAttr("style")}}]}}]),angular.module("inspinia").run(["$templateCache",function(t){t.put("app/main/main.html",'<div class="wrapper wrapper-content animated fadeInRight" ng-hide="$root.dashboardShow"><h3>Redirecting ...</h3></div><div class="wrapper wrapper-content animated fadeInRight" ng-if="$root.dashboardShow"><div ng-include="\'components/box/sumbox.html\'" ng-if="$root.roleRegion ==\'All\'"></div><div class="row chartPanel"><div ng-include="\'components/chart/chart_tu.html\'"></div></div><div class="row chartPanel" ng-if="$root.roleRegion ==\'All\'"><div ng-include="\'components/map/map.html\'"></div><div ng-include="\'components/chart/chart_global_dist.html\'"></div></div><div class="row chartPanel" ng-if="$root.roleRegion ==\'CN\' || $root.roleRegion ==\'All\'"><div ng-include="\'components/chart/chart_fx_fc_sc.html\'"></div></div><div class="row chartPanel" ng-if="$root.roleRegion ==\'CN\' || $root.roleRegion ==\'All\'"><div ng-include="\'components/chart/overlap.html\'"></div><div ng-include="\'components/chart/venn.html\'"></div></div><div ng-controller="TabsDemoCtrl" class="tab-bar"><tabset><tab heading="Mainland" ng-click="click()" ng-if="$root.roleRegion ==\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_cn_nu.html\'"></div></div></tab><tab heading="Taiwan" ng-click="click()" ng-if="$root.roleRegion !=\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_tw_nu.html\'"></div></div></tab><tab heading="Others Region" ng-click="click()" ng-if="$root.roleRegion !=\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_gb_nu.html\'"></div></div></tab></tabset></div><div ng-controller="TabsDemoCtrl" class="tab-bar"><tabset><tab heading="Mainland FX" ng-click="click()" ng-if="$root.roleRegion ==\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_cn_au_fx.html\'"></div></div></tab><tab heading="Mainland FC" ng-click="click()" ng-if="$root.roleRegion ==\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_cn_au_fc.html\'"></div></div></tab><tab heading="Mainland SC" ng-click="click()" ng-if="$root.roleRegion ==\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_cn_au_sc.html\'"></div></div></tab><tab heading="Taiwan" ng-click="click()" ng-if="$root.roleRegion !=\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_tw_au.html\'"></div></div></tab><tab heading="Others Region" ng-click="click()" ng-if="$root.roleRegion !=\'CN\' || $root.roleRegion ==\'All\'"><div class="row chartPanel"><div ng-include="\'components/chart/chart_gb_au.html\'"></div></div></tab></tabset></div></div>'),t.put("app/public/show.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class="row chartPanel" ng-if="$root.roleRegion ==\'All\'"><div ng-include="\'components/map/map.html\'"></div></div></div>'),t.put("components/box/sumbox.html",'<div class="row" ng-controller="BoxCtrl"><div class="col-lg-2"><div class="ibox float-e-margins"><div class="ibox-title"><span class="label label-success pull-right">All Apps</span><h5>Total Users</h5></div><div class="ibox-content"><h1 class="no-margins" ng-bind="(stats.totalUser|number)">0</h1><small>Users</small></div></div></div><div class="col-lg-2"><a href="#/index/core"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Mainland</h5></div><div class="ibox-content"><h1 class="no-margins" ng-bind="((cuChinaFX + cuChinaFC + cuChinaSC)|number)"><i class="fa fa-spinner fa-spin"></i></h1><small>Core Users</small> <span class="stat-percent font-bold text-success ng-binding" ng-bind="((cuChinaFX + $cuChinaFC + cuChinaSC)/ ($root.totalUsersChina) * 100|number:2) + \'%\'"></span></div></div></a></div><div class="col-lg-2"><a href="#/index/core"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Overseas</h5></div><div class="ibox-content"><h1 class="no-margins" ng-bind="(cuGlobal|number)"><i class="fa fa-spinner fa-spin"></i></h1><small>Core Users</small> <span class="stat-percent font-bold text-success ng-binding" ng-bind="(cuGlobal/ ($root.totalUsersGlobal) * 100|number:2) + \'%\'"></span></div></div></a></div><div class="col-lg-2"><div class="ibox float-e-margins"><div class="ibox-title"><span class="label label-info pull-right">Daily</span><h5>Active User</h5></div><div class="ibox-content"><h1 class="no-margins" ng-bind="(stats.activeUser |number) || \'Calculating...\'">0</h1><span class="stat-percent font-bold text-success" ng-bind="(stats.activePer|number:2) + \'%\'"></span> <span class="font-bold" ng-class="stats.activeTrend > 0?\'text-danger\':\'text-navy\'">{{stats.activeTrend|number:2}}% <i class="fa" ng-class="stats.activeTrend > 0?\'fa-level-up\':\'fa-level-down\'"></i></span></div></div></div><div class="col-lg-2"><div class="ibox float-e-margins"><div class="ibox-title"><span class="label label-primary pull-right">Daily</span><h5>New Users</h5></div><div class="ibox-content"><h1 class="no-margins" ng-bind="(stats.newUser|number) || \'Calculating...\'">0</h1><span class="stat-percent font-bold text-navy" ng-bind="(stats.newPer |number:2) + \'%\'"><i class="fa fa-bolt"></i></span> <span class="font-bold" ng-class="stats.newTrend >0?\'text-danger\':\'text-navy\'">{{stats.newTrend |number:2}}% <i class="fa" ng-class="stats.newTrend >0?\'fa-level-up\':\'fa-level-down\'"></i></span></div></div></div><div class="col-lg-2"><div class="ibox float-e-margins"><div class="ibox-title"><span class="label label-danger pull-right">Overseas</span><h5>Contest</h5></div><div class="ibox-content"><h1 class="no-margins" ng-init="loadContestCount()" ng-bind="(contentCount |number)">0</h1><small>Contests Held</small></div></div></div></div>'),t.put("components/chart/chart_cn_au_fc.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_AU_China_FC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Date_AU_China_FC=\'Mainland Daily Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_AU_China_FC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Week_AU_China_FC=\'Mainland Weekly Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_AU_China_FC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Month_AU_China_FC=\'Mainland Monthly Active Users\'"></div>'),t.put("components/chart/chart_cn_au_fx.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_AU_China_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Date_AU_China_FX=\'Mainland Daily Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_AU_China_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Week_AU_China_FX=\'Mainland Weekly Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_AU_China_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Month_AU_China_FX=\'Mainland Monthly Active Users\'"></div>'),t.put("components/chart/chart_cn_au_sc.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_AU_China_SC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Date_AU_China_SC=\'Mainland Daily Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_AU_China_SC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Week_AU_China_SC=\'Mainland Weekly Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_AU_China_SC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Mainland\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Month_AU_China_SC=\'Mainland Monthly Active Users\'"></div>'),t.put("components/chart/chart_cn_nu.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_NU_China\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily New Users\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Date_NU_China=\'Mainland Daily New Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_NU_China\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly New Users\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Week_NU_China=\'Mainland Weekly New Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_NU_China\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly New Users\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Month_NU_China=\'Mainland Monthly New Users\'"></div>'),t.put("components/chart/chart_fx_fc_sc.html",'<div class="col-md-12" ng-controller="ChartCtrl"><highchart ng-init="loadData(\'Date_TU_China_FX|Date_TU_China_FC|Date_TU_China_SC\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Mainland FX FC SC\'"> <input type="hidden" ng-init="valueName=\'Total Users\'"> <input type="hidden" ng-init="Date_TU_China_FX=\'Mainland FX\'"> <input type="hidden" ng-init="Date_TU_China_FC=\'Mainland FC\'"> <input type="hidden" ng-init="Date_TU_China_SC=\'Mainland SC\'"></div>'),t.put("components/chart/chart_gb_au.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_AU_Global_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overseas\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Date_AU_Global_FX=\'Overseas Daily Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_AU_Global_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overseas\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Week_AU_Global_FX=\'Overseas Weekly Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_AU_Global_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overseas\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Month_AU_Global_FX=\'Overseas Monthly Active Users\'"></div>'),t.put("components/chart/chart_gb_nu.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_NU_Global\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily New Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overseas\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Date_NU_Global=\'Overseas Daily New Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_NU_Global\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly New Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overseas\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Week_NU_Global=\'Overseas Weekly New Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_NU_Global\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly New Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overseas\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Month_NU_Global=\'Overseas Monthly New Users\'"></div>'),t.put("components/chart/chart_global_dist.html",'<div ng-controller="ChartComLineCtrl"><div class="col-md-6"><highchart ng-init="loadData(\'Date_Global_Country_TU|Global_Country_TU\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Global Distribution\'"></div></div>'),t.put("components/chart/chart_tu.html",'<div class="row"><div class="col-lg-6" ng-controller="ChartCtrl"><highchart ng-init="loadData(\'Date_TU_Global|Date_TU_China\')" config="chartConfig" class="span9"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Total User Growth\'"> <input type="hidden" ng-init="valueName=\'Total Users\'"> <input type="hidden" ng-init="Date_TU_Global=\'Overseas\'"> <input type="hidden" ng-init="Date_TU_China=\'Mainland\'"> <input type="hidden" ng-init="chartType=\'area\'"> <input type="hidden" ng-init="chartConfig.colors=[\'#0000ff\',\'ff0066\',\'2b908f\']"></div><div class="col-lg-6" ng-controller="ChartActiveCtrl"><highchart ng-init="loadData()" config="chartConfig" class="span9"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Active User Percentage\'"></div></div>'),t.put("components/chart/chart_tw_au.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_AU_TW_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Taiwan\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Date_AU_TW_FX=\'Taiwan Daily Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_AU_TW_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Taiwan\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Week_AU_TW_FX=\'Taiwan Weekly Active Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_AU_TW_FX\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly Active Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Taiwan\'"> <input type="hidden" ng-init="valueName=\'Active Users\'"> <input type="hidden" ng-init="Month_AU_TW_FX=\'Taiwan Monthly Active Users\'"></div>'),t.put("components/chart/chart_tw_nu.html",'<div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Date_NU_TW\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Daily New Users\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Date_NU_TW=\'TW Daily New Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Week_NU_TW\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Weekly New Users\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Week_NU_TW=\'TW Weekly New Users\'"></div><div class="col-md-4" ng-controller="ChartAreaCtrl"><highchart ng-init="loadData(\'Month_NU_TW\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'Monthly New Users\'"> <input type="hidden" ng-init="valueName=\'New Users\'"> <input type="hidden" ng-init="Month_NU_TW=\'TW Monthly New Users\'"></div>'),t.put("components/chart/overlap.html",'<div class="col-md-6" ng-controller="ChartCtrl"><highchart ng-init="loadData(\'FX_FC_Overlap|FX_SC_Overlap|FC_SC_Overlap|FX_FC_SC_Overlap\')" config="chartConfig"></highchart><input type="hidden" ng-init="chartConfig.title.text=\'FX FC SC Users\'"> <input type="hidden" ng-init="chartConfig.subtitle.text=\'Overlaping Users\'"> <input type="hidden" ng-init="valueName=\'Common Users\'"> <input type="hidden" ng-init="FX_FC_Overlap=\'FX&FC\'"> <input type="hidden" ng-init="FX_SC_Overlap=\'FX&SC\'"> <input type="hidden" ng-init="FC_SC_Overlap=\'FC&SC\'"> <input type="hidden" ng-init="FX_FC_SC_Overlap=\'FX&FC&SC\'"></div>'),t.put("components/chart/venn.html",'<div class="col-md-6 venn-panel" ng-controller="VennCtrl"><div id="venn" venn="vennData" ng-init="loadData(\'China_FX_FC_SC_TU\')"></div></div>'),t.put("components/common/content.html",'<div id="wrapper"><div ng-include="\'components/common/navigation.html\'"></div><div id="page-wrapper" class="gray-bg {{$state.current.name}}"><div ng-include="\'components/common/topnavbar.html\'"></div><div ui-view=""></div><div ng-include="\'components/common/footer.html\'"></div></div></div>'),t.put("components/common/footer.html",'<div class="footer"><div class="pull-right">FDT Dashboard v1.0</div><div><strong>Copyright</strong> FDT &copy; 2016</div></div>'),t.put("components/common/ibox_tools.html",'<div class="ibox-tools dropdown" dropdown=""><a ng-click="showhide()"><i class="fa fa-chevron-up"></i></a> <a class="dropdown-toggle" href="" dropdown-toggle=""><i class="fa fa-wrench"></i></a><ul class="dropdown-menu dropdown-user"><li><a href="">Config option 1</a></li><li><a href="">Config option 2</a></li></ul><a ng-click="closebox()"><i class="fa fa-times"></i></a></div>'),t.put("components/common/navigation.html",'<nav class="navbar-default navbar-static-side" role="navigation"><div class="sidebar-collapse"><ul side-navigation="" class="nav metismenu" id="side-menu"><li class="nav-header"><div class="dropdown profile-element open"><span><img alt="image" style="width:80px" src="assets/images/fdt_bull.png"></span> <a data-toggle="dropdown" class="dropdown-toggle" href="#" aria-expanded="false"><span class="clear"><span class="block m-t-xs"><strong class="font-bold">{{$root.userNick}}</strong></span> <span class="text-muted text-xs block"><b class="caret"></b></span></span></a></div><div class="logo-element"><img alt="image" class="" src="assets/images/fdt_bull.png" style="width: 40px;"></div></li><li ui-sref-active="active" ng-if="$root.dashboardShow"><a ui-sref="index.main"><i class="fa fa-dashboard"></i> <span class="nav-label">Dashboard</span></a></li><li ui-sref-active="active" ng-if="$root.schoolShow"><a ui-sref="index.school"><i class="fa fa-graduation-cap"></i> <span class="nav-label">School</span></a></li><li ui-sref-active="active" ng-if="$root.simShow || $root.incuShow || $root.seedShow"><a ui-sref="index.search"><i class="fa fa-user"></i> <span class="nav-label">Users</span></a><ul class="nav nav-second-level collapse"><li><a ui-sref="index.search" ng-if="$root.simShow">Sim Users</a></li><li><a ui-sref="index.incu" ng-if="$root.incuShow">Incubatee</a></li><li><a ui-sref="index.seed" ng-if="$root.seedShow">Seed</a></li></ul></li><li ui-sref-active="active" ng-if="$root.seedShow"><a ui-sref="index.user"><i class="fa fa-cube"></i> <span class="nav-label">FDT Score Ranking</span></a><ul class="nav nav-second-level collapse"><li><a ui-sref="index.user" ng-if="$root.seedShow">FDT Score Ranking</a></li></ul></li></ul></div></nav>'),t.put("components/common/topnavbar.html",'<div class="row border-bottom" ng-controller="BoxCtrl"><nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0"><div class="navbar-header"><span minimaliza-sidebar=""></span><form role="search" class="navbar-form-custom" method="post" action=""><div class="form-group"><input type="text" placeholder="" class="form-control" name="top-search" id="top-search"></div></form></div><ul class="nav navbar-top-links navbar-right"><li><span class="m-r-sm text-muted welcome-message" ng-bind="\'Last Updated Time : \' + $root.lastUpdate"></span></li><li><i class="fa fa-user"></i> <span class="m-r-sm text-muted welcome-message" ng-bind="$root.userNick"></span></li><li><a href="#" ng-click="logout()"><i class="fa fa-sign-out"></i> Log out</a></li></ul></nav></div>'),t.put("components/incu/user_list.html",'<div class="wrapper wrapper-content animated fadeInRight" ng-hide="$root.incuShow"><h3>No access for this account</h3></div><div class="wrapper wrapper-content animated fadeInRight" ng-controller="IncUserListCrol" ng-if="$root.incuShow"><div class="row"><div class="col-lg-6"><div class="col-xs-8 text-left"><span>Daily Total P&L (including fee&commisions)</span><h1 class="font-bold">${{summaryObj.pnl | number:2}}</h1></div><div class="col-xs-4 text-left"><span>Daily Total QTY</span><h1 class="font-bold">{{summaryObj.qty | number}}</h1></div><div class="col-lg-12"><highchart config="chartPieConfig"></highchart></div></div><div class="col-lg-6"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Daily Summary</h5><div class="ibox-tools"></div></div><div class="ibox-content"><div class="table-responsive"><table st-safe-src="summaryList" st-table="displayedSummary" class="table table-striped"><thead><tr><th>Trade Date</th><th>Symbol</th><th st-sort="ACCOUNT_VALUE" st-sort-default="reverse">QTY</th><th st-sort="PNL">P&L</th></tr></thead><tbody><tr ng-repeat="sum in displayedSummary"><td>{{sum["@TRADE_DATE"]}}</td><td>{{sum.SYMBOL}}</td><td>{{sum.QTY|number}}</td><td>{{sum.PNL|number:2}}</td></tr></tbody></table></div></div></div></div><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Incubatee Daily Performance</h5><div class="ibox-tools" ng-if="$root.exportShow"><a type="button" class="btn btn-sm btn-primary" href="{{historyFilePath}}" download="{{historyFileName}}">Export</a></div></div><div class="ibox-content"><div class="table-responsive"><table st-safe-src="userList" st-table="displayed" class="table table-striped"><thead><tr><th colspan="5"><div class="input-group"><input st-search="USER_ID" class="form-control" placeholder="Search User ID ..." type="text"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-primary">Go!</button></span></div></th></tr><tr><th>Trade Date</th><th>User Id</th><th st-sort="ACCOUNT_VALUE" st-sort-default="reverse">Account Value</th><th st-sort="PNL">P&L</th><th st-sort="UR_PNL">UR_P&L</th><th st-sort="ALL_TIME_PNL">All Time P&L</th><th st-sort="SUMQTY">Total Qty</th><th st-sort="CNTQTY"># Filled</th><th st-sort="CASH">Cash</th><th st-sort="Ranking">Ranking</th><th st-sort="WinRatio">Win Ratio</th><th st-sort="BiggestWin">Biggest Win</th><th st-sort="BiggestLoss">Biggest Loss</th><th st-sort="AllTimeSharpRatio">All Time Sharp Ratio</th></tr></thead><tbody><tr ng-repeat="userInfo in displayed"><td>{{userInfo["@TRADE_DATE"]}}</td><td><a href="#/index/profile/{{userInfo.USER_ID}}/INC/FX">{{userInfo.USER_ID}}</a></td><td>{{userInfo.ACCOUNT_VALUE|number:2}}</td><td>{{userInfo.PNL|number:2}}</td><td>{{userInfo.UR_PNL|number:2}}</td><td>{{userInfo.ALL_TIME_PNL|number:2}}</td><td>{{userInfo.SUMQTY}}</td><td>{{userInfo.CNTQTY}}</td><td>{{userInfo.CASH|number:2}}</td><td>{{userInfo.Ranking}}</td><td>{{userInfo.WinRatio}}%</td><td>{{userInfo.BiggestWin|number:2}}</td><td>{{userInfo.BiggestLoss|number:2}}</td><td>{{userInfo.AllTimeSharpRatio|number:2}}</td></tr></tbody><tfoot><tr><td colspan="5" class="text-center"><div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7"></div></td></tr></tfoot></table></div></div></div></div></div></div>'),t.put("components/map/map.html",'<div class="col-md-6 chartPanel" ng-controller="MapCtrl"><h3>Global Distribution on Map</h3><div id="map" map="" ng-init="data()"></div></div>'),t.put("components/school/contest.html",'<div class="col-lg-4" ng-controller="ContestCrol"><div class="ibox float-e-margins"><div class="ibox-title"><h5>School User In Contests</h5><div class="ibox-tools"><button type="button" class="btn btn-sm btn-primary">Export</button></div></div><div class="ibox-content"><div class="row"><div class="col-sm-3 m-b-xs"><select class="input-sm form-control input-s-sm inline product-option" ng-options="product.name for product in products" ng-model="selected" ng-change="changeProduct()"></select></div><div class="col-sm-3"></div></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th class="hidden-xs">Contest Name</th><th class="hidden-xs"># Users</th></tr></thead><tbody><tr ng-repeat="contest in contestList"><td>{{contest.name}}</td><td>{{contest.count|number}}</td></tr></tbody></table></div></div></div></div>'),t.put("components/school/count.html",'<div class="col-lg-6 school-count-box"><div class="col-lg-3 text-center"><div class="widget style1"><div class="row"><i class="fa fa-user fa-3x"></i></div><div class="row"><span>Total Users</span><h2 class="font-bold" ng-bind="totalUser"></h2><span></span></div></div></div><div class="col-lg-9"><div class="row m-t-xs"><div class="col-xs-4"><h5 class="m-b-xs">Core Users 30 Days</h5><h1 class="no-margins" ng-bind-html="isChina?coreFX30 + coreSC30 + coreFC30:core30"></h1></div><div class="col-xs-4"><h5 class="m-b-xs">Weekly Active Users</h5><h1 class="no-margins">{{(weekUserFX + weekUserFC + weekUserSC)|number}}</h1></div><div class="col-xs-4"><h5 class="m-b-xs">Monthly Active Users</h5><h1 class="no-margins">{{(monthUserFX + monthUserFC + monthUserSC)|number}}</h1></div></div><table class="table small m-t-sm"><tbody><tr><td><i class="fa fa-key"></i> 60 Days <strong ng-bind-html="isChina?coreFX60 + coreSC60 + coreFC60:core60"></strong></td><td><i class="fa fa-money"></i> FX <strong ng-bind="weekUserFX"></strong></td><td><i class="fa fa-money"></i> FX <strong ng-bind="monthUserFX"></strong></td></tr><tr><td><i class="fa fa-key"></i> > 90 Days <strong ng-bind-html="isChina?coreFX90 + coreSC90 + coreFC90:core90"></strong></td><td ng-show="$root.regionSelected == \'CN\'"><i class="fa fa-line-chart"></i> FC <strong ng-bind="weekUserFC"></strong></td><td ng-show="$root.regionSelected == \'CN\'"><i class="fa fa-line-chart"></i> FC <strong ng-bind="monthUserFC"></strong></td></tr><tr ng-show="$root.regionSelected == \'CN\'"><td></td><td><i class="fa fa-bank"></i> SC <strong ng-bind="weekUserSC"></strong></td><td><i class="fa fa-bank"></i> SC <strong ng-bind="monthUserSC"></strong></td></tr></tbody></table></div></div>'),t.put("components/school/quant.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class="row chartPanel" ng-controller="QuantCrol"><div class="col-lg-12"><highchart config="chartConfig"></highchart></div></div></div>'),t.put("components/school/school.html",'<div class="wrapper wrapper-content animated fadeInRight" ng-hide="$root.schoolShow"><h3>No access for this account</h3></div><div class="wrapper wrapper-content animated fadeInRight" ng-if="$root.schoolShow"><div class="row chartPanel" ng-controller="SchoolCtrl"><div class="row"><div class="col-md-2 selector pull-left"><ui-select ng-model="region.selected" on-select="onRegionSelect($item, $model)" theme="select2" class="form-control" title="Choose a Region"><ui-select-match placeholder="Select or search Region ...">{{$select.selected}}</ui-select-match><ui-select-choices repeat="item in regions | filter: $select.search"><div ng-bind-html="item | highlight: $select.search"></div><img width="19" src="http://lipis.github.io/flag-icon-css/flags/4x3/{{item| lowercase}}.svg"></ui-select-choices></ui-select></div><div class="col-md-3 selector pull-left" ng-show="school_show"><ui-select ng-model="school.selected" on-select="onSchoolSelect($item, $model)" theme="select2" class="form-control" title="Choose a School"><ui-select-match placeholder="Select or search a school name ...">{{$select.selected.school_name}}</ui-select-match><ui-select-choices repeat="school in schools | filter: $select.search"><div ng-bind-html="school.school_name | highlight: $select.search"></div><small ng-bind-html="school.school_key | highlight: $select.search"></small></ui-select-choices></ui-select></div><div class="col-md-2 compare-switch" ng-show="school_show"><span style="float:right">Compare mode</span><div class="switch"><div class="onoffswitch"><input type="checkbox" ng-model="isCompard" class="onoffswitch-checkbox" id="compared"> <label class="onoffswitch-label" for="compared"><span class="onoffswitch-inner"></span></label></div></div></div></div><div class="row"><div ng-include="\'components/school/count.html\'"></div><div ng-include="\'components/school/user_growth.html\'"></div></div></div><div class="row chartPanel"><div ng-include="\'components/school/user_rank.html\'"></div><div ng-include="\'components/school/contest.html\'"></div></div></div>'),t.put("components/school/user_growth.html",'<div class="col-lg-6"><highchart config="chartConfig" class="user-growth-chart"></highchart></div>'),t.put("components/school/user_rank.html",'<div class="col-lg-8" ng-controller="UserRankingCrol"><div class="ibox float-e-margins"><div class="ibox-title"><h5>School User Ranking(By ROI)</h5><div class="ibox-tools"><button type="button" class="btn btn-sm btn-primary">Export</button></div></div><div class="ibox-content"><div class="row"><div class="col-sm-3 m-b-xs"><select class="input-sm form-control input-s-sm inline product-option" ng-options="product.name for product in products" ng-model="selected" ng-change="changeProduct()"></select></div><div class="col-sm-3"></div></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th></th><th>User Name</th><th class="hidden-xs">User Id</th><th class="hidden-xs">Register</th><th class="hidden-xs">Trade Count</th><th class="hidden-xs">Biggest Loss</th><th class="hidden-xs">Ranking</th><th>ROI %</th></tr></thead><tbody><tr ng-repeat="userInfo in userRankList"><td><img class="img-circle" src="{{userInfo.serving_url || \'http://www.hkfdt.cn/favicon.ico\'}}"></td><td><a href="#/index/profile/{{userInfo.user_id}}/{{$root.regionSelected}}/{{selected.name}}">{{userInfo.username | limitTo: 10}}</a></td><td class="hidden-xs">{{userInfo.user_id}}</td><td class="hidden-xs">{{userInfo.created|date}}</td><td class="hidden-xs">{{userInfo.tradescount|number}}</td><td class="neg-number">- {{userInfo.biggestloss|currency:"$"}}</td><td class="hidden-xs">{{userInfo.ranking}}</td><td>{{(userInfo.unit_price - 1 ) * 100|number:2}} %</td></tr></tbody></table><div class="text-center"><div ng-show="rankListLoading"><i class="fa fa-spinner fa-spin"></i></div><button type="button" class="btn btn-sm btn-info" ng-class="userRankList.length>0?\'\':\'disabled\'" ng-click="loaded=true;loadMore()" ng-hide="loaded">Load More</button></div></div></div></div></div>'),t.put("components/seed/user_list.html",'<div class="wrapper wrapper-content animated fadeInRight" ng-hide="$root.seedShow"><h3>No access for this account</h3></div><div class="wrapper wrapper-content animated fadeInRight" ng-if="$root.seedShow"><div class="row" ng-controller="SeedUserListCrol"><div class="col-lg-6"><div class="col-xs-8 text-left"><span>Daily Total P&L (including fee&commisions)</span><h1 class="font-bold">${{summaryObj.pnl | number:2}}</h1></div><div class="col-xs-4 text-left"><span>Daily Total QTY</span><h1 class="font-bold">{{summaryObj.qty | number}}</h1></div><div class="col-lg-12"><highchart config="chartPieConfig"></highchart></div></div><div class="col-lg-6"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Daily Summary</h5><div class="ibox-tools"></div></div><div class="ibox-content"><div class="table-responsive"><table st-safe-src="summaryList" st-table="displayedSummary" class="table table-striped"><thead><tr><th>Trade Date</th><th>Symbol</th><th st-sort="ACCOUNT_VALUE" st-sort-default="reverse">QTY</th><th st-sort="PNL">P&L</th></tr></thead><tbody><tr ng-repeat="sum in displayedSummary"><td>{{sum["@TRADE_DATE"]}}</td><td>{{sum.SYMBOL}}</td><td>{{sum.QTY|number}}</td><td>{{sum.PNL|number:2}}</td></tr></tbody></table></div></div></div></div><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Seed Daily Performance</h5><div class="ibox-tools" ng-if="$root.exportShow"><a type="button" class="btn btn-sm btn-primary" href="{{historyFilePath}}" download="{{historyFileName}}">Export</a></div></div><div class="ibox-content"><div class="table-responsive"><table st-safe-src="userList" st-table="displayed" class="table table-striped"><thead><tr><th colspan="5"><div class="input-group"><input st-search="USER_ID" class="form-control" placeholder="Search User ID ..." type="text"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-primary">Go!</button></span></div></th></tr><tr><th>Trade Date</th><th>User Id</th><th st-sort="ACCOUNT_VALUE" st-sort-default="reverse">Account Value</th><th st-sort="PNL">P&L</th><th st-sort="UR_PNL">UR_P&L</th><th st-sort="ALL_TIME_PNL">All Time P&L</th><th st-sort="SUMQTY">Total Qty</th><th st-sort="CNTQTY"># Filled</th><th st-sort="CASH">Cash</th><th st-sort="Ranking">Ranking</th><th st-sort="WinRatio">Win Ratio</th><th st-sort="BiggestWin">Biggest Win</th><th st-sort="BiggestLoss">Biggest Loss</th><th st-sort="AllTimeSharpRatio">All Time Sharp Ratio</th></tr></thead><tbody><tr ng-repeat="userInfo in displayed"><td>{{userInfo["@TRADE_DATE"]}}</td><td><a href="#/index/profile/{{userInfo.USER_ID}}/SEED/FX">{{userInfo.USER_ID}}</a></td><td>{{userInfo.ACCOUNT_VALUE|number:2}}</td><td>{{userInfo.PNL|number:2}}</td><td>{{userInfo.UR_PNL|number:2}}</td><td>{{userInfo.ALL_TIME_PNL|number:2}}</td><td>{{userInfo.SUMQTY}}</td><td>{{userInfo.CNTQTY}}</td><td>{{userInfo.CASH|number:2}}</td><td>{{userInfo.Ranking}}</td><td>{{userInfo.WinRatio}}%</td><td>{{userInfo.BiggestWin|number:2}}</td><td>{{userInfo.BiggestLoss|number:2}}</td><td>{{userInfo.AllTimeSharpRatio|number:2}}</td></tr></tbody><tfoot><tr><td colspan="5" class="text-center"><div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7"></div></td></tr></tfoot></table></div></div></div></div></div></div>'),t.put("components/user/cmb_list.html",'<div class="col-lg-2" ng-repeat="user in userList"><div class="contact-box center-version"><a href="#/index/profile/{{user.userId}}/CN/FC/beta"><img alt="image" class="img-circle" src="{{usersMap[user.userId].serving_url ||\'http://www.hkfdt.cn/favicon.ico\'}}"><h3 class="m-b-xs"><strong>{{usersMap[user.userId].USERNAME}}</strong></h3><address class="m-t-md"><strong>{{usersMap[user.userId].school_name}}</strong><br><abbr title="Phone">Score:</abbr> {{user["scoresMap"]["feature"][featureSelected.key]["scores"].fdt}}</address></a></div></div>'),t.put("components/user/cmb_score.html",'<div class="row" ng-controller="CMBCtrl"><div class="wrapper wrapper-content animated fadeInRight"><img src="assets/images/cmb.png" style="width:180px;margin-bottom: 15px; margin-left: 15px;"><div class="row filterBar" ng-init="changeFt()"><div class="col-md-2"><select class="input-sm form-control input-s-sm inline product-option" ng-options="feature.name for feature in features" ng-model="featureSelected" ng-change="changeFt()"></select></div><div class="col-md-1"><input ng-model="limitList" value="10" ng-model-options="{debounce: 1000}" class="userScorelimit" ng-change="changeFt()"> Limit</div><div class="col-md-2"><input ng-model="tradeCount" value="0" class="countFilter" ng-model-options="{debounce: 1000}" ng-change="changeFt()"> Trade Count</div><div class="col-md-2"><input ng-model="loginCount" value="0" class="countFilter" ng-model-options="{debounce: 1000}" ng-change="changeFt()"> Login Count</div><div class="col-md-2"><input ng-model="unitPrice" value="0.95" class="countFilter" ng-model-options="{debounce: 1000}" ng-change="changeFt()"> Unit Price</div><div class="col-md-2"><input ng-model="mdd" value="-0.15" class="countFilter" ng-model-options="{debounce: 1000}" ng-change="changeFt()"> MDD</div></div><div ng-include="\'components/user/cmb_list.html\'"></div></div></div>'),t.put("components/user/core_user.html",'<div class="row" ng-controller="CoreUserCtrl"><div class="wrapper wrapper-content animated fadeInRight"><div class="row filterBar" ng-init="changeRegion()"><div class="col-md-2"><select class="input-sm form-control input-s-sm inline product-option" ng-options="app for app in appTypes" ng-model="appSelected" ng-change="changeSelect()"></select></div><div class="col-md-1"><select class="input-sm form-control input-s-sm inline product-option" ng-options="region for region in regions" ng-model="regionSelected" ng-change="changeRegion()"></select></div><div class="col-md-1"><select class="input-sm form-control input-s-sm inline product-option" ng-options="school.name for school in schools" ng-model="schoolSelected" ng-change="changeSelect()"></select></div><div class="col-md-1"><input ng-model="limitList" value="20" ng-model-options="{debounce: 1000}" class="userScorelimit" ng-change="changeSelect()"> Limit</div><div class="col-md-1"><a class="btn btn-white btn-bitbucket"><i class="fa fa-user-md"></i> {{totalUser}}</a></div><div class="col-md-2 btn-group pull-right"><button class="btn" ng-class="{\'btn-primary\': isActive(30), \'btn-white\': !isActive(30)}" type="button" ng-click="changeSelect(30)">30 Day</button> <button class="btn" ng-class="{\'btn-primary\': isActive(60), \'btn-white\': !isActive(60)}" type="button" ng-click="changeSelect(60)">60 Day</button> <button class="btn" ng-class="{\'btn-primary\': isActive(90), \'btn-white\': !isActive(90)}" type="button" ng-click="changeSelect(90)">90 Day</button></div></div><div ng-include="\'components/user/core_user_list.html\'"></div></div></div>'),t.put("components/user/core_user_list.html",'<div class="col-lg-2" ng-repeat="user in userList"><div class="contact-box center-version"><a href="#/index/profile/{{user.user_id}}/{{regionSelected}}/{{appSelected}}"><img alt="image" class="img-circle" src="{{usersMap[user.user_id].serving_url ||\'http://www.hkfdt.cn/favicon.ico\'}}"><h3 class="m-b-xs"><strong>{{usersMap[user.user_id].USERNAME}}</strong></h3><address class="m-t-md"><strong>{{usersMap[user.user_id].school_name|limitTo:10}}</strong><br><abbr title="Phone">Trade Life :</abbr> {{user.life}}</address></a></div></div>'),t.put("components/user/mt4_closed_list.html",'<div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Trade History</h5></div><div class="ibox-content"><div class="table-responsive"><table class="table table-striped" st-table="userClosedListDisplayed" st-safe-src="userClosedList"><thead><tr><th>Trade Date</th><th>Symbol</th><th>SIDE</th><th class="hidden-xs">QTY</th><th class="hidden-xs">Buy Price</th><th class="hidden-xs">Sell Price</th><th>P&L</th></tr></thead><tbody><tr ng-repeat="trade in userClosedListDisplayed"><td>{{trade.closeTime|date:\'yyyy-MM-dd\'}}</td><td>{{trade.item}}</td><td>{{trade.type}}</td><td class="hidden-xs">{{trade.size}}</td><td class="hidden-xs">{{trade.openPrice}}</td><td class="neg-number">{{trade.closePrice}}</td><td>{{trade.profit|number:2}}</td></tr></tbody><tfoot><tr><td colspan="5" class="text-center"><div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7"></div></td></tr></tfoot></table></div></div></div></div>'),t.put("components/user/mt4_profile.html",'<div class="wrapper wrapper-content animated fadeInRight" ng-controller="MT4ProfileCtrl"><a target="_blank" href="http://oxfordnie.org/"><img alt="image" style="width:120px; float:right" src="assets/images/oxford_nie.png"></a><div class="row m-b-lg m-t-lg"><div class="col-md-4"><div class="profile-image"><img src="{{user.serving_url || \'http://cdn4.aptoide.com/imgs/3/7/0/37056af9e7e51c1b28de1d2f920568a4.png\'}}" class="img-circle circle-border m-b-md" alt="profile"></div><div class="profile-info"><div class=""><div><h2 class="no-margins">{{acc.name}}</h2><h4>{{user.school_name}}</h4><small><span ng-if="$root.exportShow">Contact: {{user.EMAIL }} {{user.PHONE}}</span><br>Join at: {{user.CREATED | date:\'yyyy-MM-dd\'}}<br>Last Active: {{userLastLogin.LOGINAT | date:\'yyyy-MM-dd @ h:mma\'}}<br>Country: <img width="15" ng-show="user.COUNTRY" src="http://lipis.github.io/flag-icon-css/flags/4x3/{{user.COUNTRY| lowercase}}.svg"><br></small></div></div></div><div class="row" style="margin-top: 20px;" ng-show="dateRangeChanged"><div class="pull-left" style="font-size: 10px;color: #aaa;margin-left: 25px;">Account on : {{dateRange.endDate | date:\'yyyy-MM-dd\'}}</div></div><table class="table small m-b-xs accounts-table"><tbody><tr><td><strong>{{acc.account}}</strong><div>Account No</div></td><td><strong>20.5%</strong><div>ROI</div></td></tr><tr><td><strong>{{acc.currency}}</strong><div>Currency</div></td><td><strong>{{acc.leverage}}</strong><div>Leverage</div></td></tr><tr><td><strong>{{acc.time}}</strong><div>Update Time</div></td><td><strong>{{acc.title}}</strong><div>Title</div></td></tr><tr><td><strong>{{performance.BiggestWin}}</strong><div>Biggest Win</div></td><td><strong>-{{performance.BiggestLoss}}</strong><div>Biggest Loss</div></td></tr><tr><td><strong>{{performance.WinRatio}}%</strong><div>Win Ratio</div></td><td><strong>{{performance.TradesCount}}</strong><div>Trade Counts</div></td></tr></tbody></table><div class="col-md-6"><div config="chartPieConfig" class="ng-isolate-scope" data-highcharts-chart="8"><div class="highcharts-container" id="highcharts-16" style="position: relative; overflow: hidden; width: 400px; height: 400px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: \'Unica One\', sans-serif;"><svg version="1.1" style="font-family:\'Unica One\', sans-serif;font-size:12px;" xmlns="http://www.w3.org/2000/svg" width="400" height="400"><desc>Created with Highcharts 4.1.9</desc><defs><clippath id="highcharts-17"><rect x="0" y="0" width="400" height="400"></rect></clippath></defs><rect x="0" y="0" width="400" height="400" strokewidth="0" fill="rgba(255, 255, 255, 0.1)" class="highcharts-background"></rect><g class="highcharts-button" style="cursor:default;" stroke-linecap="round" transform="translate(366,10)"><title>Chart context menu</title><rect x="0.5" y="0.5" width="24" height="22" strokewidth="1" fill="white" stroke="none" stroke-width="1" rx="2" ry="2"></rect><path fill="#E0E0E0" d="M 6 6.5 L 20 6.5 M 6 11.5 L 20 11.5 M 6 16.5 L 20 16.5" stroke="#666" stroke-width="3" zindex="1"></path><text x="0" zindex="1" style="color:black;fill:black;" y="12"></text></g><g class="highcharts-series-group" zindex="3"><path fill="rgba(26,179,148,0.25)" d="M 0 0"></path><g class="highcharts-series highcharts-series-0 highcharts-tracker" visibility="visible" zindex="0.1" transform="translate(10,46) scale(1 1)" style="cursor:pointer;"><path fill="rgba(1,154,123,1)" d="M 237.8766111280762 228.68736443516045 L 237.8766111280762 247.24891744130733 L 177 188.06155300614688 L 177 169.5 Z" zindex="20.163647305236008" transform="translate(0,0)" visibility="visible"></path><path fill="rgba(219,66,66,1)" d="M 78.57358803289625 146.8671540976176 L 78.57358803289625 165.42870710376448 L 177 188.06155300614688 L 177 169.5 Z" zindex="39.49905808426557" transform="translate(0,0)" visibility="visible"></path><path fill="rgba(219,66,66,1)" d="M 176.9587055312802 96.31445397222599 L 176.9587055312802 114.87600697837286 L 177 188.06155300614688 L 177 169.5 Z" zindex="124382.50905808432" transform="translate(0,0)" visibility="visible"></path><path fill="rgba(119,213,101,1)" d="M 237.87577408929732 228.68779489484652 L 237.87577408929732 247.2493479009934 L 177 188.06155300614688 L 177 169.5 Z" zindex="124383.49905808429" transform="translate(0,0)" visibility="visible"></path><path fill="rgba(219,66,66,1)" d="M 78.57358803289625 146.8671540976176 C 92.7081879501468 116.13266404616877 131.25307852839316 96.32734852372577 176.9587055312802 96.31445397222599 L 176.9587055312802 114.87600697837286 C 131.25307852839316 114.88890152987264 92.7081879501468 134.69421705231565 78.57358803289625 165.42870710376448 Z" zindex="125638.89803846902" transform="translate(0,0)" visibility="visible"></path><path fill="rgba(219,66,66,1)" d="M 177 169.5 C 177 169.5 177 169.5 177 169.5 L 177 188.06155300614688 C 177 188.06155300614688 177 188.06155300614688 177 188.06155300614688 Z" zindex="125638.89803846902" transform="translate(0,0)" visibility="visible"></path><path fill="rgba(1,154,123,1)" d="M 176.97891982341756 96.31444966516219 L 176.97891982341756 114.87600267130905 L 177 188.06155300614688 L 177 169.5 Z" zindex="248765.8463526948" transform="translate(0,0)" visibility="visible"></path><path fill="rgba(119,213,101,1)" d="M 78.57326796104128 146.86785007858273 L 78.57326796104128 165.4294030847296 L 177 188.06155300614688 L 177 169.5 Z" zindex="248766.83635269478" transform="translate(0,0)" visibility="visible"></path><path fill="rgba(1,154,123,1)" d="M 280.5 169.5 C 280.5 193.73900669408883 265.5991796836188 214.43046989750943 237.8766111280762 228.68736443516045 L 237.8766111280762 247.24891744130733 C 265.5991796836188 232.9920229036563 280.5 212.3005597002357 280.5 188.06155300614688 Z" zindex="251278.63267948967" transform="translate(0,0)" visibility="visible"></path><path fill="rgba(1,154,123,1)" d="M 177 169.5 C 177 169.5 177 169.5 177 169.5 C 177 169.5 177 169.5 177 169.5 L 177 188.06155300614688 C 177 188.06155300614688 177 188.06155300614688 177 188.06155300614688 C 177 188.06155300614688 177 188.06155300614688 177 188.06155300614688 Z" zindex="251278.63267948967" transform="translate(0,0)" visibility="visible"></path><path fill="rgba(119,213,101,1)" d="M 237.87577408929732 228.68779489484652 C 191.64723072603857 252.4612634558797 126.9165793964145 245.2341891650591 93.29581773275102 212.54567266852246 C 79.83728649127922 199.46032305904347 73.5 185.68000018513993 73.5 169.5 L 73.5 188.06155300614688 C 73.5 179.9715739360498 75.03522701078882 173.1228349893985 78.57326796104128 165.4294030847296 L 78.57326796104128 146.86785007858273 C 75.03522701078882 154.56128198325163 73.5 161.4100209299029 73.5 169.5 L 73.5 188.06155300614688 C 73.5 228.48081720240333 119.83852839251287 261.2471048589546 177 261.2471048589546 C 199.88197570102406 261.2471048589546 219.37029520317867 256.7659666066491 237.87577408929732 247.2493479009934 Z" zindex="251339.39803846896" transform="translate(0,0)" visibility="visible"></path><path fill="rgba(119,213,101,1)" d="M 177 169.5 C 177 169.5 177 169.5 177 169.5 C 177 169.5 177 169.5 177 169.5 L 177 188.06155300614688 C 177 188.06155300614688 177 188.06155300614688 177 188.06155300614688 C 177 188.06155300614688 177 188.06155300614688 177 188.06155300614688 Z" zindex="251339.39803846896" transform="translate(0,0)" visibility="visible"></path><g zindex="31416026.53589793" stroke="#1ab394" stroke-width="1" stroke-linejoin="round" _args="NaN"><path fill="#1ab394" d="M 176.97891982341756 96.31444966516219 C 234.1403902452965 96.30621734413234 280.4883555932162 129.06583070628506 280.49999785326645 169.48509406418992 C 280.5069811034651 193.72934111379573 265.6051737434192 214.42738733038524 237.8766111280762 228.68736443516045 L 177 169.5 C 177 169.5 177 169.5 177 169.5 C 177 169.5 177 169.5 177 169.5 Z" zindex="314160.2653589793" transform="translate(0,0)" visibility="visible"></path></g><g zindex="31416026.53589793" stroke="#90ee7e" stroke-width="1" stroke-linejoin="round" _args="NaN"><path fill="#90ee7e" d="M 237.87577408929732 228.68779489484652 C 191.64723072603857 252.4612634558797 126.9165793964145 245.2341891650591 93.29581773275102 212.54567266852246 C 73.10803835704546 192.91766525593587 67.9591267225058 169.94818577661462 78.57326796104128 146.86785007858273 L 177 169.5 C 177 169.5 177 169.5 177 169.5 C 177 169.5 177 169.5 177 169.5 Z" zindex="314160.2653589793" transform="translate(0,0)" visibility="visible"></path></g><g zindex="31416026.53589793" stroke="#f45b5b" stroke-width="1" stroke-linejoin="round" _args="NaN"><path fill="#f45b5b" d="M 78.57358803289625 146.8671540976176 C 92.7081879501468 116.13266404616877 131.25307852839316 96.32734852372577 176.9587055312802 96.31445397222599 L 177 169.5 C 177 169.5 177 169.5 177 169.5 Z" zindex="314160.2653589793" transform="translate(0,0)" visibility="visible"></path></g></g><g class="highcharts-markers highcharts-series-0" visibility="visible" zindex="0.1" transform="translate(10,46) scale(1 1)"></g></g><text x="200" text-anchor="middle" class="highcharts-title" zindex="4" style="color:#333333;font-size:18px;fill:#333333;width:336px;" y="24">Portfolio</text><g class="highcharts-data-labels highcharts-series-0 highcharts-tracker" visibility="visible" zindex="6" transform="translate(10,46) scale(1 1)" opacity="1" style="cursor:pointer;"><path fill="none" d="M 311.6385500753543 137.62373399596729 C 306.6385500753543 137.62373399596729 296.3575927950417 140.0958699509669 285.895971115795 143.4950568890913 L 275.43434943654836 146.89424382721572" stroke="#1ab394" stroke-width="1"></path><path fill="none" d="M 85.916199444452 271.5383716153518 C 90.916199444452 271.5383716153518 103.23295083729464 265.0662356603523 109.69858861251184 256.16704872222783 L 116.16422638772904 247.2678617841034" stroke="#90ee7e" stroke-width="1"></path><path fill="none" d="M 67.82073382467375 86.01987961693798 C 72.82073382467375 86.01987961693798 103.23295083729461 92.49201557193757 109.69858861251181 101.39120251006199 L 116.16422638772902 110.2903894481864" stroke="#f45b5b" stroke-width="1"></path><g zindex="1" style="cursor:pointer;" transform="translate(317,128)"><text x="5" zindex="1" style="font-size:11px;font-weight:bold;color:#000000;text-shadow:0 0 6px #FFFFFF, 0 0 3px #FFFFFF;fill:#000000;text-rendering:geometricPrecision;" y="16"><tspan>GBP/AUD</tspan></text></g><g zindex="1" style="cursor:pointer;" transform="translate(24,262)"><text x="0" zindex="1" style="font-size:11px;font-weight:bold;color:#000000;text-shadow:0 0 6px #FFFFFF, 0 0 3px #FFFFFF;fill:#000000;text-rendering:geometricPrecision;" y="16"><tspan>USD/EUR</tspan></text></g><g zindex="1" style="cursor:pointer;" transform="translate(5,76)"><text x="0" zindex="1" style="font-size:11px;font-weight:bold;color:#000000;text-shadow:0 0 6px #FFFFFF, 0 0 3px #FFFFFF;fill:#000000;text-rendering:geometricPrecision;" y="16"><tspan>USD/CNH</tspan></text></g></g><g class="highcharts-legend" zindex="7"><g zindex="1"><g></g></g></g><g class="highcharts-tooltip" zindex="8" style="cursor:default;padding:0;pointer-events:none;white-space:nowrap;" transform="translate(185,-9999)" opacity="0" visibility="visible"><path fill="none" d="M 3.5 0.5 L 61.5 0.5 C 64.5 0.5 64.5 0.5 64.5 3.5 L 64.5 56.5 C 64.5 59.5 64.5 59.5 61.5 59.5 L 3.5 59.5 C 0.5 59.5 0.5 59.5 0.5 56.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" isshadow="true" stroke="black" stroke-opacity="0.049999999999999996" stroke-width="5" transform="translate(1, 1)" width="64" height="59"></path><path fill="none" d="M 3.5 0.5 L 61.5 0.5 C 64.5 0.5 64.5 0.5 64.5 3.5 L 64.5 56.5 C 64.5 59.5 64.5 59.5 61.5 59.5 L 3.5 59.5 C 0.5 59.5 0.5 59.5 0.5 56.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" isshadow="true" stroke="black" stroke-opacity="0.09999999999999999" stroke-width="3" transform="translate(1, 1)" width="64" height="59"></path><path fill="none" d="M 3.5 0.5 L 61.5 0.5 C 64.5 0.5 64.5 0.5 64.5 3.5 L 64.5 56.5 C 64.5 59.5 64.5 59.5 61.5 59.5 L 3.5 59.5 C 0.5 59.5 0.5 59.5 0.5 56.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" isshadow="true" stroke="black" stroke-opacity="0.15" stroke-width="1" transform="translate(1, 1)" width="64" height="59"></path><path fill="rgba(249, 249, 249, .85)" d="M 3.5 0.5 L 61.5 0.5 C 64.5 0.5 64.5 0.5 64.5 3.5 L 64.5 56.5 C 64.5 59.5 64.5 59.5 61.5 59.5 L 3.5 59.5 C 0.5 59.5 0.5 59.5 0.5 56.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" stroke="#1ab394" stroke-width="1"></path><text x="8" zindex="1" style="font-size:12px;color:#333333;fill:#333333;" y="20"><tspan style="font-size: 10px">IC1604.CF</tspan><tspan x="8" dy="15">Qty:</tspan><tspan style="font-weight:bold" dx="0">4</tspan><tspan x="8" dy="15">40.0 %</tspan></text></g><text x="390" text-anchor="end" zindex="8" style="cursor:pointer;color:#909090;font-size:9px;fill:#909090;" y="395" visibility="hidden">Highcharts.com</text></svg></div></div></div></div><div class="col-md-8"><div class="row"><div class="col-md-12"><highchart config="chartRadarFDTScoreConfig"></highchart></div></div><div class="row"><highchart config="chartConfig" class="user-trade-chart"></highchart></div><div class="row"><div ng-include="\'components/user/mt4_closed_list.html\'"></div></div></div></div></div>'),t.put("components/user/user_closed_list.html",'<div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>Trade History</h5><div class="ibox-tools" ng-if="$root.exportShow"><button type="button" class="btn btn-outline btn-primary" ng-if="selectTradeDates" ng-click="tradeDateCancelClick()">{{selectTradeDates}} <i class="fa fa-times"></i></button> <a type="button" class="btn btn-sm btn-primary" href="{{historyFilePath}}" download="{{historyFileName}}">Export</a></div></div><div class="ibox-content"><div class="table-responsive"><table class="table table-striped" st-table="userClosedListDisplayed" st-safe-src="userClosedList"><thead><tr><th>Trade Date</th><th>Symbol</th><th>SIDE</th><th>Duration</th><th class="hidden-xs">QTY</th><th class="hidden-xs">Buy Price</th><th class="hidden-xs">Sell Price</th><th>P&L</th></tr></thead><tbody><tr ng-repeat="trade in userClosedListDisplayed"><td>{{trade.TRADE_DATE|date:\'yyyy-MM-dd\'}}</td><td>{{trade.SYMBOL}}</td><td>{{sideMap[trade.ObjId]["side"]}}</td><td><span ng-if="sideMap[trade.ObjId]">{{(trade.CREATED - sideMap[trade.ObjId]["ts"]) | amDurationFormat : \'minutes\'}}</span></td><td class="hidden-xs">{{trade.QTY}}</td><td class="hidden-xs">{{trade.BUY_PRICE}}</td><td class="neg-number">{{trade.SELL_PRICE}}</td><td>{{trade.AC_PNL|number:2}}</td></tr></tbody><tfoot><tr><td colspan="5" class="text-center"><div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7"></div></td></tr></tfoot></table></div></div></div></div>'),t.put("components/user/user_profile.html",'<div class="wrapper wrapper-content animated fadeInRight" ng-hide="$root.simShow"><h3>No access for this account</h3></div><div class="wrapper wrapper-content animated fadeInRight" ng-controller="UserProfileCtrl" ng-if="$root.simShow"><div class="row"><div class="col-md-3" ng-hide="hasUserId"><div class="input-group"><input type="text" class="form-control" ng-model="inputUserId" placeholder="Please enter fdt user id or user name"> <span class="input-group-btn"><button type="button" class="btn btn-primary" ng-click="loadData()">Go!</button></span></div></div><div class="col-md-1" ng-hide="hasUserId"><select class="input-sm form-control input-s-sm inline product-option" ng-options="product.name for product in products" ng-model="productSelected"></select></div><div class="col-md-1" ng-hide="hasUserId"><select class="input-sm form-control input-s-sm inline product-option" ng-options="region.name for region in regions" ng-model="regionSelected"></select></div><div class="col-md-1" ng-hide="hasUserId"><select class="input-sm form-control input-s-sm inline product-option" ng-options="contest.CONTEST_NAME for contest in contests" ng-model="contestSelected"></select></div><div class="col-md-2 form-group pull-right" id="data_1"><div class="input-group date"><span class="input-group-addon"><i class="fa fa-calendar"></i></span> <input singledatepicker="true" type="daterange" class="form-control date-selector" ng-change="loadData(); dateRangeChanged=true" ng-model="dateRange"></div></div></div><a target="_blank" href="http://oxfordnie.org/"><img alt="image" style="width:120px; float:right" src="assets/images/oxford_nie.png"></a><div class="row m-b-lg m-t-lg"><div class="col-md-4"><div class="profile-image"><img src="{{user.serving_url || \'http://www.hkfdt.cn/favicon.ico\'}}" class="img-circle circle-border m-b-md" alt="profile"></div><div class="profile-info"><div class=""><div><h2 class="no-margins">{{user.USERNAME}}</h2><h4>{{user.school_name}}</h4><small><span ng-if="$root.exportShow">Contact: {{user.EMAIL }} {{user.PHONE}}</span><br>Join at: {{user.CREATED | date:\'yyyy-MM-dd\'}}<br>Last Active: {{userLastLogin.LOGINAT | date:\'yyyy-MM-dd @ h:mma\'}}<br>Country: <img width="15" ng-show="user.COUNTRY" src="http://lipis.github.io/flag-icon-css/flags/4x3/{{user.COUNTRY| lowercase}}.svg"><br></small></div></div></div><div class="row" style="margin-top: 20px;" ng-show="dateRangeChanged"><div class="pull-left" style="font-size: 10px;color: #aaa;margin-left: 25px;">Account on : {{dateRange.endDate | date:\'yyyy-MM-dd\'}}</div></div><table class="table small m-b-xs accounts-table"><tbody><tr><td><strong>{{acc.CASH + acc.UR_PNL | currency:"$"}}</strong><div>Account Value</div></td><td><strong>{{acc.CASH | currency:"$"}}</strong><div>Cash Value</div></td></tr><tr><td><strong ng-show="acc.UNIT_PRICE">{{(acc.UNIT_PRICE - 1 ) * 100|number:2}}%</strong><div>ROI</div></td><td><strong>{{acc.TradesCount}}</strong><div>Total Trades</div></td></tr><tr><td><strong>{{acc.Ranking}}</strong><div>Ranking</div></td><td><strong>{{acc.RankingPer}}%</strong><div>Ranking Percentage</div></td></tr><tr><td><strong>{{acc.BiggestWin}}</strong><div>Biggest Win</div></td><td><strong>{{acc.BiggestLoss}}</strong><div>Biggest Loss</div></td></tr><tr><td><strong>{{acc.WinRatio}}%</strong><div>Win Ratio</div></td><td><strong>{{acc.CASH_AVAILABLE | currency:"$"}}</strong><div>Available Cash</div></td></tr><tr ng-show="userSetting"><td><strong>{{userSetting.DEFAULT_QTY}}</strong><div>Quick Trade QTY</div></td><td><strong>{{userSetting.STOP_LOSS_VALUE | currency:"$"}}</strong><div>Position Stop Loss</div></td></tr><tr ng-show="userSetting"><td><strong>{{userSetting.DAILY_STOPLOSS | currency:"$"}}</strong><div>Daily Stop Loss</div></td><td><strong>{{userSetting.TRAILING_STOP }}</strong><div>Trailing Stop</div></td></tr></tbody></table><highchart config="chartLoginConfig" class="user-roi-chart"></highchart><highchart config="chartRankingConfig" class="user-roi-chart"></highchart><highchart config="chartValueConfig" class="user-roi-chart"></highchart></div><div class="col-md-8"><div class="row"><div ng-class="beta?\'col-md-6\' :\'col-md-12\'"><highchart config="chartRadarFDTScoreConfig"></highchart></div><div class="col-md-6" ng-if="beta"><highchart config="chartRadarRiskPreferenceConfig"></highchart></div><div class="col-md-6" ng-show="beta"><highchart config="chartRadarProfitConfig"></highchart></div><div class="col-md-6" ng-show="beta"><div class="col-md-6 col-md-offset-3"><h4>Risk Control Score</h4></div><div class="col-md-3"><i class="fa fa-question-circle" tooltip-placement="left" tooltip="1）隔夜仓位控制 - overnight open-position control.计算交易员每个交易日对所有商品的仓位金额与资产的比例，然后对交易日做平均，最后做归一化.Calculate the ratio between the sum of all items\' open positions and asset at end of the trading day, and average them over all trading days, followed by normalisation. 2）最大仓位控制 - max open-position control.计算交易员下每笔订单后所有购买商品的仓位金额之和于资产的比例，取当天最大值，然后对交易日做平均，最后做归一化。Calculate the max ratio between of the sum of all items\' open position and asset for each coming order for each trading day, and average them over all trading days, followed by normalisation. 3) 收益回撤控制 - draw-down control.计算交易员历史上曾经历过的最大收益回撤值。对交易员的unit_price历史记录进行扫描，找到从最大的历史滑落值，并除以其unit_price最大值。MDD is the maximum value of the decline from the historical peak of the unit_price of a particular trader, normalised by the maximum value.4）损失波动控制 - loss variance control.计算日损失收益率的标准差.The standard deviation of daily PNL ratio.5）单笔损失控制 - order loss control.以在同一个商品上，两次空仓（empty position）中间的操作为一个交易序列，针对某一交易员在所有商品上进行的所有交易序列，找到净值损失最大的一次。Biggest_loss: define a trading series as all the trades between the timestamp of two consecutive empty positions, and for a particular trader, find the trading series with the biggest loss over all product."></i></div><br><highchart config="chartRadarConfig"></highchart></div></div><div class="row"><highchart config="chartConfig" class="user-trade-chart"></highchart></div><div class="row"><highchart config="chartTradesConfig" class="user-trade-chart"></highchart></div><div class="row"><div ng-include="\'components/user/user_closed_list.html\'"></div></div><div class="col-md-6"><highchart config="chartPieConfig"></highchart></div><div class="col-md-6" ng-hide="region==\'SEED\' || region==\'INC\'"><div class="table-responsive"><table class="table table-striped"><thead><tr><th class="hidden-xs">Joined Contests</th><th class="hidden-xs">Ranking</th></tr></thead><tbody><tr ng-repeat="contest in contestList"><td>{{contest.name}}</td><td>{{contest.RANKING}}</td></tr></tbody></table></div></div></div></div></div>'),t.put("components/user/user_score.html",'<div class="row" ng-controller="UserScoreCtrl"><div class="wrapper wrapper-content animated fadeInRight"><div class="row filterBar" ng-init="initProd()"><div class="col-md-2"><select class="input-sm form-control input-s-sm inline product-option" ng-options="contest.name for contest in contests" ng-model="contestSelected" ng-change="changeProd()"></select></div><div class="col-md-2"><select class="input-sm form-control input-s-sm inline product-option" ng-options="feature for feature in features" ng-model="featureSelected" ng-change="changeFt()"></select></div><div class="col-md-2"><select class="input-sm form-control input-s-sm inline product-option" ng-options="wt for wt in weightFiles" ng-model="weightSelected" ng-change="changeFt()"></select></div><div class="col-md-1"><select class="input-sm form-control input-s-sm inline product-option" ng-options="sortType for sortType in sortTypes" ng-model="sortTypeSelected" ng-change="changeFt()"></select></div><div class="col-md-1"><input ng-model="limitList" value="10" ng-model-options="{debounce: 1000}" class="userScorelimit" ng-change="changeFt()"> Limit</div><div class="col-md-2"><input style="margin-top:15px" type="checkbox" ng-model="incubatee" ng-change="changeFt()"> Incubatee Candidate</div></div><div ng-include="\'components/user/user_score_list.html\'"></div></div></div>'),t.put("components/user/user_score_list.html",'<div class="col-lg-2" ng-repeat="user in userList"><div class="contact-box center-version"><a target="_blank" href="#/index/profile/{{contestSelected.contestID? contestSelected.contestID + \'_1_*1_*1_\' + user.user_id : user.user_id}}/{{contestSelected.region}}/{{user.prod| uppercase}}/beta"><img alt="image" class="img-circle" src="{{usersMap[user.user_id].serving_url ||\'http://www.hkfdt.cn/favicon.ico\'}}"><h3 class="m-b-xs"><strong>{{usersMap[user.user_id].USERNAME}}</strong></h3><address class="m-t-md"><strong>{{usersMap[user.user_id].school_name}}</strong><br><abbr title="Phone">Score:</abbr> {{user[featureSelected].score}}</address><span ng-show="user.arena_tg==\'former_incubatee\'" class="former-incu">Former</span></a></div></div>')
}]);